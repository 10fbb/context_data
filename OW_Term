г. Москва, 2024 г.
UNIPOS Terminal
Руководство инженера
115114, Г. МОСКВА, ДЕРБЕНЕВСКАЯ НАБЕРЕЖНАЯ, ДОМ 7,
СТРОЕНИЕ 2, ПОМЕЩЕНИЕ I, ЭТАЖ 3, КОМНАТА №23
ТЕЛ: +7 495 721-3621
ИНН 7715841318
КПП 772501001UNIPOS Terminal
Руководство инженера
UNIPOS Terminal Руководство инженера. М.: ООО “ПэйЛаб”, <2024>.
ООО «ПэйЛаб» оставляет за собой право производить незначительные изменения
программного обеспечения, касающиеся функциональности и внешнего вида
конфигурационных систем, без внесения изменений в настоящее Руководство без специального
уведомления.
Особенности конкретной версии программного обеспечения приведены в Справочной системе
программы.
Программное обеспечение и настоящий документ не могут быть cкопированы, размножены,
использованы по частям для составления других текстов, переведены на другие языки, если это
не оговорено в письменной форме в договоре на поставку программного обеспечения.
Программное обеспечение, описанное в настоящем Руководстве, поставляется в соответствии с
договором о поставке и может использоваться или копироваться только в соответствии с
условиями этого договора.
Разработчиком программы и правообладателем UNIPOS Terminal (TMS) является OOO
«ПэйЛаб».
UNIPOS Terminal © ООО “ПэйЛаб” 2024
Адрес: 127521, Москва, Октябрьская ул., 72
Телефоны для справок: (495) 721-36-21
Факс: (495) 721-36-21
E-Mail: support@pay-lab.ruСтраница 2
UNIPOS Terminal
Руководство инженера
Оглавление
Введение................................................................................................................................................... 4
Предварительные требования ...............................................................................................................................4
Проверка работоспособности терминала ................................................................................................................5
Общий подход в организации параметров терминального ПО .............................................................................7
Раздел 1 Первоначальная загрузка ПО .................................................................................................... 9
1.1 Общие положения ................................................................................................................................9
1.2 Настройка параметров перед загрузкой ..............................................................................................12
1.3 Загрузка по протоколу ZonTalk с использованием Config Manager ...........................................................14
1.4 Загрузка VeriFone попротоколу ZonTalk без использования Config Manager.............................................19
1.5 Загрузка PAX Monitor Plus попротоколу ZonTalk без использования Config Manager ................................20
1.6 Загрузка VeriFone Engage без использования Config Manager.................................................................20
Раздел 2 Настройка параметров Терминального ПО для загрузки ключей .......................................... 22
2.1 Настройка ячеек мастер ключей...........................................................................................................23
2.2 Создание рабочих ключей..................................................................................................................26
Раздел 3Загрузка ключей в PINpad........................................................................................................... 28
3.1 Подготовка терминала к загрузке ключей........................................................................................28
3.2 Загрузка ключей....................................................................................................................................32
3.3 Проверка загрузки ключей.................................................................................................................35
Раздел 4 Загрузка параметров и обновлений терминального ПО................................................................... 36
4.1 Настройки Config Manager для загрузки ПО ипараметров .......................................................................37
4.2 Настройки в Config Manager для загрузки лицензии........................................................................39
4.3 Первая загрузка параметров ................................................................................................................42
4.4 Настройка параметров соединения ..................................................................................................43
4.5 Загрузка параметров и обновлений ПО............................................................................................88
Раздел 5 Настройки параметров для автоматической загрузки новой версии OS терминала ....................... 92
5.1 Создание и настройка инсталляции операционной системы...................................................................92
5.2 Настройки справочника Терминалы для загрузки OS......................................................................94
Раздел 6 Инициализация терминала .......................................................................................................... 95
Раздел 7 Настройка соединений терминала с сервером авторизации ............................................................. 96
7.1 Настройка Ethernet..............................................................................................................................97
7.2 Настройка Wi-Fi .................................................................................................................................103
7.3 Настройка COM-порта по PPP...........................................................................................................110
7.4 Настройка GSM/GPRS по PPP............................................................................................................117Страница 3
UNIPOS Terminal
Руководство инженера
Раздел 8 Настройкасоединенийтерминала с сервером параметризации........................................................ 125
Раздел 9 Настройка коммуникаций с кассой............................................................................................. 128
Раздел 10 Настройка параметров TLS/SSL .................................................................................................. 131
10.1 Настройка параметров TLS/SSL для эквайринга ..............................................................................131
10.2 Настройка параметров SSL/TLS для хоста параметризации ...............................................................135
Раздел 11 Настройка независимых справочников..................................................................................... 138
11.1 Настройка справочника Валюты......................................................................................................139
11.2 Настройка справочника Платёжные системы ................................................................................142
11.3 Настройка печатных форм ...............................................................................................................150
11.4 Настройка дисконты и комиссии ..........................................................................................................170
11.5 Справочник Типы счетов...................................................................................................................175
11.6 Настройка справочника платежей...................................................................................................178
11.7 Настройка справочника Группы пользователей ............................................................................182
11.8 Настройка справочника Общие установки .....................................................................................183
11.9 Настройка параметров справочника Группы изображений ...................................................................187
11.10 Использование справочника Логи...................................................................................................190
Раздел 12 Настройкасвязанных справочников.......................................................................................... 193
12.1 Настройка параметров справочника Эквайринговыесети.................................................................194
12.2 Настройка параметров справочника Профили терминалов...................................................................199
12.3 Настройка параметров справочника Организации........................................................................210
12.4 Настройка параметров справочника Терминалы ..........................................................................216
Приложение A Возможные проблемы и их решение ............................................................................. 228
Приложение B Описание ошибок приложения..................................................................................... 231
Приложение C Правила форматирования шаблона чека .......................................................................... 275Страница 4
UNIPOS Terminal
Руководство инженера
Введение
Данное руководство пользователя предназначено для персонала, выполняющего
работы по настройке и обслуживанию платежных терминалов компаний
VeriFone и PAX, далее по тексту – пользователи.
Цель данного руководства – помочь обучить пользователей работе с
программным обеспечением (ПО) Unipos Terminal.
В данном руководстве не рассматриваются вопросы эксплуатации платежных
терминалов, для изучения этих вопросов пользователю необходимо обратиться к
документации компаний VeriFone и PAX, поставляемой вместе с этими
терминалами или получить необходимую документацию на сайте этих компаний.
Предварительные требования
Предполагается, что пользователи ПО Unipos Terminal имеют опыт работы с
платежнымитерминаламикомпанийVeriFone и PAX,иимеютзнаниявобласти
вычислительныхсетейиэлектронныхплатежных систем.
Для выполнения работ по настройке и обслуживанию ПО Unipos Terminal
необходимо:
• наличие работоспособного и подключенного к электрической и сети
передачи данных платежного терминала компании VeriFone с
установленной операционной системой Verix; либо платежного
терминала PAX с установленной операционной системой Monitor Plus
или Prolin
• подключенный по COM–порту к терминалу персональный компьютер с
операционной системой Windows /XP/Vista/7/10 и установленной
программой UNIPOS Config Manager.
ПРИМЕЧАНИЕ: Для настройки параметров и загрузки программного обеспечения на
терминал могут использоваться различные конфигурации программы UNIPOS Config
Manager (Station, Client и Server, Download Server и т.д.). В данном документе для описания
выполнения работ по локальной настройке терминала с использованием COM–порта
используется Config Manager Station, а для описания удаленной загрузки ПО используется
DownloadServer.
В состав комплекта поставляемого терминального ПО входит zip–архив с
файлами дистрибутива, загружаемыми на платежный терминал, и
вспомогательные утилиты для работы в командной строке. В состав дистрибутива
входят исполняемые файлы, обеспечивающие выполнение финансовых операций
и административных функций, и файлы параметров, изменяя содержимое
которых администраторнастраиваетпараметрыфинансовыхопераций.
ПРИМЕЧАНИЕ: Программное обеспечение обладает большим количеством настроек,
позволяющих пользователям изменить параметры терминального ПО, поэтому в некоторых
случаях информация, отображаемая на экране терминала может отличаться от указаннойСтраница 5
UNIPOS Terminal
Руководство инженера
впримерах.
Для выполнения административных операций с ПО пользователю необходимо
ознакомиться со следующими документами:
• UNIPOS Config Manager Station Руководство пользователя – в этом документе дано описание инструментов по для настройки параметров и
локальной загрузки ПО и параметров на терминал.
• UNIPOS Config Manager Client Руководство пользователя – в этом
документе дано описание работы с графическим интерфейсом
пользователя и основные действия пользователя при загрузке и
обновлении ПО и параметров на терминале.
• UNIPOS Config Manager Download Server Руководство пользователя – в
этом документе дано описание выполнения удаленной загрузки ПО и
параметров натерминал.
• UNIPOS Config Manager Server Руководство пользователя – в этом
документе дано описание выполнения удаленной загрузки ПО и
параметров на терминал.
Дляудобстваизложенияматериалавдокументеиспользуютсянекоторыеспеци
альные обозначения:
1. Выделенные блоки текста с заголовками ПРИМЕЧАНИЕ и ВНИМАНИЕ:
1. ПРИМЕЧАНИЕ – предоставляет пользователю дополнительную
информацию, описывающую особенности выполнения тех или иных
действий;
2. ВНИМАНИЕ – предупреждает пользователя о возникновении проблем,
которые могут быть вызваны его ошибочными действиями;
2. Выделение текста специальным шрифтом:
1. Наименования элемента интерфейса – данным шрифтом выделяются все
элементы графического интерфейса пользователя, отображаемого на
экрене ПК;
2. НАИМЕНОВАНИЕ ЭЛЕМЕНТОВ МЕНЮ ПОЛЬЗОВАТЕЛЯ – все элементы
меню, которые отображаются на экране POS терминала отображаются
заглавными буквами;
3. Вводимые данные – данным шрифтом выделяется текст данных,
которые пользователь вводит на клавиатуре ПК;
4. Наименования документов – названия документов, на которые даются
ссылки в настоящем руководстве инженера.
Проверка работоспособности терминала
В терминалах V5, Vx5xx, Vx6хх, Vx8xx имеется встроенная система контроля
работоспособности компонентов терминала. Вызов программ диагностики
производится с помощью системного меню Diagnostics.
Доступны следующие виды проверок:Страница 6
UNIPOS Terminal
Руководство инженера
1. Диагностика принтера;
2. Диагностика клавиатуры;
3. Диагностика магнитногосчитывателя;
4. Диагностика экрана;
5. Диагностика внутреннего PIN pad;
6. Диагностика чипового и бесконтактного считывателя;
7. Проверка профилямодема;
В терминалах PAX Prolin так же имеет встроенная система контроля
работоспособности компонентов терминала. Вызов программ диагностики
производится с помощью системного меню Module Test.
Доступны следующие виды проверок:
1. Диагностика считывателя карт (магнитный, чиповый и
бесконтактный);
2. Диагностика коммуникаций;
3. Диагностика пользовательского интерфейса (монитор, принтер,
клавиатура и динамик);
Для открытия системного меню и выполнения проверки выполните действия,
описанные в соответствующих разделах руководства пользователя,
поставляемогосиспользуемоймодельюPOSтерминала.
ПРИМЕЧАНИЕ: Номера команд системного меню могут отличаться от указанных в данном
разделе. В зависимости от версии Операционной системы установленной на терминале.
Для корректной работы ПО UNIPOS Terminal на терминалах должны быть
установлены следующие минимальные версии ОС (см. таблицы ниже):
Таблица№ 1 Необходимые версии операционной системы Verix
№ п/п Модель терминала Версия ОС
1 Vx520 QT000530
2 Vx520С QT000530
3 Vx675 QT000530
4 Vx680 QT000530
5 Vx805 QT000530
6 Vx820 QT000530
7 1000SEV3 QT100291 (AQUILA 6.4.4.1)
Таблица№ 2 Необходимые версии операционной системы для терминалов Engage
№ п/п Модель терминала Версия ОС
1 P200 30810500
2 P400 30810500Страница 7
UNIPOS Terminal
Руководство инженера
3 V200C 30810500
4 V200T 30810500
5 V205C 30810500
6 V240M 30810500
Таблица № 3 Необходимые версии операционной системы для терминалов PAX
№ п/п Модель терминала Версия ОС
1 D190 Prolin 2.7.38
2 D200 Prolin 2.4.141
3 D210E Monitor Plus 3.49
4 S80 Monitor Plus 3.75
5 S90 Monitor Plus 3.75
6 S200 3.10/ 1.00.07
7 S300 Monitor Plus 3.49/ Prolin 2.4.141
8 S800 Monitor Plus 3.49/ Prolin 2.4.141
9 S900 Monitor Plus 3.49/ Prolin 2.4.141
10 S920 Prolin 2.4.141
11 SP 20 V4 Type C 4.00 RU
12 SP 20 V4 Type B 4.08/ 1.01.05
13 SP30 Monitor Plus 3.75
14 Q20 Prolin 2.7.38
15 Q80 Prolin 2.6.56
16 IM20 Prolin 2.7.38
17 IM300 Prolin 2.6.56
18 Px7 Prolin 2.5.16
Общий подход в организации параметров терминального ПО
Прежде чем начинать настройки параметров необходимо понять, как
организована структура этих параметров, отображаемая при их настройке. Ниже
дано краткое описание идеологии, заложенной в организацию параметров
программы UNIPOS Terminal для обеспечения их быстрой и качественной
настройкинабольшом количестве POS терминалов с учетом особенностей каждой
точки продажи.
Все параметры организованы в виде справочников. Справочники имеют
многоуровневую структуру, элементы справочников нижележащего уровня могут
входить в состав элементов справочников вышележащего уровня. КаждыйСтраница 8
UNIPOS Terminal
Руководство инженера
справочник состоит из элементов. Элемент справочника представляет собой
объект, состоящий из набора параметров, и может включать в себя элементы
других справочников. Параметры, входящие в состав элемента справочника,
могутбыть организованы в виде сложной многоуровневой структуры.
В самом общем виде справочники можно разбить на 3 уровня:
1. Наивысший уровень имеет только один справочник – Терминалы. В
качестве элементов этот справочник содержит полные комплекты
настроек для различных терминалов.
2. Промежуточный уровень. Элементы этих справочников имеют в своем
составе,какнаборпараметров,такиэлементы других справочников.
3. Нижний уровень. Элементы этих справочников имеют в своем составе
только набор параметров, и не содержат элементов других справочников.
При этом такие справочники могут быть организованы в виде сложной
структуры,состоящейизподчиненныхсправочниковииметьнесколько
уровней вложенности.
Справочники могут состоять как из набора однотипных элементов, так и из
нескольких наборов элементов различного типа, организованных в виде папок.
При настройке параметров какого–либо терминала важно понимать, что
перед установкой тех или иных значений в справочнике Терминалы и
справочниках промежуточного уровня, необходимо заранее установить
значения параметров для элементов справочников нижележащих уровней,
элементы которых будут необходимы для настройки справочников
вышележащего уровня. При этом, до тех пор, пока какие–либо элементы
справочников нижележащего уровня не будут задействованы в элементах
справочника Терминалы, их установка не является обязательной.
Для осуществления настройки параметров предназначена специальная
программа с графическим интерфейсом Config Manager, имеющая различные
варианты реализации (рабочая станция, клиент – сервер) и дополнительные
программы для обеспечения автоматической загрузки ПО и парметров на
терминалы. Порядок работы с этими программами изложен в соответствующих
руководствах пользователя.
Вданномдокументе,померевозможности,сначалабудетописыватьсяпорядок
настройки справочников нижележащего уровня, а потом будет даваться описание
настроек параметров справочников более высокого уровня.Страница 9
UNIPOS Terminal
Руководство инженера
Раздел 1 Первоначальная загрузка ПО
Программное обеспечение (ПО) для платежных терминалов разработано таким
образом, чтобы предоставить пользователям возможность его детальной
настройки. Настройка терминала осуществляется путем изменения содержимого
файлов с параметрами, загружаемых на терминал. Часть из этих настроек
должны быть подготовлены до начала первой загрузки на терминал. Без этих
настроек терминал не будет работать. Остальные настройки могут быть
измененывходеработы терминала.
Первичная загрузка ПО и параметров осуществляется с использованием
программы Config Manager Station1 с использованием интерфейса
последовательной передачи данных RS-232 и протокола передачи данных ZonTalk.
В дальнейшем для загрузки параметров можно использовать как Config
Manager Station с использованием интерфейса последовательной передачи
данных RS-232 и протокола передачи данных SA, так и удаленную загрузку
параметровпосетисиспользованием Download Server.
Дляоблегченияработыадминистраторав комплектестерминальнымПОпредо
ставляется база данных с типовыми настройками, которые разработаны исходя
из наиболее распространенных вариантов использования платежных
терминалов. Администратору достаточно лишь внести необходимые изменения,
исходя из особенностей использования того или иного терминала. В случае
необходимости администратор терминала может создать необходимую базу
данных параметров с нуля. Перед началом первичной загрузки ПО на терминал,
должны быть выполнены настройки протокола передачи данных, подготовлен
загружаемый дистрибутив ПО и настроены параметры для загрузки ключей. Для
этого необходимо открыть программу Config Manager Station, подключить базу
данных с настраиваемыми параметрами и выполнить действия, описанные ниже.
1.1 Общие положения
Инсталляционный пакет терминального ПО представляет собой zip архив,
содержащий в себе исполняемые модули ПО, файлы ресурсов, шрифты,
графические логотипы, и другие вспомогательные файлы.
В состав инсталляционного пакета входят следующие компоненты:
• KeyInstaller – программа ввода ключей в PIN pad и скриптовую область
терминала. Существует альтернативная схема загрузки ключей с
использованием special kit.
• Unipos Terminal – приложение по обслуживанию международных и локальных платёжных систем, а также функционал по загрузке программного обеспечения и параметров.
1. Линейка ПО для настройки и обслуживания POS терминалов постоянно обновляется и на настоящий момент
для настройки и обслуживания используются как Config Manager Station, так и Config Manager Client совместно с
Config Manager Server. В дальнйшем для выполнения данных функций может быть дополнительно созданы другие
варианты ПО. Однако, данные программы имеют единый графический интерфейс, что позоволяет легко перейтиСтраница 13
UNIPOS Terminal
Руководство инженера
на использование нового ПО для настройки и обслуживание POS терминалов, а также все файлы, создаваемые для
загрузки ПО и параметров на терминалы идентичны, как и структуры используемых баз данных.Страница 12
UNIPOS Terminal
Руководство инженера
При первоначальной загрузке в терминал загружаются все компоненты ПО и
параметров. После окончания загрузки на терминале стартует приложение
KeyInstaller. После ввода ключей в PIN pad и крипто-модуль (SAM или
скриптовая область) приложение KeyInstaller при необходимости может быть
удалено из терминала.
В завершении запускается приложение UNIPOS Terminal, которое полностью
готово к работе. Доступ к оставшимся приложениям производится из
соответствующегоменюприложениеUNIPOSTerminal.
1.2 Настройка параметров перед загрузкой
До начала выполнения процедуры загрузки ПО и параметров на терминал
должны быть выполнены следующие настройки:
Шаги:
1. Параметры инсталляционного пакета. Для их установки необходимо:
a. открыть справочник Инсталляции ПО нажав кнопку Инсталляции ПО на
панели со списком справочников и убедиться, что в папке Инсталляции ПО
присутствует необходимый для установки пакет;
b. в том случае, если необходимый пакет для загрузки не создан, необходимо
щелкнуть правой кнопкой мыши на папке Инсталляции ПО и в раскрывшемся
списке контекстного меню выбрать команду Добавить 'Инсталляция';
c. в открывшемся окне Создание: 'Инсталляция' необходимо ввести
наименование пакета и нажать кнопку ОК;
d. после создания нового пакета инсталляции на панели Инсталляции ПО в
папке Инсталляции ПО появится новый пакет, а в правой части окна
отобразится таблица с параметрами для этого пакета.
Заполнение полей необходимо производить в следующем порядке: сначала
заполняется поле Имя файла. Во время заполнения этого поля будут
автоматически заполнены поля: Для моделей, Продукт, Версия и Дата изменения.
Затем, в случаенеобходимости, заполнить поле Дополнительное описание.Страница 13
UNIPOS Terminal
Руководство инженера
Рисунок 1 Создание новойинсталляции
Назначение полей:
Наименование–вполеотображаетсянаименованиепакета,введенное
ранее в окне Создание: 'Инсталляция'. При необходимости можно
изменить этоназвание;
Для моделей – в этом поле отображается наименование модели терми
нала, для которой предназначен пакет инсталляционного ПО.
Данное полезаполняетсяавтоматическивовремязаполненияполя
Имя файла;
Продукт – в этом поле отображается список программных продук
тов, которые можно установить на платежный терминал.Данное
поле заполняетсяавтоматическивовремя заполненияполяИмя фай
ла;
Версия – в этом поле отображается номер версии терминального ПО.
Данное поле заполняетсяавтоматическивовремязаполненияполя
Имя файла;
Имя файла – при выборе данного поля в правой его части появится
кнопка с многоточием, после нажатия на которую, откроется окно
Файлы в БД (см. рис. 2)1. В этом окне необходимо нажать кнопку
Добавить и в открывшемся окне Открытие выбрать zip–файл с
инсталляционным пакетом;
Дата изменения – в данном поле отображается дата заполнения поля
Имя файла и связанных с ним полей. Данное поле заполняется
автоматическивовремязаполненияполяИмяфайла;
Дополнительное описание – в этом поле можно ввести текст с
пояснениями для данного пакета.
Рисунок2 Добавлениезагружаемых дистрибутивов
2. Параметры терминала.ДляихустановкинеобходимовыполнитьследующиеСтраница 14
UNIPOS Terminal
Руководство инженера
действия:
a. в списке справочников выбрать справочник Терминалы, в справочнике открыть
папку Терминалы и выбрать необходимый терминал, после чего в правой части
окна программы отобразится таблица параметров данного терминала (см. рис.
3);
b. для первой загрузки терминала обязательно должны быть указаны следующие
параметры:
Идентификатор терминала – в этом поле необходимо на клавиатуре
набрать идентификатор терминала. Рекомендуется в качестве
идентификатора использовать номер терминала;
Модель терминала – при выборе данного поля в правой его части
появится стрелка, после нажатия на которую, раскроется список
моделей платежных терминалов, на которые можно установить
ПО.В списке необходимо выбрать модель терминала;
Загружать ПО в терминал – при выборе данного поля в правой его
части появится стрелка, после нажатия на которую, раскроется
список,состоящийиззначений,ДаиНет.НеобходимовыбратьДа;
Рисунок3 ЗаполнениепараметроввсправочникеТерминалы
Инсталляционный пакет – при выборе данного поля в правой его
части появится кнопка со стрелкой, после нажатия на которую,
раскроется список инсталляционных пакетов. В списке
необходимо выбрать инсталляционный пакет.
Версия ПО – в данном поле отображается текущая версия ПО
установленная на терминале. При условии, если в выбранный
терминал уже установленно ПО. В противном случае данное
поле будет пустым.
Дата-время загрузки ПО – в данному поле отображается дата и
время, когда было произведена загрузка ПО в выбранный
терминал. При условии, если в выбранный терминал уже
установленно ПО. В противном случае данное поле будет
пустым.
1.3 Загрузка по протоколу ZonTalk с использованием
Config Manager
В том случае, если у пользователя имеется программа Config Manager Station
(ConfigManagerClient)онможетпроизвестиначальнуюзагрузкуПОнатерминал
с использованием этих приложений с графическим интерфейсом пользователя.Страница 15
UNIPOS Terminal
Руководство инженера
ПРИМЕЧАНИЕ: Необходимо помнить, что в случае использования программы Config Manager
Client, она должна быть подключена к базе данных с параметрами с использованием
программы Config Manager Server.
1. Подробное описание работы с окном Файлы в БД дано в Руководстве пользователя на Config Manager StationСтраница 16
UNIPOS Terminal
Руководство инженера
Перед выполнением:
Перед началом загрузки проверить, что выполнены следующие условия:
• ТерминалподключенклокальномуПКкабелемRS232черезCOMпорт.
• Настроены протокол и канал передачи данных для загрузки ПО и
параметров натерминал.
Шаги:
1. Для настройки параметров передачи данных на терминал необходимо
выполнить следующиедействия1:
a. В списке справочников выбрать справочник Терминалы, в справочнике открыть
папку Терминалы и выбрать необходимый терминал, после чего в правой части
окна программы отобразится таблица параметров данного терминала (см. рис.
4);
b. На панели инструментов главного окна программы нажать кнопку Параметры
публикации (символ шестеренки, действие 3);
c. В открывшемся окне Параметры публикации на вкладке Загрузкаустановить
следующие параметры:
Порт COM – установить номер порта (выбрать значение из
раскрывающегося списка), к которому подключен платежный терминал;
Скорость – установить скорость передачи для COM порта (выбрать
значение из раскрывающегося списка);
Протоколзагрузки–установитьпротоколZontalk;
Рисунок4 Настройка параметровRS–232
d. В случае необходимости можно изменить параметры протокола Zontalk, однако
лучше использовать установки по умолчанию (см. рис. 5);Страница 17
UNIPOS Terminal
Руководство инженера
Рисунок5 НастройкапараметровпротоколаZonTalk
2. После установкивсех начальных условийможно начинатьзагрузку ПОи
параметров на терминал. Для загрузки необходимо выполнить следующие
действия (см. рис. 6):
a. В приложении Config Manager Station выделить терминал или терминалы и
нажать кнопку Загрузить.
b. На терминале необходимо войти в меню операционной системы и
инициировать загрузку ПО.
Рисунок6 ПроцедуразагрузкиПОипараметровнатерминал
a. Во время загрузки на экране терминала будет отображаться информация о
загружаемых файлах и загруженный на текущий момент объем ПО в
процентах. После окончания установки на экране терминала отобразится меню,
а на экране монитора ПК в окне Загрузка терминала появится сообщение об
успешном окончании загрузки.Страница 18
UNIPOS Terminal
Руководство инженера
1. Настройка параметров в окне Параметры публикации подробно рассмотрена в руководстве пользователя н а
Config Manager StationСтраница 19
UNIPOS Terminal
Руководство инженера
Рисунок 7 Отчет о ходе загрузки
b. После окончания загрузки ПО на терминал он перезагружается автоматически.
После перезагрузки будет произведена верификация загруженных в терминал
файлов и запущено приложение KeyInstaller. После этого можно приступать к
загрузке ключей на терминал.
1.4 Загрузка VeriFone по протоколу ZonTalk без
использования Config Manager
В том случае, если у пользователя нет программы Config Manager Station
(Config Manager Client) он может произвести начальную загрузку ПО на
терминал из командной строки с использованием поставляемой для этого
утилиты ddl.exe.
ПРИМЕЧАНИЕ: Для обеспечения процесса загрузки терминальногоПО с ПК на POSтерминал
создается специальный *.bat файл, в котором прописываются параметры загрузки,
набираемые в командной строке. Это избавляет пользователей от необходимости
дополнительного изучения системы команд операционной системы терминала и упрощает
процесс загрузки терминального ПО.
Перед выполнением:
Перед началом загрузки проверить, что выполнены следующие условия:
• ТерминалподключенклокальномуПКкабелемRS232черезCOMпорт.
• Вдистрибутивномкомплектепоставляетсяпарафайлов:*.batи*.zip.
Шаги:
1. Убедитсячтов*.batфайлевпараметре«–р»прописанCOMпортккоторому
подключен терминал (см. рис. 8).Страница 20
UNIPOS Terminal
Руководство инженера
Рисунок 8 Содержимое *.batфайла
2. Запустить *.batфайл.
Рисунок9 ПроцессзагрузкитерминальногоПОвкоманднойстроке
По окончанию загрузки требуется загрузка ключей и параметров.
1.5 Загрузка PAX Monitor Plus по протоколу ZonTalk без
использования Config Manager
В том случае, если у пользователя нет программы Config Manager Station
(Config Manager Client) он может произвести начальную загрузку ПО на
терминал из командной строки с использованием поставляемой для этого
утилиты PAX Ddl.exe.
Инструкция по загрузке PAX Monitor Plus описана в документе «Загрузка
утилитой PAX DDL».
Загрузка утилитой
PAX DDL.PDF
1.6 Загрузка VeriFone Engage без использования Config
Manager
В том случае, если у пользователя нет программы Config Manager Station
(Config Manager Client) он может произвести начальную загрузку ПО на
терминал с использованием утилиты «MX800Downloader».
Информацию по использованию утилиты «MX800Downloader» можно
посмотреть в документе «Инструкция по загрузке терминалов Engage.pdf».Страница 21
UNIPOS Terminal
Руководство инженераСтраница 22
UNIPOS Terminal
Руководство инженера
Раздел 2 Настройка параметров
Терминального ПО для загрузки
ключей
Программное обеспечение, разработанное для POS терминалов, позволяет
использовать как статическую, так и динамическую схемы работы с
ключами. Ключи могут загружаться как во внутренние ячейки памяти для
ключей криптования платежного терминала, так и в аналогичные ячейки
памяти внешнего PIN pad. Однако необходимо учитывать, что внешний PIN
pad, как, впрочем, и старые модели POS терминалов, является технически
более простым устройством (за исключением отдельных моделей
интеллектуальных PIN pad) и имеет ограниченные функциональные
возможности по работе с ключами по сравнению с платежным терминалом.
Как старые модели POS терминала, так и обычный PIN pad, хранят по десять
ячеек памяти для ключей криптования и по одной ячейке памяти для KLK
ключей, позволяющих реализовать динамическую схему работы с ключами.
Эти особенности будут отмечены далее при детальном описании работы с
ключами.
В терминальном программном обеспечении реализована работа с тремя
ключами:
1. Сессионный ключ – данный ключ используется для шифрования и
расшифровки данных, передаваемых терминалом и получаемых
терминаломво времявыполненияфинансовыхопераций.Данныйключ
получается путем комбинации мастер ключа и рабочего ключа и
существует только во время работытерминала.
2. Мастер ключ – данный ключ используется совместно с рабочим ключом
длясозданиясессионногоключа.Данныеключихранятсявспециальных
ячейках памяти для ключей криптования платежного терминала и/или
внешнего PINpad.
3. Рабочийключ–данныйключиспользуетсясовместносмастерключомдля
создания сессионного ключа. Данный ключ хранится в обычной памяти
платежного терминала.
Зачастую, платежному терминалу может понадобиться взаимодействовать с
различными процессинговыми центрами, к тому же один и тот же терминал
может одновременно использовать несколько организаций. Каждый
процессинговый центр будет работать со своими рабочими ключами и, возможно,
различные процессинговые центры будут использовать различные эквайринговые
сети. Организации, одновременно использующие терминал, могут использовать
свои наборы ключей,для повышения безопасности расчетов. Длярешения этой
проблемы в системе параметров терминального ПО реализованы виртуальные
PIN pad. При проведении финансовой транзакции платежный терминал может
взаимодействовать только с одним процессинговым центром и представлять
только одну организацию. И в зависимости от того, с каким процессинговым
центром идет работа в текущий момент и какая организация использует
терминал, будут выбираться параметры того или иного виртуального PIN padСтраница 23
UNIPOS Terminal
Руководство инженера
(тип эквайринговой сети, профильмастерключейизначениярабочихключей).
Чтобы использовать ключи шифрования, необходимо задать ряд параметров в
терминальном ПО. В первую очередь необходимо задать схему загрузки
ключей: статическую или динамическую. Далее для выбранной схемы
загрузки ключей необходимо задать ряд параметров (ячейки для хранения
ключей, значения рабочих ключей и т.д.). Часть настроек параметров будут
аналогичны как для статической, так и для динамической схемы, при этом
настройка параметров для статической схемы является более сложной и
объемной. В данном разделе будет подробно рассмотрены настройки для
статической схемы, а затем даны особенности настройки параметров для
динамической схемы.
В Unipos Terminal для хранения ключей используется VSS скриптовая область
или SAM модуль. При использовании SAM модуля рабочие ключи POS
терминала и приложение KeyInastaller находятся на SAM модуле. При
использовании VSS скриптовой области значение рабочих ключей POS
терминала вводятся с его клавиатуры, под управлением приложения
KeyInstaller, которое загружается при первоначальной загрузке в составе
дистрибутива терминального ПО.
Загрузка ключей на POS терминал с использованием VSS скриптовой области
состоит из следующих этапов:
1. до начала загрузки ПО и параметров на терминал задается номер слота МК
для мастера ключа и сохраняются значения рабочих ключей в базе
данных с использованием программы Config Manager;
2. после окончания загрузки ПО и параметров на терминал запускается
утилита KeyInstaller, с помощью которой вводятся значения мастер–
ключей с помощью клавиатуры терминала в ячейки, заданные ранее в
программе Config Manager.
ПРИМЕЧАНИЕ:втомслучае,когдаПОнаPOSтерминалзагружаетсявкоманднойстроке,
загрузка параметров не производится, поэтому в этом случае, сначала необходимо
загрузить параметры на терминал, а затем ввести значения рабочих ключей.
Послетого,какрабочиеключибудутзагруженынеобходимоперезапуститьPOS
терминал и убедиться, что терминальное ПО работает корректно.
2.1 Настройка ячеек мастер ключей
Значения мастер ключей вводятся либо непосредственно с клавиатуры
платежного терминала в соответствующую ячейку памяти для ключей
криптования, либо располагаются на SAM модуле, который устанавливается в
соответствующий слоте терминала. В любом случае перед вводом ключей в
параметрах платежного терминала должны быть заданы ячейки памяти для
ключейкриптованиявкоторых будутхранитьсязначениязагружаемыхключей
итипыключей,значениякоторыхбудутхранитьсявэтихячейках.
Для создания нового наборамастер–ключейнеобходимо выполнить следующие
действия:Страница 24
UNIPOS Terminal
Руководство инженера
Шаги:
1. Выбрать профиль ключей, если необходимого профиля нет, тогда создать
новый профиль (см. рис. 10).
Рисунок 10 Создание нового профиля
Для создания нового профиля необходимо выполнить следующие действия:
a. щелкнуть правой кнопкой мыши на папке Профили ключей;
b. в контекстном меню выбрать Добавить «Профиль»;
c. в окне Создание: Профиль мастер ключей ввести наименование нового
профиля и нажатькнопку ОК.
После этого на панели Профили ключей появится новый профиль.
2. В выбранном (созданном) профиле создать необходимые ячейки для хранения
ключей (см. рис. 11).
Рисунок11 Добавлениеключа
Для создания новой ячейки ключа необходимо выполнить следующие действия:
a. в выбранном профиле щелкнуть правой кнопкой мыши на папке Ключи;
b. в контекстном меню выбрать Добавить 'Ключи';
c. в появившейся панели Общие в поле Назначение ключа в раскрывающемся
списке выбрать необходимый тип ключа, а в поле Номер слота МК задать
значение номера ячейки.
ПРИМЕЧАНИЕ:Номерячейкимастерключаможетнаходитьсявдиапазонеот0до9.Страница 25
UNIPOS Terminal
Руководство инженераСтраница 26
UNIPOS Terminal
Руководство инженера
Результат:
Для каждого профиля ключей могут быть созданы ячейки для четырех типов
ключей: TPMK, TOPMK, TAMK и TEMK (см. рис.12).
Рисунок12 Ячейкидлячетырехтиповключей
2.2 Создание рабочих ключей
Для создания рабочего ключа необходимо выполнить следующие действия (см.
рис.13):
Рисунок13 Порядоксозданиярабочих ключей
Шаги:
1. На панели Терминалы щелкнуть правой кнопкой мыши на папке Рабочие
ключи.
2. Выбрать Добавить «Ключи».
3. В открывшейся панели Общие выбрать значение из раскрывающегося списка
для поля Назначение ключа.
4. в поле Значение WK ввести значение ключа.
5. Данную операцию необходимо выполнить для каждого типа рабочего ключа.
Результат:
После выполнения операций по созданию рабочих ключей появится комплект
рабочих ключей (см.рис.14).Страница 27
UNIPOS Terminal
Руководство инженера
Рисунок14 Настройкирабочихключей
ПРИМЕЧАНИЕ: В том случае, если используется динамическая схема работы с ключами, значениярабочихключейвводитьнеобязательно.Страница 28
UNIPOS Terminal
Руководство инженера
Раздел 3 Загрузка ключей в PINpad
В соответствии с требованиями по безопасности проведения финансовых и
административных операций терминальное ПО выполняет передачу всех или
отдельных данных в зашифрованном виде. Для выполнения закрытия
передаваемых данных используются ключи шифрования, для обеспечения
безопасного ввода которых в PIN pad используется специальная процедура
загрузкиключей.
Для загрузки ключей в платежный терминал используется специальная
утилита – KeyInstaller, которая входит в состав инсталляционного пакета и
загружаетсявпамятьплатежноготерминаланаэтапепервоначальнойзагрузки.
В данной главе рассматриваются все варианты загрузки ключей с
использованием этой утилиты.
В общем виде, длявыполнения процедуры первичной загрузки ключей должны
быть выполнены следующие действия:
1. Произведена первичная загрузка дистрибутива терминального ПО, в
составе которого должна быть утилита KeyInstaller.
2. В программе Config Manager определены номера ячеек для мастер-ключей
и введены значения рабочих ключей.
3. Выполнена подготовка терминала к загрузке ключей (удаление старых
ключей и настройка параметров загрузки ключей).
4. Произведена загрузка ключей в PIN pad (внутренний и/или внешний) в
соответствии со схемой загрузки(статической или динамической).
В ходе дальнейшей эксплуатации платежного терминала может быть произведена
загрузка новых ключей в PIN pad. Технология загрузки ключей в этом случае
будет аналогичной первичной загрузке. Отличия будут заключаться в том, что
объем выполняемых операций будет меньше (не будет выполняться
первичная загрузка дистрибутива и может быть меньший объем настроек
параметров).
3.1 Подготовка терминала к загрузке ключей
Перед тем, как начать загрузку ключей в PIN pad, должны быть выполнены
предварительные действия. В первую очередь необходимо убедиться, что
версия операционной системы терминала не ниже минимально необходимой
(см. подраздел Проверка работоспособности терминала). Для подготовки
платежного терминала к загрузке ключей необходимо выполнить следующие
действия:
Шаги:
1. При использовании внешнего PIN pad подключить его к терминалу.
2. При необходимости удалить старые ключи из терминала.
3. На терминале в приложении KeyInstaller, в случае необходимости,
отредактировать параметры ввода ключей.Страница 29
UNIPOS Terminal
Руководство инженера
3.1.1 Удаление ключей
Перед загрузкой новых ключей необходимо удалить старые.
Предварительные условия:
ДляудаленияключейдолжнабытьзапущенаутилитаKeyInstaller.
ПРИМЕЧАНИЕ: После выполнения первичной загрузки ПО утилита KeyInstaller запускается
автоматически.
Шаги:
1. Выбрать пункт меню – УДАЛЕНИЕ КЛЮЧЕЙ.
2. ВыбратьвменютипPINpad,откудаудаляются
ключи. Например, ВНУТРЕННИЙПИНПАД.
Результат:
Последовательно на экране терминала отображаются сообщения о процессе
удаленияключей.
1. В случае удачного удаления выводится
сообщение КЛЮЧИ УСПЕШНОУДАЛЕНЫ.
2. В случае, если связь с внешним PIN pad
потеряна, в течении нескольких секунд
отображается сообщение ОШИБКА
УДАЛЕНИЯ КЛЮЧЕЙ.
KEY INSTALLER 1.0
1 ЗАГРУЗКА КЛЮЧЕЙ
2 УДАЛЕНИЕ КЛЮЧЕЙ
3 ПОИСК ПИНПАДОВ
4 ПАРАМЕТРЫ
5 УДАЛИТЬ ПРИЛОЖЕН.
УДАЛЕНИЕ КЛЮЧЕЙ
1 ВНЕШНИЙ ПИНПАД
2 ВНУТРЕННИЙ ПИНПАДСтраница 30
UNIPOS Terminal
Руководство инженера
3.1.2 Редактирование и печать параметров ввода ключей
До начала проведения процедуры загрузки ключей на терминал необходимо
проверить и в случае необходимости отредактировать на терминале параметры
ввода ключей.
Предварительные условия:
Для редактирования параметров должна быть запущена утилита KeyInstaller.
ПРИМЕЧАНИЕ: После выполнения первичной загрузки ПО утилита KeyInstaller запускается
автоматически.
Шаги:
1. Войти в режим редактирования параметров.
a. Для редактирования параметров загрузки ключей
выбрать пункт меню ПАРАМЕТРЫ.
b. Выбрать пункт меню РЕДАКТИРОВАНИЕ.
2. Проверить и отредактировать число компонент.
a. Выбрать пункт меню ЧИСЛО КОМПОНЕНТ.
b. Ввести число компонент вводимого ключа. По
умолчанию - 2. Допустимые значения: 2, 3.
3. Проверить и отредактировать режим ввода ключа.
KEY INSTALLER 1.0
1 ЗАГРУЗКА КЛЮЧЕЙ
2 УДАЛЕНИЕ КЛЮЧЕЙ
3 ПОИСК ПИНПАДОВ
4 ПАРАМЕТРЫ
5 УДАЛИТЬ ПРИЛОЖ.
ПАРАМЕТРЫ
1 РЕДАКТИРОВАНИЕ
2 ПЕЧАТЬ
РЕДАКТИРОВАНИЕ
1 ЧИСЛО КОМПОНЕНТ
2 РЕЖИМ ВВОДА КЛЮЧА
3 ПРОВЕРКА ВВОДА
4 АЛГОРИТМ
5 ТИП КРИПТОМОДУЛЯ
ЧИСЛО КОМПОНЕНТ
1 2
2 3
РЕДАКТИРОВАНИЕ
1 ЧИСЛО КОМПОНЕНТ
2 РЕЖИМ ВВОДА КЛЮЧА
3 ПРОВЕРКА ВВОДА
4 АЛГОРИТМ
5 ТИП КРИПТОМОДУЛЯСтраница 31
UNIPOS Terminal
Руководство инженера
a. Выбрать пункт меню РЕЖИМ ВВОДА КЛЮЧА.
b. Выбрать режим ввода ключа. По умолчанию
выставлен режим - открытый. т.е. отсутствует
скрытие вводимых данных ключа символом «*».
4. Установить, каким образом будет осуществляться
проверка вводаключа.
a. Выбрать пункт меню ПРОВЕРКА ВВОДА.
b. Выбрать режим проверки ввода ключа. По
умолчанию выставлен режим ― Подтверждение
контрольной суммы.
5. Установить, каким образом будет осуществляться
алгоритм шифрования.
a. Выбрать пункт меню АЛГОРИТМ.
b. Выбрать режим шифрования. По умолчанию
выставлен режим ― 3DES_16. Допустимые
значения: DES, 3DES_16.
6. Установить, каким образом будет храниться
рабочие ключи.
a. Выбрать пункт меню ТИП КРИПТОМОДУЛЯ.
b. Выбрать образ хранения Местер ключа. По
РЕЖИМ ВВОДА КЛЮЧА
1 ОТКРЫТЫЙ
2 ЗАКРЫТЫЙ
РЕДАКТИРОВАНИЕ
1 ЧИСЛО КОМПОНЕНТ
2 РЕЖИМ ВВОДА КЛЮЧА
3 ПРОВЕРКА ВВОДА
4 АЛГОРИТМ
5 ТИП КРИПТОМОДУЛЯ
ПРОВЕРКА ВВОДА
1 ПОВТОРНЫЙ ВВОД
2 ВВОД КОНТР. СУММЫ
3 ПОДТВ. КОНТР. СУММЫ
РЕДАКТИРОВАНИЕ
1 ЧИСЛО КОМПОНЕНТ
2 РЕЖИМ ВВОДА КЛЮЧА
3 ПРОВЕРКА ВВОДА
4 АЛГОРИТМ
5 ТИП КРИПТОМОДУЛЯ
АЛГОРИТМ
1 DES
2 3DES_16
РЕДАКТИРОВАНИЕ
1 ЧИСЛО КОМПОНЕНТ
2 РЕЖИМ ВВОДА КЛЮЧА
3 ПРОВЕРКА ВВОДА
4 АЛГОРИТМ
5 ТИП КРИПТОМОДУЛЯ
ТИП КРИПТОМОДУЛЯ
1 SAM
2 VSSСтраница 32
UNIPOS Terminal
Руководство инженера
умолчанию выставлен режим ― VSS.
Допустимые значения: SAM, VSS.Страница 32
UNIPOS Terminal
Руководство инженера
7. Распечатать текущие параметры ПО KeyInstaller.
По выбору пункта меню ПЕЧАТЬ параметры ПО
Keyinstallerпечатаютсянапринтеретерминала.
Результат:
Пример печати чека параметров приложения показан
нарис.15.
Рисунок15 Чекс параметрами приложения
3.2 Загрузка ключей
Платежныйтерминалможетработатькаксостатической,такисдинамической
схемами загрузки ключей. Для каждой схемы необходимо выполнить
соответствующие процедуры загрузки ключей.
3.2.1 Загрузка Мастер ключа. Ручной режим
Ручной режим загрузки мастер ключей позволяет ввести значения ключей
непосредственнонатерминале.Процедуразагрузкидолжнабытьвыполненадля
каждого ключа.
Предварительные условия:
Перед началом загрузки должна быть запущена
утилита KeyInstaller.
В главном меню утилиты необходимо выбрать
пункт ЗАГРУЗКА КЛЮЧЕЙ и нажать клавишу
Enter.
Шаги:
1. Выбрать в окне Ручной режим для ввода МК.
ПАРАМЕТРЫ
1 РЕДАКТИРОВАНИЕ
2 ПЕЧАТЬ
KEY INSTALLER 1.0
1 ЗАГРУЗКА КЛЮЧЕЙ
2 УДАЛЕНИЕ КЛЮЧЕЙ
3 ПОИСК ПИНПАДОВ
4 ПАРАМЕТРЫ
5 УДАЛИТЬ ПРИЛОЖЕН.
KEY INSTALLER 1.0
1 РУЧНОЙ РЕЖИМ
2 ПО СОМ-ПОРТУСтраница 33
UNIPOS Terminal
Руководство инженера
2. В том случае, если внешний PIN pad не
подключен, в окне ЗАГРУЗКА КЛЮЧЕЙ, нужно
выбрать АППАРАТНЫЙ ПИНПАД или
ВИРТУАЛЬНЫЙ ПИНПАД (если таковой
имеется) инажать клавишу Enter. В том случае,
если подключен внешний PIN pad, в
открывшемся меню необходимо выбрать тот PIN
pad (ВНЕШНИЙ ПИНПАД), в который будет
производиться загрузка ключей.
3. Выбрать в окне ВЫБОР ТИПА КЛЮЧА значение
МАСТЕР КЛЮЧ и нажать клавишу Enter.
4. Ввести номер ячейки для ключа, совпадающий
со значением Номер слота МК заданным в
парамет рах терминала в приложении Config
Manager Station. Допустимо значение от 0 до 9
(Например, значение 0).
5. Ввести значение первой компоненты ключа,
длинной 32 символа и нажать клавишу Enter.
6. Проверить корректность введённой компоненты
ключа по контрольной сумме. Подтвердить
нажатием клавиши Enter в случае совпадения.
7. Ввести значение второй компоненты ключа,
длинной 32 символа и нажать клавишу Enter.
8. Проверить корректность введённой компоненты
ключа по контрольной сумме. Подтвердитьнажатием клавиши Enter в случае совпадения.
ЗАГРУЗКА КЛЮЧЕЙ
1 ВНЕШНИЙ ПИНПАД
2 АППАРАТНЫЙ ПИНПАД
ВЫБОР ТИПА КЛЮЧА
1 МАСТЕР КЛЮЧ
2 КЛЮЧ ДЛЯ ДЕШИФРАЦИИ
3. КЛЮЧ KLKСтраница 34
UNIPOS Terminal
Руководство инженера
9. Проверить ввод ключа по отображенной
результирующейконтрольнойсумме.
Подтвердить нажатием клавиши Enter в случае
совпадения.
10.Выйти из редактора ввода ключа нажатием
клавиши Отмена.
11.Выход из ПО KeyInstaller производится нажатием
на клавишуОтмена.
3.2.2 Загрузка ключей в режиме по СОМ-порту
Загрузка ключей выполняется по протоколу IPP8. Формат данных – 7E1. Для
загрузки используется второй платежный терминал, на котором установлено
специальное ПО (special kit), позволяющее обеспечить загрузку ключей с
одного платежного терминала на другой.
Предварительные условия:
Перед началом загрузки должна быть запущена
утилита KeyInstaller. В главном меню утилиты
необходимо выбрать пункт ЗАГРУЗКА КЛЮЧЕЙ и
нажать клавишуEnter.
Шаги:
1. ВыбратьвменютипзагрузкиПОСОМПОРТУ,по
которому загружаютсяключи.
2. Терминал ожидается подключения по СОМ-порту
внешнегоустройствадлязагрузкиснегоключей.
Результат:
Пример успешной загрузки ключей. Выход к
предыдущему меню осуществляется нажатием
кнопки Отмена.
KEY INSTALLER 1.0
1 ЗАГРУЗКА КЛЮЧЕЙ
2 УДАЛЕНИЕ КЛЮЧЕЙ
3 ПОИСК ПИНПАДОВ
4 ПАРАМЕТРЫ
5 УДАЛИТЬ ПРИЛОЖЕН.
KEY MANAGER 1.0
1 РУЧНОЙ РЕЖИМ
2 ПО СОМ-ПОРТУСтраница 35
UNIPOS Terminal
Руководство инженера
3.3 Проверка загрузки ключей
При загрузке терминала производится проверка корректности загруженных
ключей. Проверяется, всем ли загруженным рабочим ключам соответствуют
загруженные в указанных ячейках мастер ключи. В случае если все ключи
соответствуют, на терминале отображается стартовый экран приложения
UNIPOS Terminal.
Предварительные условия:
Перед выполнением процедуры загрузки ключей на исправный платежный
терминал необходимо загрузить терминальное ПО с параметрами и ключи. В
том случае, если ключи были загружены правильно, терминал позволит
выполнять финансовые операции с платежными картами. В том случае, если
при вводе ключей были допущены ошибки, необходимо выполнить действия,
описанные ниже.
Шаги:
1. В случае несоответствия ключей на экране
терминала отображается сообщение и
производится печать тех мастер ключей, с
указанием ячеек, для которых не найдены
рабочие ключи.
2. По нажатию кнопки Enter (ДА) производится
переход к вводу новых мастер ключей. Требует
активизации логина администратора терминала
3. По нажатию кнопки Отмена (НЕТ) отображается приглашение к загрузке
новых параметров.Страница 36
UNIPOS Terminal
Руководство инженера
Раздел 4 Загрузка параметров и
обновлений терминального ПО
В процессе эксплуатации платежного терминала необходимо проводить
обновление параметров терминала и загружать новые версии ПО. Программа
UNIPOS Terminal позволяет выполнять загрузку параметров и пакетов
обновления терминального ПО при различных типах подключения
терминалов к вычислительным сетям (см. табл. 3). На физическом уровне
терминал может быть подключен через любой имеющийся у него интерфейс
(COM порт, проводная или беспроводная сеть). Для передачи данных по
локальной или глобальной вычислительной сети используется стек протоколов
TCP/IP. В том случае, если выполняется удаленная передача данных на
терминал, подключенный через COM порт или линейный модем к
маршрутизатору, дополнительно к стеку TCP/IP используется протокол PPP.
В качестве прикладных протоколов для передачи файлов параметров и ПО
используются SA и FTP.
Таблица№4 Комбинации протоколов для загрузки
Протоколы загрузки
(прикладные
протоколы)
Сетевые протоколы Коммуникационное оборудование
(каналы передачи данных)
SA
COM порт
TCP/IP Ethernet WiFi
PPP–TCP/IP COM порт GPRS GSM
FTP
TCP/IP Ethernet Wi-Fi
PPP–TCP/IP COM порт GPRS GSM
Для обеспечения загрузки параметров и файлов с обновлениями ПО
используются сервисные программы линейки UNIPOS Config Manager. Для
загрузки параметров и ПО с ПК на терминал с использованием интерфейса
RS–232 предназначены программы Config Manager Station и Config Manager
Client. В этом случае пользователь с ПК, на котором установлена одна из этих
программ, должен находиться рядом с платежным терминалом, на который
производится загрузка и загружать можно с одного ПК только на один
терминал. При этом, если используется программа Config Manager Client, то
она должна быть подключена к программе Config Manager Server локально
или удаленно. В том случае, если необходимо загружать ПО и параметры
удаленно, нужно использовать или Download Server, или FTP сервер. В этом
случае программа Config Manager Station (Config Manager Client) используется
для контроля процесса выполнения загрузки, управления программой
Download Server и опубликования параметров на сервере (серверах).
ПРИМЕЧАНИЕ: Порядок использования различных протоколов и каналов передачи данных
подробно описан в документах: UNIPOS Config Manager Station Руководство пользователя;
UNIPOS Config Manager Client Руководство пользователя; UNIPOS Config Manager ServerСтраница 37
UNIPOS Terminal
Руководство инженера
Руководство пользователя;UNIPOSDownloadServerРуководствопользователя.
Для загрузки ПО и параметров на платежный терминал в ходе эксплуатации
терминала используется приложение Agent. Данное приложение может
работать с любым протоколом и каналом передачи данных, используемым
Config Manager Station и Download Server.
В самом общем виде принцип работы приложения Agent выглядит следующим
образом.
1. Приложение Agent запрашивает на сервере параметризации файл –
манифест со списком загружаемых файлов.
2. Далее производится сравнение имеющихся файлов с загружаемыми
на эдентичность, по результатам этого сравнения создается файл с
результатами сравнения, который отсылается на сервер
параметризации.
3. Сервер параметризации на основании таблицы сравнения выбирает
обновленные файлы из дистрибутива и загружает их на терминал.
4. По окончании загрузки терминал передает на сервер отчет с
результатами загрузки параметров и обновлений ПО.
4.1 Настройки Config Manager для загрузки ПО и параметров
РанееужебыларассмотренапервичнаязагрузкаПОипараметровнатерминал.
Действия, выполняемые при загрузке с использованием программы Config
Manager Station (Client) будут во многом схожи с первичной загрузкой.
Отличия заключаются в использовании протокола обмена данными и
включением режима загрузки ПО. При первичной загрузке ПО используется
протокол ZonTalk. После того, как ПО UNIPOS Terminal будет загружено на
терминал, необходимо использовать протокол обмена данными SA, который
поддерживается программой UNIPOS Terminal.
Аналогичные действия, выполняемые с использованием программы Config
Manager Clientбудутотличатьсятолькоспособомподключения к базе данных (в
этом случае используется программа Config Manager Server). Порядок
использованияпрограммConfigManagerClientиConfigManagerServerподробно
описанв документах на эти программы: UNIPOS Config Manager Client Руководство
пользователя и UNIPOS Config Manager Server Руководство пользователя.
Для того, чтобы подготовить ПО и параметры к загрузке на терминалы, необходимо
выполнить следующие действия:
Шаги:
1. ОткрытьпрограммуConfigManagerStationиподключитьсякбазеданныхс
параметрами терминалов, на которые планируется загрузка параметров и
обновлений ПО.
2. Втомслучае,еслииспользуетсяобновленияПОнатерминале,необходимо
произвестиследующиенастройкипрограммыConfigManagerStation.Страница 38
UNIPOS Terminal
Руководство инженера
Рисунок 16 Создание новойинсталляции
a. Скопировать дистрибутив терминального ПО с последними обновлениями в
заранее обусловленную папку на ПК.
b. Открыть справочник Инсталляции ПО и создать новую инсталляцию.
c. Выбрать поле Имя файла, нажать появившуюся в правой части поля кнопку с
многоточием и в открывшемся проводнике выбрать необходимый zip архив в
инсталляционным дистрибутивом.
d. Заполнить поля, которые не были автоматически заполнены после заполнения
поля Имя файла.
3. В справочнике Терминалы для терминала, на который будет загружаться
обновленная версия ПО (см. рис. 17), в поле Загружать ПО в терминал установить значение Да, а в поле Инсталляционный пакет установить инсталляцию
для обновленного ПО, созданную ранее (см. рис. 16).Страница 39
UNIPOS Terminal
Руководство инженера
Рисунок17 Выборзагружаемогопакетадлятерминала
4.2 Настройки в Config Manager для загрузки лицензии
В том случае, если схема лицензирования ПО предусматривает использование
файлов лицензии, привязанных к конкретным терминалам, необходимо
загрузить эти файлы лицензии и привязать их к терминалам. Файл лицензии
имеет имя, содержащее серийный номер терминала, для которого создан этот
файллицензии и расширение tlv.
Файлылицензиимогут быть загружены как одновременно с загрузкой других
параметров, так и самостоятельно, после загрузки параметров. Для загрузки
файла лицензии на POS терминал должно быть загружено ПО
(первоначальная загрузка ПО), после которой терминал получит номер, к
которому и будет привязан файл лицензии.
4.2.1 Загрузка файлов лицензии в базу данных
Для загрузки файла лицензии необходимо выполнить следующие действия (см.
рис.18):
 щелкнуть правой кнопкой мыши на папке Инсталляции ПО и выбрать
Загрузить лицензии…;
 в открывшемся окне Файлы лицензии нажать Добавить;
Рисунок 18 Открытие окна Файлы лицензии
 воткрывшемсяокне Обзор папоквыбрать папкусфайламилицензийинажать
ОК (см. рис.19);
 в открывшемся окне Выберите вариант загрузки лицензии… выбрать запись с
необходимым вариантом загрузки и нажать на нее;
 в окне Файлы лицензии нажать ОК.
ПРИМЕЧАНИЕ:Расширение имени файла лицензии должно быть в нижнем регистре (.tlv).
В случае если расширение имени файла лицензии указано в верхнем регистре может
сохранится ДЕМО режим работы ПО терминала.Страница 40
UNIPOS Terminal
Руководство инженера
Рисунок 19 Порядок добавления файлов лицензии
4.2.2 Привязка файлов лицензии
После загрузки файлов лицензии их необходимо привязать к конкретным
терминалам. Привязка файлов лицензии к терминалу осуществляется по
серийному номеру терминала.
Для привязки файла лицензии к терминалу необходимо выполнить следующие
действия:
 проверить, что для терминала, к которому необходимо привязать лицензию, в поле Серийный
номер указан правильный серийный номер тер
минала (см. рис. 20) ;
 открыть окно Файлы лицензии и убедиться, что
имеется файл лицензии для терминала с таким
номером (см. окно Файлы лицензии рис. 18 и рис. 21);
 в открывшемся окне Файлы лицензии выбрать необходимую запись и нажать
Привязать;
 в открывшемся диалоговом окне Файлы лицензии с сообщением Может
потребоваться переопубликование терминалов нажать ОК;
 убедиться, что в выбранной записи в поле Привязан? стоит Да.Страница 41
UNIPOS Terminal
Руководство инженера
Рисунок20 ПроверкасерийногономераPOSтерминала
ПРИМЕЧАНИЕ:Еслиунесколькихзаписейсправочника«Терминалы»указанодинитотже
«Серийный номер», то файл лицензии привяжется ко всем записям. Такое возможно только
если две записи справочника «Терминалы» ссылаются на один физический терминал. В случае
если физический, заводской, серийный номер терминала не совпадёт с названием файла
лицензииПОостанетсявДЕМОрежиме.
4.2.3 Работа с фильтрами диалога загрузки лицензии
В том случае, если имеется большое количество платежных терминалов и
лицензий для них, будет сложно найти необходимую запись в окне Файлы
лицензии.В этомслучаенеобходимоиспользоватьфильтрыпотерминалу(см. рис.
21).
Рисунок 21 Фильтрация списка лицензий
В том случае, если известен номер терминала и необходимо найти запись или
записи, относящиеся к этому терминалу, необходимо использовать фильтр по
терминалу.
Для того, чтобы произвести фильтрацию записей, необходимо:Страница 42
UNIPOS Terminal
Руководство инженера
 для фильтрации по терминалу необходимо в поле Фильтр по терминалу ввести
серийный номер терминала и нажать Применить.
4.3 Первая загрузка параметров
В том случае, если первоначальная загрузка ПО на платежный терминал
осуществляется из командной строки, на терминал будет загружено только
терминальноеПО без параметров (zip архив, входящий в комплект поставки).
Пользователь имеет возможность сформировать zip архив с параметрами в
программе Config ManagerStationизагрузитьеговтерминал.
Для загрузки параметров после загрузки терминального ПО в командной строке
и загрузки ключей необходимо выполнить следующие действия:
Предварительные условия:
До начала первой загрузки параметров на терминал должны быть выполнены
следующие действия:
1. загружено ПО UNIPOS Terminal;
2. введены значениямастер-ключей;
3. произведена перезагрузкатерминала.
После перезагрузки терминала на его экране
отобразится информационное окно с сообщением:
ФАЙЛЫ ПАРАМЕТРОВ НЕ ЗАГРУЖЕНЫ.
В том случае, если после выполнения всех
предварительных действий терминал будет
выключен, а затем включен снова, после старта
программы UNIPOS Terminal на экране терминала
снова отобразится информационное окно с
сообщением: ФАЙЛЫ ПАРАМЕТРОВ НЕ
ЗАГРУЖЕНЫ.
Шаги:
1. После того, как на экране терминала отобразится
сообщение ФАЙЛЫ ПАРАМЕТРОВ НЕ
ЗАГРУЖЕНЫ нажать на клавиатуре терминала
кнопку Enter. На экране терминала отображается
информационное сообщение с предложением
загрузки параметров при их отсутствии.
После того, как на экране терминала в окне
ВНИМАНИЕ отобразится сообщение ДЛЯ ЗАГРУЗКИ НОВЫХ
ПАРАМЕТРОВ НАЖМИТЕ ЛЮБУЮ КЛАВИШУ… нажать Enter.
2. В открывшемся окне ПАРАМЕТРЫ ПРИЛ. ввести
значение идентификатора терминала и нажать
Enter.
На экране терминала отображается
идентификатор терминала, по которому изСтраница 43
UNIPOS Terminal
Руководство инженера
приложения Config Manager выбираются
настройки именно этого загружаемого
терминала. При подтверждении совпадения
идентификатора с текущим значением номера
терминала отображается главное окно
приложения Agent.
3. В окне ЗАГРУЗКА ПАРАМЕТ. выбрать пункт
ПАР. СОЕДИНЕНИЯ и произвести настройку
параметров соединения терминала с
компьютером, на котором располагаются
параметры для их загрузки.
Порядок настройки параметров соединения
терминала с сервером параметризации
описан в разделе 4.4 Настройка параметров
соединения.
4. В окне ЗАГРУЗКА ПАРАМЕТ. выбрать ЗАГРУЗКА и выполнить процедуру
загрузки параметров на терминал.
Технология загрузки параметров на терминал будет зависеть от способа
подключения терминала к компьютеру. Все возможные варианты загрузки,
задаваемые используемыми коммуникационными каналами, будут рассмотрены
вподразделе 4.5 Загрузка параметров и обновлений ПО.
4.4 Настройка параметров соединения
До начала загрузки параметров и обновлений ПО на терминал необходимо
настроить параметры соединения терминала. В случае необходимости может
быть настроено несколько соединений, в зависимости от того, какие
интерфейсы имеет тот или иной платежный терминал. Как минимум, должно
быть настроено одно соединение.
4.4.1 Протокол SA, канал передачи данных RS232 (СОМ порт)
Данный вариант загрузки доступен при любой лицензии на Config Manager
Station. Загружать параметры по RS–232 можно используя Config Manager
Station.
Рисунок22 Схемазагрузки:протоколSA,каналпередачиданныхRS-232(COMпорт)
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВСтраница 44
UNIPOS Terminal
Руководство инженера
Предварительные условия:
После настройки всех необходимых параметров средствами программы Config
Manager Station можно переходить к настройке терминалов для загрузки
параметров и обновленийПО.
Длятого,чтобыначатьнастройку,необходимовойтивприложениеAgent.
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные
соединения. Изменение производится
аналогично.
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка.
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕ
ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫ
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМСтраница 45
UNIPOS Terminal
Руководство инженераСтраница 46
UNIPOS Terminal
Руководство инженера
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать SA.
8. В окне ОБОРУДОВАНИЕ выбрать СОМ ПОРТ.
9. Номер порта – выбрать соответствующий типу
соединения.
ПРИМЕЧАНИЕ: Количество портов может отличаться с зависимости от используемой
модели платежного терминала
10.Установить значение максимальной длины
пакета.
Значение максимальной длины пакета может
иметь значение от 0 до 16000 байт.
11.Сетевой протокол – выбрать НЕ ИСПОЛЬЗУЕТСЯ.
12.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTP
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMA
НОМЕР ПОРТА
1 СОМ 1
2 СОМ USB
СЕТЕВОЙ ПРОТОКОЛ
1 НЕ ИСПОЛЬЗУЕТСЯ
2 PPP
3 X.25
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·Страница 47
UNIPOS Terminal
Руководство инженера
13.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
4.4.2 Протоколы SA и TCP/IP, канал передачи данных Ethernet
В данной схеме платежный терминал используется как компьютер в сети
Ethernet. Терминал можно подключать как к локальной, так и глобальной
вычислительной сети.
Рисунок 23 Схема загрузки: протоколы SA и TCP/IP, каналпередачи данных Ethernet
Для загрузки ПО и параметров по данной схеме необходимо использовать
Download Server. Перед загрузкой необходимо настроить параметры
протоколов SA и TCP/IP.
ПРИМЕЧАНИЕ: Порядок настройки параметров сети для Download Server подробно
рассмотрен в документе UNIPOS Download Server Руководство пользователя. Порядок
работы с программой Config Manager Station подробно описан в документе Config Manager
Station Руководство пользователя.
Предварительные условия:
После настройки всех необходимых параметров средствами программы Config
Manager Station можно переходить к настройке терминалов для загрузки
параметров и обновленийПО.
Длятого,чтобыначатьнастройку,необходимовойтивприложениеAgent.
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 48
UNIPOS Terminal
Руководство инженера
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные
соединения. Изменение производится
аналогично.
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка.
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать SA.
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМ
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕ
ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫ
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTPСтраница 49
UNIPOS Terminal
Руководство инженера
8. В окне ОБОРУДОВАНИЕ выбрать ETHERNET.
9. Установить значение максимальной длины
пакета.
Значение максимальной длины пакета может
иметь значение от 0 до 16000 байт.
10.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
11.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
12.АДРЕС ШЛЮЗА, МАСКА СЕТИ и АДРЕС
ТЕРМИНАЛА для DHCP могут быть нулевыми
(нулевые значения указаны по умолчанию).
13.АДРЕССЕРВЕРА–настроитьадрессервера,на
котором запущен Download Server.
14.ПОРТ СЕРВЕРА – Настроить порт, открытый
для загрузки параметров приложением
Download Server.
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMA
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 50
UNIPOS Terminal
Руководство инженераСтраница 51
UNIPOS Terminal
Руководство инженера
15.Статус использования SSL – Настроить в
зависимости от условий, например – НЕ
ИСПОЛЬЗУЕТСЯ.
Для того что бы принимать все сертификаты,
как верные, так и не верные выбирается
значение параметра ПРИН.ВСЕ СЕРТИФ.
Для того что бы принимать самоподписанные сертификаты серверов
выбирается значение параметра ПРИН. САМОПОДПИС. Для того что
бы отвергать самоподписанные сертификаты серверов выбирается
значение параметра ОТВЕР. САМОПОДПИС.
Параметры сетевых настроек, вводимые на клавиатуре терминала (Адрес шлюза, Маска
сети, Адрес терминала, Адрес сервера и Порт сервера), можно задать в программе Config
Manager Station. Для этого на панели с деревом параметров необходимо выбрать терминал,
для которого будут произведены настройки, раскрыть дерево и выбрать папку
Коммуникациисхостом|Соединениессерверомпараметризацииизаполнитьнеобходимые
поля. Подробные инструкции по выполнению этих операций описаны в документе Config
Manager StationРуководствопользователя.
В том случае, если в приложении Agent настроено хотя бы одно соединение, то при запуске
этого приложения будет автоматически запущена загрузка ПО и параметров поэтому
соединению. Для того, чтобы создать новое соединение, необходимо после начала загрузки
на клавиатуре терминала нажать клавишу Отмена, после чего в открывшемся меню
выбрать пункт ПАРАМЕТРЫСОЕДИНЕНИЯ.
4.4.3 Протоколы SA и TCP/IP, канал передачи данных Wi-Fi
В данной схеме платежный терминал используется как мобильное устройство,
подключаемое к локальной или глобальной компьютерной сети через
беспровод ной канал передачи данных Wi-Fi. Для передачи данных по сети
используется стек протоколов TCP/IP, а для обмена данными между
платежным терминалом и программой Download Server используется
протокол SA.
СТАТУС ИСПОЛЬЗ. SSL
1 НЕ ИСПОЛЬЗУЕТСЯ
2 ПРИН. ВСЕ СЕРТИФ.
3 ПРИН. САМОПОДПИС.
4 ОТВЕР. САМОПОДПИС.Страница 52
UNIPOS Terminal
Руководство инженера
Рисунок 24 Схема загрузки: протоколы SA и TCP/IP, каналпередачи данныхWi-Fi
Предварительные условия:
После настройки всех необходимых параметров средствами программы
Config Manager Station можно переходить к настройке терминалов для
загрузки параметров и обновлений ПО.
Для того, чтобы начать настройку, необходимо войти в приложение Agent.
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные
соединения. Изменение производится
аналогично.
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка. ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕСтраница 53
UNIPOS Terminal
Руководство инженераСтраница 54
UNIPOS Terminal
Руководство инженера
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать SA.
8. В окне ОБОРУДОВАНИЕ выбрать WIFI.
9. В окне SA ввести значение максимальной длины
пакета.
Величина максимальной длины пакета может
бытьот0до16000.
10.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
11.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
12.В окне WIFI ввести имя Wi-Fi сети.
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTP
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМ
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMA
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 55
UNIPOS Terminal
Руководство инженера
13.Ввести номер Wi-Fi канала.
14.В окне ШИФРОВАНИЕ WIFI выбрать
необходимый видшифрования.
15.В случае использования одного из вариантов
шифрации на экране терминала отображается
два экрана: НОМЕР КЛЮЧА ШИФРАЦИИ
ДАННЫХ
–взависимостиотусловий,например–0.
16.И экран ввода ключа шифрации данных.
17.АДРЕС ШЛЮЗА, МАСКА СЕТИ и АДРЕС
ТЕРМИНАЛА для DHCP могут быть нулевыми
(нулевые значения установлены по умолчанию).
18.АДРЕССЕРВЕРА–настроитьадрессервера,на
котором запущен Download Server.
19.ПОРТ СЕРВЕРА – Настроить порт, открытый
для загрузки параметров приложением
Download Server.
ШИФРОВАНИЕ WIFI
1 НЕ ИСПОЛЬЗУЕТСЯ
2 WEP 64
3 WEP 64 SHARED
4 WEP 128
5 WEP 128 SHARED
6 WPA
7 WPA 2Страница 56
UNIPOS Terminal
Руководство инженера
20.Статус использования SSL – Настроить в
зависимости от условий, например – НЕ
ИСПОЛЬЗУЕТСЯ.
Для того что бы принимать все сертификаты,
как верные, так и не верные выбирается
значение параметра ПРИН.ВСЕ СЕРТИФ.
Для того что бы принимать самоподписанные сертификаты серверов
выбирается значение параметра ПРИН. САМОПОДПИС. Для того что
бы отвергать самоподписанные сертификаты серверов выбирается
значение параметра ОТВЕР. САМОПОДПИС.
Параметры сетевых настроек, вводимые на клавиатуре терминала (Адрес шлюза, Маска
сети, Адрес терминала, Адрес сервера и Порт сервера), можно задать в программе Config
Manager Station. Для этого на панели с деревом параметров необходимо выбрать терминал,
для которого будут произведены настройки, раскрыть дерево и выбрать папку
Коммуникациисхостом|Соединениессерверомпараметризацииизаполнитьнеобходимые
поля. Подробные инструкции по выполнению этих операций описаны в документе Config
Manager StationРуководствопользователя.
В том случае, если в приложении Agent настроено хотя бы одно соединение, то при запуске
этого приложения будет автоматически запущена загрузка ПО и параметров поэтому
соединению. Для того, чтобы создать новое соединение, необходимо после начала загрузки
на клавиатуре терминала нажать клавишу Отмена, после чего в открывшемся меню
выбрать пункт ПАРАМЕТРЫСОЕДИНЕНИЯ.
4.4.4 Протоколы SA и PPP, канал передачи данных RS-232 (СОМ-порт)
В том случае, если платежный терминал можно подключить к внешнему
устройству только через COM порт, для удаленной загрузки параметров и
обновлений ПО предназначена схема с использованием протокола PPP и
подключением терминалов к вычислительной сети через дополнительное
устройство (RAS), выполняющее функции маршрутизатора (это может быть,
как обычный ПК, так и специализированное устройство). В зависимости от
имеющегося у RAS количества интерфейсов RS-232 можно одновременно
подключать несколько терминалов для одновременной загрузки параметров и
обновлений ПО.
Рисунок25 Схемазагрузки:протоколыSAиPPP,каналпередачиданныхRS-232(COMпорт)
СТАТУС ИСПОЛЬЗ. SSL
1 НЕ ИСПОЛЬЗУЕТСЯ
2 ПРИН. ВСЕ СЕРТИФ.
3 ПРИН. САМОПОДПИС.
4 ОТВЕР. САМОПОДПИС.Страница 57
UNIPOS Terminal
Руководство инженера
Перед загрузкой необходимо настроить параметры протоколов SA и TCP/IP в
окне Настройка Download Server программы Config Manager Station. После
настройки параметров программы Download Server можно приступать к
работе с терминалами.
Предварительные условия:
После настройки всех необходимых параметров средствами программы Config
Manager Station можно переходить к настройке терминалов для загрузки
параметров и обновленийПО.
Длятого,чтобыначатьнастройку,необходимовойтивприложениеAgent.
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные
соединения. Изменение производится
аналогично.
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка.
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕСтраница 58
UNIPOS Terminal
Руководство инженера
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать SA.
8. В окне ОБОРУДОВАНИЕ выбрать СОМ ПОРТ.
9. ВокнеНОМЕРПОРТАвыбратьнеобходимую
запись, например, COM USB.
ПРИМЕЧАНИЕ: Количество портов может отличаться с зависимости от используемой
модели платежного терминала
10.Установить значение максимальной длины
пакета.
Значение максимальной длины пакета может
иметь значение от 0 до 16000 байт.
11.В окне СЕТЕВОЙ ПРОТОКОЛ выбрать PPP.
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTP
НОМЕР ПОРТА
1 СОМ 1
2 СОМ USB
СЕТЕВОЙ ПРОТОКОЛ
1 НЕ ИСПОЛЬЗУЕТСЯ
2 PPP
3 X.25
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМ
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMAСтраница 59
UNIPOS Terminal
Руководство инженераСтраница 60
UNIPOS Terminal
Руководство инженера
12.В окне PPP ввести имя пользователя,
например, ADMIN.
13.После ввода имени пользователя в окне PPP
ввести пароль этого пользователя,
соответствующий настройкам пароля
пользователя в настройках входящего
соединения RAS.
14.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
15.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
16.АДРЕС ШЛЮЗА, МАСКА СЕТИ и АДРЕС
ТЕРМИНАЛА для DHCP могут быть нулевыми
(нулевые значения установлены по умолчанию).
17.АДРЕССЕРВЕРА–настроитьадрессервера,на
котором запущен Download Server.
18.ПОРТ СЕРВЕРА – Настроить порт, открытый
для загрузки параметров приложением
Download Server.
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 61
UNIPOS Terminal
Руководство инженера
19.Статус использования SSL – Настроить в
зависимости от условий, например – НЕ
ИСПОЛЬЗУЕТСЯ.
Для того что бы принимать все сертификаты,
как верные, так и не верные выбирается
значение параметра ПРИН.ВСЕ СЕРТИФ.
Для того что бы принимать самоподписанные сертификаты серверов
выбирается значение параметра ПРИН. САМОПОДПИС. Для того что
бы отвергать самоподписанные сертификаты серверов выбирается
значение параметра ОТВЕР. САМОПОДПИС.
Параметры сетевых настроек, вводимые на клавиатуре терминала (Адрес шлюза, Маска
сети, Адрес терминала, Адрес сервера и Порт сервера), можно задать в программе Config
Manager Station. Для этого на панели с деревом параметров необходимо выбрать терминал,
для которого будут произведены настройки, раскрыть дерево и выбрать папку
Коммуникациисхостом|Соединениессерверомпараметризацииизаполнитьнеобходимые
поля. Подробные инструкции по выполнению этих операций описаны в документе Config
Manager StationРуководствопользователя.
В том случае, если в приложении Agent настроено хотя бы одно соединение, то при запуске
этого приложения будет автоматически запущена загрузка ПО и параметров поэтому
соединению. Для того, чтобы создать новое соединение, необходимо после начала загрузки
на клавиатуре терминала нажать клавишу Отмена, после чего в открывшемся меню
выбрать пункт ПАРАМЕТРЫСОЕДИНЕНИЯ.
4.4.5 Протоколы SA и PPP, канал передачиданных GSM (GPRS)
В том случае, если необходимо обеспечить связь через каналы сотовой связи,
платежный терминал может быть оборудован модулями GSM и GPRS.
Настройки обоих модулей идентичны, поэтому будет рассмотрена процедура
настройкина основе GSM.
На рисунке ниже представлена коммуникационная схема при подключении
терминалачерезинтерфейсGSM(GPRS).Вэтойсхеметерминалподключаетсяк
одному из операторов сотовой связи, а оператор, в свою очередь,
обеспечивает подключение сети сотовой связи к глобальной вычислительной
сети,черезкоторую опеспечивается доступ к необходимому Download Server.
СТАТУС ИСПОЛЬЗ. SSL
1 НЕ ИСПОЛЬЗУЕТСЯ
2 ПРИН. ВСЕ СЕРТИФ.
3 ПРИН. САМОПОДПИС.
4 ОТВЕР. САМОПОДПИС.Страница 62
UNIPOS Terminal
Руководство инженера
Рисунок27 Схемазагрузки:протоколыSAиPPP,каналпередачиданныхGSM(GPRS)
Перед началом работы с терминалами необходимо настроить сетевые
параметры программы Download Server. Подробные инструкции по
настройке этих параметров изложены в документе UNIPOS Download Server
Руководство пользователя. После настройки параметров Download Server
можно приступать к настройкам терминала.
Предварительные условия:
После настройки всех необходимых параметров средствами программы Config
Manager Station можно переходить к настройке терминалов для загрузки
параметров и обновленийПО.
Длятого,чтобыначатьнастройку,необходимовойтивприложениеAgent.
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные
соединения. Изменение производится
аналогично.
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕСтраница 63
UNIPOS Terminal
Руководство инженера
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка.
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать SA.
8. В окне ОБОРУДОВАНИЕ Выбрать GSM (GPRS)
МОДЕМ.
9. Установить значение максимальной длины пакета.
Значение максимальной длины пакета может
иметь значение от 0 до 16000 байт.
10.В окне МОДЕМ ввести номер телефона.
ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTP
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMA
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМСтраница 64
UNIPOS Terminal
Руководство инженера
11.После ввода номера телефона в окне МОДЕМ
ввести строку инициализации модема, например:
• дли инициализации GSM модема: ATE0V0;
• для инициализации GPRS модема (VeriFone):
AT+CGDCONT=1,"IP","mts.internet.ru";
• для инициализации GPRS модема (PAX):
"mts.internet.ru".Страница 65
UNIPOS Terminal
Руководство инженера
12.В окне СЕТЕВОЙ ПРОТОКОЛ выбрать PPP.
13.В окне PPP ввести имя пользователя,
например, ADMIN.
14.После ввода имени пользователя в окне PPP
ввести пароль этого пользователя,
соответствующий настройкам пароля
пользователя в настройках входящего
соединения RAS.
15.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
16.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
17.АДРЕС ШЛЮЗА, МАСКА СЕТИ и АДРЕС
ТЕРМИНАЛА для DHCP могут быть нулевыми
(нулевые значения установлены по умолчанию).
18.АДРЕССЕРВЕРА–настроитьадрессервера,на
котором запущен Download Server.
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·
СЕТЕВОЙ ПРОТОКОЛ
1 НЕ ИСПОЛЬЗУЕТСЯ
2 PPP
3 X.25
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 66
UNIPOS Terminal
Руководство инженера
19.ПОРТ СЕРВЕРА – Настроить порт, открытый
для загрузки параметров приложением
Download Server.
20.Статус использования SSL – Настроить в
зависимости от условий, например – НЕ
ИСПОЛЬЗУЕТСЯ.
Для того что бы принимать все сертификаты,
как верные, так и не верные выбирается
значение параметра ПРИН.ВСЕ СЕРТИФ.
Для того что бы принимать самоподписанные сертификаты серверов
выбираетсязначениепараметраПРИН.САМОПОДПИС. Для того что бы
отвергать самоподписанные сертификаты серверов выбирается
значение параметра ОТВЕР. САМОПОДПИС.
Параметры сетевых настроек, вводимые на клавиатуре терминала (Адрес шлюза, Маска
сети, Адрес терминала, Адрес сервера и Порт сервера), можно задать в программе Config
Manager Station. Для этого на панели с деревом параметров необходимо выбрать терминал,
для которого будут произведены настройки, раскрыть дерево и выбрать папку
Коммуникациисхостом|Соединениессерверомпараметризацииизаполнитьнеобходимые
поля. Подробные инструкции по выполнению этих операций описаны в документе Config
Manager StationРуководствопользователя.
В том случае, если в приложении Agent настроено хотя бы одно соединение, то при запуске
этого приложения будет автоматически запущена загрузка ПО и параметров поэтому
соединению. Для того, чтобы создать новое соединение, необходимо после начала загрузки
на клавиатуре терминала нажать клавишу Отмена, после чего в открывшемся меню
выбрать пункт ПАРАМЕТРЫСОЕДИНЕНИЯ.
4.4.6 Протоколы FTP и TCP/IP, канал передачи данных Ethernet
При такой схеме работы терминал обращается за ПО и параметрами на
удаленный FTP сервер, в отличие от схем, рассмотренных ранее, когда
терминал обращался на Download Server (см. рисунок ниже). Необходимо
добавить, что программы FTP сервер, Download Server и Config Manager
Station в принципе могут находиться на одном компьютере, однако данную
схему предпочтительнее использовать с размещением этих программ на
различных компьютерах, что позволяет увеличить производительность схемы
и загружать ПО и параметры на большое количество терминалов,
разнесенных территориально.
Перед началом работы с терминалами необходимо настроить сетевые
параметры программы Download Server, чтобы файлы параметров и
обновлений ПО своевременно выкладывались на соответствующие FTP
серверы. Подробные инструкции по настройке.
СТАТУС ИСПОЛЬЗ. SSL
1 НЕ ИСПОЛЬЗУЕТСЯ
2 ПРИН. ВСЕ СЕРТИФ.
3 ПРИН. САМОПОДПИС.
4 ОТВЕР. САМОПОДПИС.Страница 67
UNIPOS Terminal
Руководство инженера
Рисунок 28 Схема загрузки: протоколы FTP и TCP/IP, канал передачи данных Ethernet
Предварительные условия:
После настройки всех необходимых параметров средствами программы Config
Manager Station можно переходить к настройке терминалов для загрузки
параметров и обновленийПО.
Длятого,чтобыначатьнастройку,необходимовойтивприложениеAgent.
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные соедине
ния. Изменение производится аналогично.
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫСтраница 68
UNIPOS Terminal
Руководство инженера
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка.
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать FTP.
8. В окне ПОЛЬЗОВАТЕЛЬ задать
зарегистрированное на FTP имя пользователя,
например, ADMIN.
9. ВокнеПОЛЬЗОВАТЕЛЬдляранеевведенного
пользователя задатьпароль.
10.В окне ОБОРУДОВАНИЕ выбрать ETHERNET.
ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTP
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMA
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМСтраница 69
UNIPOS Terminal
Руководство инженераСтраница 70
UNIPOS Terminal
Руководство инженера
11.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
12.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
13.АДРЕС ШЛЮЗА, МАСКА СЕТИ и АДРЕС
ТЕРМИНАЛА для DHCP могут быть нулевыми
(нулевые значения установлены по умолчанию).
14.АДРЕССЕРВЕРА –настроитьадреслокального
сервера, накоторомнаходитсяFTPсервер.
15.ПОРТ СЕРВЕРА – настроить порт, открытый
для загрузки параметров FTP сервером.
16.Статус использования SSL – Настроить в
зависимости от условий, например – НЕ
ИСПОЛЬЗУЕТСЯ.
Для того что бы принимать все сертификаты,
как верные, так и не верные выбирается
значение параметра ПРИН.ВСЕ СЕРТИФ.
Для того что бы принимать самоподписанные сертификаты серверов
выбираетсязначениепараметраПРИН.САМОПОДПИС. Для того что бы
отвергать самоподписанные сертификаты серверов выбирается
значение параметра ОТВЕР. САМОПОДПИС.
СТАТУС ИСПОЛЬЗ. SSL
1 НЕ ИСПОЛЬЗУЕТСЯ
2 ПРИН. ВСЕ СЕРТИФ.
3 ПРИН. САМОПОДПИС.
4 ОТВЕР. САМОПОДПИС.
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 71
UNIPOS Terminal
Руководство инженера
Параметры сетевых настроек, вводимые на клавиатуре терминала (Адрес шлюза, Маска
сети, Адрес терминала, Адрес сервера и Порт сервера), можно задать в программе Config
Manager Station. Для этого на панели с деревом параметров необходимо выбрать терминал,
для которого будут произведены настройки, раскрыть дерево и выбрать папку
Коммуникациисхостом|Соединениессерверомпараметризацииизаполнитьнеобходимые
поля. Подробные инструкции по выполнению этих операций описаны в документе Config
Manager StationРуководствопользователя.
В том случае, если в приложении Agent настроено хотя бы одно соединение, то при запуске
этого приложения будет автоматически запущена загрузка ПО и параметров поэтому
соединению. Для того, чтобы создать новое соединение, необходимо после начала загрузки
на клавиатуре терминала нажать клавишу Отмена, после чего в открывшемся меню
выбрать пункт ПАРАМЕТРЫСОЕДИНЕНИЯ.
4.4.7 Протоколы FTP и TCP/ IP, канал передачи данных Wi-Fi
Данная схема во многом похожа на рассмотренную ранее в подразделе 4.4.6
Загрузка ПО и параметров по схеме: протоколы FTP и TCP/IP, канал передачи
данных Ethernet. Отличие заключается в том, что в этой схеме вместо
канала передачи Ethernet терминал использует канал передачи Wi–Fi (см.
рисунок ниже).
Рисунок 29 Схема загрузки: протоколы FTP и TCP/IP, канал передачи данныхWi-Fi
Перед началом работы с терминалами необходимо настроить сетевыепараметры
программы Download Server, чтобы файлы параметров и обновлений ПО
своевременно выкладывались на соответствующие FTP серверы. Подробные
инструкции по настройке этих параметров изложены в документе UNIPOS
Download Server Руководство пользователя.
После настройки параметров Download Serverможно приступатьк настройкам
терминала.Страница 72
UNIPOS Terminal
Руководство инженераСтраница 73
UNIPOS Terminal
Руководство инженера
Предварительные условия:
После настройки всех необходимых параметров средствами программы Config
Manager Station можно переходить к настройке терминалов для загрузки
параметров и обновленийПО.
Длятого,чтобыначатьнастройку,необходимовойтивприложениеAgent.
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные соедине
ния. Изменение производится аналогично.
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка.
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕ
ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫ
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМСтраница 74
UNIPOS Terminal
Руководство инженера
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать FTP.
8. В окне ПОЛЬЗОВАТЕЛЬ задать
зарегистрированное на FTP имя пользователя,
например, ADMIN.
9. ВокнеПОЛЬЗОВАТЕЛЬдляранеевведенного
пользователя задатьпароль.
10.В окне ОБОРУДОВАНИЕ выбрать WIFI.
11.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
12.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTP
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMA
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 75
UNIPOS Terminal
Руководство инженераСтраница 76
UNIPOS Terminal
Руководство инженера
13.В окне WIFI ввести имя Wi-Fi сети.
14.Ввести номер Wi-Fi канала.
15.В окне ШИФРОВАНИЕ WIFI выбрать
необходимый видшифрования.
16.В случае использования одного из вариантов
шифрации на экране терминала отображается
два экрана: НОМЕР КЛЮЧА ШИФРАЦИИ
ДАННЫХ
–взависимостиотусловий,например–0.
17.И экран ввода ключа шифрации данных.
18.АДРЕС ШЛЮЗА, МАСКА СЕТИ и АДРЕС
ТЕРМИНАЛА для DHCP могут быть нулевыми
(нулевые значения установлены по умолчанию).
19.АДРЕССЕРВЕРА –настроитьадреслокального
сервера, накоторомнаходитсяFTPсервер.
ШИФРОВАНИЕ WIFI
1 НЕ ИСПОЛЬЗУЕТСЯ
2 WEP 64
3 WEP 64 SHARED
4 WEP 128
5 WEP 128 SHARED
6 WPA
7 WPA 2Страница 77
UNIPOS Terminal
Руководство инженера
20.ПОРТ СЕРВЕРА – настроить порт, открытый
для загрузки параметров FTP сервером.
21.Статус использования SSL – Настроить в
зависимости от условий, например – НЕ
ИСПОЛЬЗУЕТСЯ.
Для того что бы принимать все сертификаты,
как верные, так и не верные выбирается
значе ние параметра ПРИН.ВСЕ СЕРТИФ.
Для того что бы принимать самоподписанные сертификаты серверов
выбира ется значение параметра ПРИН. САМОПОДПИС. Для того что
бы отвергать самоподписанные сертификаты серверов выбирается
значение параметра ОТВЕР. САМОПОДПИС.
Параметры сетевых настроек, вводимые на клавиатуре терминала (Адрес шлюза, Маска
сети, Адрес терминала, Адрес сервера и Порт сервера), можно задать в программе Config
Manager Station. Для этого на панели с деревом параметров необходимо выбрать терминал,
для которого будут произведены настройки, раскрыть дерево и выбрать папку
Коммуникациисхостом|Соединениессерверомпараметризацииизаполнитьнеобходимые
поля. Подробные инструкции по выполнению этих операций описаны в документе Config
Manager StationРуководствопользователя.
В том случае, если в приложении Agent настроено хотя бы одно соединение, то при запуске
этого приложения будет автоматически запущена загрузка ПО и параметров поэтому
соединению. Для того, чтобы создать новое соединение, необходимо после начала загрузки
на клавиатуре терминала нажать клавишу Отмена, после чего в открывшемся меню
выбрать пункт ПАРАМЕТРЫСОЕДИНЕНИЯ.
4.4.8 Протоколы FTP и PPP, канал передачи данных RS–232
Данная схема предпочтительна в том случае, если платежные терминалы
подключаются через COM порт и необходима удаленная загрузка ПО и
параметров на большое количество терминалов.
СТАТУС ИСПОЛЬЗ. SSL
1 НЕ ИСПОЛЬЗУЕТСЯ
2 ПРИН. ВСЕ СЕРТИФ.
3 ПРИН. САМОПОДПИС.
4 ОТВЕР. САМОПОДПИС.Страница 78
UNIPOS Terminal
Руководство инженера
Рисунок30 Схемазагрузки:протоколыFTPиPPP,каналпередачиданныхRS-232
Перед началом работы с терминалами необходимо настроить сетевые параметры
программы Download Server, чтобы файлы параметров и обновлений ПО
своевременно выкладывались на соответствующие FTP серверы. Подробные
инструкции по настройке этих параметров изложены в документе UNIPOS
Download Server Руководство пользователя.
Предварительные условия:
После настройки всех необходимых параметров средствами программы Config
Manager Station можно переходить к настройке терминалов для загрузки
параметров и обновленийПО.
Длятого,чтобыначатьнастройку,необходимовойтивприложениеAgent.
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные соедине
ния. Изменение производится аналогично.
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫСтраница 79
UNIPOS Terminal
Руководство инженера
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка. ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2Страница 80
UNIPOS Terminal
Руководство инженера
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать FTP.
8. В окне ПОЛЬЗОВАТЕЛЬ задать
зарегистрированное на FTP имя пользователя,
например, ADMIN.
9. ВокнеПОЛЬЗОВАТЕЛЬдляранеевведенного
пользователя задатьпароль.
10.В окне ОБОРУДОВАНИЕ выбрать СОМ ПОРТ.
11.ВокнеНОМЕРПОРТАвыбратьнеобходимую
запись, например, COM USB.
ПРИМЕЧАНИЕ: Количество портов может отличаться с зависимости от используемой
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTP
НОМЕР ПОРТА
1 СОМ 1
2 СОМ USB
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМ
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMAСтраница 81
UNIPOS Terminal
Руководство инженера
модели платежного терминала
12.В окне PPP ввести имя пользователя,
например, ADMIN.
13.После ввода имени пользователя в окне PPP
ввести пароль этого пользователя,
соответствующий настройкам пароля
пользователя в настройках входящего
соединения RAS.
14.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
15.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
16.АДРЕС ШЛЮЗА, МАСКА СЕТИ и АДРЕС
ТЕРМИНАЛА для DHCP могут быть нулевыми
(нулевые значения установлены по умолчанию).
17.АДРЕССЕРВЕРА–настроитьадреслокального
сервера, накоторомнаходитсяFTPсервер.
18.ПОРТ СЕРВЕРА – настроить порт, открытый
для загрузки параметров FTP сервером.
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 82
UNIPOS Terminal
Руководство инженера
19.Статус использования SSL – Настроить в
зависимости от условий, например – НЕ
ИСПОЛЬЗУЕТСЯ.
Для того что бы принимать все сертификаты,
как верные, так и не верные выбирается
значение параметра ПРИН.ВСЕ СЕРТИФ.
Для того что бы принимать самоподписанные сертификаты серверов
выбирается значение параметра ПРИН. САМОПОД- ПИС. Для того что
бы отвергать самоподписанные сертификаты серверов выбирается
значение параметра ОТВЕР. САМОПОДПИС.
Параметры сетевых настроек, вводимые на клавиатуре терминала (Адрес шлюза, Маска
сети, Адрес терминала, Адрес сервера и Порт сервера), можно задать в программе Config
Manager Station. Для этого на панели с деревом параметров необходимо выбрать терминал,
для которого будут произведены настройки, раскрыть дерево и выбрать папку
Коммуникациисхостом|Соединениессерверомпараметризацииизаполнитьнеобходимые
поля. Подробные инструкции по выполнению этих операций описаны в документе Config
Manager StationРуководствопользователя.
В том случае, если в приложении Agent настроено хотя бы одно соединение, то при запуске
этого приложения будет автоматически запущена загрузка ПО и параметров поэтому
соединению. Для того, чтобы создать новое соединение, необходимо после начала загрузки
на клавиатуре терминала нажать клавишу Отмена, после чего в открывшемся меню
выбрать пункт ПАРАМЕТРЫСОЕДИНЕНИЯ.
4.4.9 Протоколы FTP и PPP канал передачи данных GSM (GPRS)
В том случае, если необходимо обеспечить связь через каналы сотовой связи,
платежный терминал может быть оборудован модулями GSM и GPRS.
Настройки обоих модулей идентичны, поэтому будет рассмотрена процедура
настройкина основе GSM.
На рисунке ниже представлена коммуникационная схема при подключении
терминала через интерфейс GSM (GPRS).Вэтой схеме терминалподключаетсяк
одному из операторов сотовой связи, а оператор, в свою очередь,
обеспечивает подключение сети сотовой связи к глобальной вычислительной
сети,черезкоторую опеспечивается доступ к необходимому FTP серверу.
СТАТУС ИСПОЛЬЗ. SSL
1 НЕ ИСПОЛЬЗУЕТСЯ
2 ПРИН. ВСЕ СЕРТИФ.
3 ПРИН. САМОПОДПИС.
4 ОТВЕР. САМОПОДПИС.Страница 83
UNIPOS Terminal
Руководство инженера
Рисунок32 Схемазагрузки:протоколыFTPиPPP,каналпередачиданныхGSM(GPRS)
Перед началом работы с терминалами необходимо настроить сетевые параметры
программы Download Server, чтобы файлы параметров и обновлений ПО
своевременно выкладывались на соответствующие FTP серверы. Подробные
инструкции по настройке этих параметров изложены в документе UNIPOS
Download Server Руководство пользователя.
Предварительные условия:
После настройки всех необходимых параметров средствами программы Config
Manager Station можно переходить к настройке терминалов для загрузки
параметров и обновленийПО.
Длятого,чтобыначатьнастройку,необходимовойтивприложениеAgent.
Шаги:
1. Выбрать ПАРАМЕТРЫСОЕД.
2. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
СПИСОК СОЕДИНЕНИЙ.
3. В окне ПАРАМЕТРЫ СОЕД. выбрать пункт
ДОБАВИТЬ.
Максимальное количество соединений – 3. В
случае превышения лимита вместо добавления
необходимо изменять уже созданные
соединения. Изменение производится
аналогично.
ЗАГРУЗКА ПАРАМЕТРОВ
1 ПАР. ПРИЛОЖЕНИЯ
2 ПАР. СОЕДИНЕНИЯ
3 СБРОС ПАРАМЕТРОВ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 ДОБАВИТЬ СОЕДИНЕНИЕ
2 ИЗМЕНИТЬ СОЕДИНЕНИЕ
3 УДАЛИТЬ СОЕДИНЕНИЕ
ПАРАМЕТРЫ СОЕДИНЕНИЯ.
1 СПИСОК СОЕДИНЕНИЙ
2 ОБЩИЕ ПАРАМЕТРЫСтраница 84
UNIPOS Terminal
Руководство инженераСтраница 85
UNIPOS Terminal
Руководство инженера
4. В случае добавления соединения ввести имя.
5. В случае изменения существующего соединения
выбрать имя изменяемого из списка.
6. В окне ТИП КОММУНИКАЦИИ выбрать
ТЕРМИНАЛ.
7. В окне ПРОТОКОЛ ЗАГРУЗКИ выбрать FTP.
8. В окне ПОЛЬЗОВАТЕЛЬ задать
зарегистрированное на FTP имя пользователя,
например, ADMIN.
9. ВокнеПОЛЬЗОВАТЕЛЬдляранеевведенного
пользователя задатьпароль.
ИЗМЕНИТЬ
1 CONNECTION 1
2 CONNECTION 2
ПРОТОКОЛ ЗАГРУЗКИ
1 SA
2 FTP
ТИП КОММУНИКАЦИЙ
1 ТЕРМИНАЛ
2 ККМСтраница 86
UNIPOS Terminal
Руководство инженера
5.В окне ОБОРУДОВАНИЕ Выбрать GSM (GPRS)
МОДЕМ.
10.В окне МОДЕМ ввести номер телефона.
11.После ввода номера телефона в окне МОДЕМ
ввести строку инициализации модема, например
• дли инициализации GSM модема: ATE0V0.
• для инициализации GPRS модема (VeriFone):
AT+CGDCONT=1,"IP","mts.internet.ru";
• для инициализации GPRS модема (PAX):
"mts.internet.ru".
12.В окне PPP ввести имя пользователя,
например, ADMIN.
13.После ввода имени пользователя в окне PPP
ввести пароль этого пользователя,
соответствующий настройкам пароля
пользователя в настройках входящего
соединения RAS.
14.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
КОЛИЧЕСТВО ПОПЫТОК СОЕДИНЕНИЯ.
ОБОРУДОВАНИЕ
1 СОМ ПОРТ
2 ВНУТРЕННИЙ МОДЕМ
3 ВНЕШНИЙ МОДЕМ
4 GSM МОДЕМ
5 GPRS МОДЕМ
6 ETHERNET
7 WIFI
8 CDMA
ПАРАМЕТРЫ СОЕДИНЕНИЯ
КОЛИЧЕСТВО ПОПЫТОК
СОЕДИНЕНИЯ
2 · · · · · · · · · · · · · · · · · ·Страница 87
UNIPOS Terminal
Руководство инженера
15.В окне ПАРАМЕТРЫ СОЕДЕНИЯ установить
ТАЙМАУТ УСТАНОВКИ СОЕДИНЕНИЯ.
Диапозон таймаута устанвоки соединения
может иметь значение от 1 до 180 секунд.
16.АДРЕС ШЛЮЗА, МАСКА СЕТИ и АДРЕС
ТЕРМИНАЛА для DHCP могут быть нулевыми
(нулевые значения установлены по умолчанию).
17.АДРЕССЕРВЕРА–настроитьадреслокального
сервера, накоторомнаходитсяFTPсервер.
18.ПОРТ СЕРВЕРА – настроить порт, открытый
для загрузки параметров FTP сервером.
19.Статус использования SSL – Настроить в
зависимости от условий, например – НЕ
ИСПОЛЬЗУЕТСЯ.
Для того что бы принимать все сертификаты,
как верные, так и не верные выбирается
значение параметра ПРИН.ВСЕ СЕРТИФ.
Для того что бы принимать самоподписанные сертификаты серверов
выбирается значение параметра ПРИН. САМОПОД- ПИС. Для того что
бы отвергать самоподписанные сертификаты серверов выбирается
значение параметра ОТВЕР. САМОПОДПИС.
Параметры сетевых настроек, вводимые на клавиатуре терминала (Адрес шлюза, Маска
сети, Адрес терминала, Адрес сервера и Порт сервера), можно задать в программе Config
Manager Station. Для этого на панели с деревом параметров необходимо выбрать терминал,
для которого будут произведены настройки, раскрыть дерево и выбрать папку
Коммуникациисхостом|Соединениессерверомпараметризацииизаполнитьнеобходимые
поля. Подробные инструкции по выполнению этих операций описаны в документе Config
Manager StationРуководствопользователя.
В том случае, если в приложении Agent настроено хотя бы одно соединение, то при запуске
этого приложения будет автоматически запущена загрузка ПО и параметров поэтому
соединению. Для того, чтобы создать новое соединение, необходимо после начала загрузки
на клавиатуре терминала нажать клавишу Отмена, после чего в открывшемся меню
СТАТУС ИСПОЛЬЗ. SSL
1 НЕ ИСПОЛЬЗУЕТСЯ
2 ПРИН. ВСЕ СЕРТИФ.
3 ПРИН. САМОПОДПИС.
4 ОТВЕР. САМОПОДПИС.
СЕТЕВОЙ ПРОТОКОЛ
ТАЙУАТ УСТАНОВКИ
СОЕДИНЕНИЯ
30 · · · · · · · · · · · · · · · · · ·Страница 88
UNIPOS Terminal
Руководство инженера
выбрать пункт ПАРАМЕТРЫСОЕДИНЕНИЯ.
4.5 Загрузка параметров и обновлений ПО
После того, как на терминале была выполнена хотя бы одна настройка
сетевого соединения для загрузки параметров на терминал, можно начинать
процедуру загрузки параметров на терминал. Имеются два различных
способа выполнения процедуры загрузки, в зависимости от установленного
сетевого соединения. В том случае, если загрузка производится локально с
использованием прямого соединения между ПК и терминалом через
интерфейс RS 232, необходимо выполнять взаимосвязанные действия в
программах Config Manager Station (Client) и UNIPOS Terminal. В том случае,
если загрузка осуществляется удаленно, с использованием программы
Download Server (FTP сервер), все необходимые действия выполняются на
терминале, а программа Config Manager Station (Client) позволяет
проконтролировать правильность выполнения процедуры загрузки.
В данном подразделе дается описание выполнения этих двух типов
процедуры загрузки с примерами их выполнения в программах Config
Manager Station и Download Server. В дополнение будет дано описание
особенностей использования программ FTP сервер и Config Manager Client.
4.5.1 Загрузка с использованием Config Manager Station
Загрузить параметры и ПО на терминал с использованием программы Config
ManagerStation(илиConfigManagerClient)можночерезпрямоесоединениес
использованием интерфейса RS-232. В данной конфигурации можно
производить как первичную загрузку ПО и параметров, так и повторную загрузку
параметров, и обновление ПО. В том случае, если используется программа
Config Manager Station,базаданныхспараметрамиможетнаходитьсякакна
ПК,накоторомнаходится данная программа, так и удаленно. Например, на
ПК вместе с Config Manager Station может быть установлена СУБД SQL Server
Express, которая управляетбазойданныхспараметрами.Втомслучае,еслидля
загрузкиПОиспользуется программа Config Manager Client, необходимо
удаленное подключение к программе Config Manager Server, который уже
подключается к базе данных. Или необходимо заранее опубликовать
параметры и сохранить новые дистрибутивы терминального ПО на ПК, а
затем производить их установку на терминалы.
Предварительные условия:
После настройки, создания и опубликования параметров можно начинать
загрузку параметров на терминал. Перед началом выполнения процедуры
загрузки параметров необходимо запустить утилиту Agent программы
UNIPOS Terminal.
Шаги:
1. Запустить загрузку терминала в Config Manager Station для СОМ порта,
подключенного ктерминалу;Страница 89
UNIPOS Terminal
Руководство инженера
Рисунок33 Config ManagerStation
2. На терминале выбрать пункт ПАРАМЕТРЫ | ЗАГРУЗКА ПАРАМЕТРОВ;
Производится установка соединения с хостом, на котором установлена
программа Config Manager Station.
3. В окне Загрузка терминала приложения Config Manager Station отображается
лог загрузкифайлов;
Рисунок34 ConfigManagerStation
4. Наэкранетерминалаотображаетсясообщениеоначалазагрузкифайлов;
5. В процессе загрузки отображается имя загружаемого файла;
6. Поокончаниюзагрузкиотображаетсясообщение осостояниизагрузки;
В случае не успешной загрузки параметры следует загрузить заново.
Сообщение отображается на экране терминала в соответствии с
заданным таймаутом.
7. По истечению таймаута или нажатию любой кнопки на экране терминала
отображается меню приложения Agent.Страница 90
UNIPOS Terminal
Руководство инженера
4.5.2 Загрузка с помощью Download Server
Для удаленной загрузки параметров и обновлений ПО на терминалы
предназначена программа UNIPOS Config Manager Download Server (Download
Server). Также реализована возможность удаленной загрузки параметров и
обновлений ПО на терминал с помощью FTP сервера. Выполнение процедуры
удаленной загрузки параметров как с использованием программы Download
Server, так и с использованием FTP сервера будет аналогичным. Отличия в
этих схемах отличаются сетевыми настройками, выполнение которых было
описано в предыдущем подразделе.
Для контроля выполнения процедуры загрузки используется программа Config ManagerStation
(или Config Manager Client).
Предварительные условия:
После настройки, создания и опубликования параметров можно начинать
удаленную загрузку параметров на терминал. Перед началом выполнения
процедуры загрузки параметров необходимо запустить утилиту Agent
программы UNIPOS Terminal.
Шаги:
1. Втомслучае,еслинеобходимопроконтролироватьходзагрузкисредствами
Config Manager Station, необходимо на панели управления главного окна этой
программы нажать кнопку Подключиться к Download Server и прослушивать его
сообщения. После этого откроется окно Загрузка терминала, в котором после
запуска процедуры загрузки на терминале будет отображаться информация о
загрузке;
Рисунок35 ConfigManagerStation
2. На терминале выбрать пункт ПАРАМЕТРЫ | ЗАГРУЗКА ПАРАМЕТРОВ;
Производится установка соединения с хостом, на котором установленаСтраница 91
UNIPOS Terminal
Руководство инженера
программа Config Manager Station.
3. В окне Загрузка терминала приложения Config Manager Station отображается
лог загрузки файлов
Рисунок36 Config ManagerStation
4. Наэкранетерминалаотображаетсясообщениеоначалезагрузкифайлов;
5. В процессе загрузки отображается имя загружаемого файла;
6. Поокончаниюзагрузкиотображаетсясообщение осостояниизагрузки;
Рисунок37 ConfigManagerStation
В случае не успешной загрузки параметры следует загрузить заново.
Сообщение отображается на экране терминала в соответствии с за
данным таймаутом.
7. По истечению таймаута или нажатию любой кнопки на экране терминала
отображается меню приложения Agent.Страница 92
UNIPOS Terminal
Руководство инженера
Раздел 5 Настройки параметров для
автоматической загрузки новой версии OS
терминала
Чтобы настроить параметры для автоматической загрузки новой версии
операционной системы на терминал, необходимо подготовить
инсталляционныйпакет, создать новый раздел в справочнике Инсталляции
ОС программой Config Manager, а затем настроить параметры загрузки в
справочникеТерминалы.
5.1 Создание и настройка инсталляции операционной системы
Для создания новой инсталляции операционной системы необходимо выполнить
следующие действия (см. рис. 38):
Рисунок 38 Настройка инсталляции ОС
1. Выбрать справочник Инсталляции ОС;
2. Щелкнуть правой кнопкой мыши по папке Инсталляции ОС и выбрать в
раскрывшемся списке Добавить Инсталляция;
3. В открывшемся окне Создание: Инсталляция ввести наименование новой
инсталляции и нажать ОК;
4. В таблице выбрать поле Имя файла и нажать на появившуюся кнопку с
многоточием;
5. В открывшемся окне Файлы в БД выбрать дистрибутивный пакет
операционной системы и нажать ОК;
6. Убедиться, что произошло автоматическое заполнение полей Для моделей,
Версия и Дата изменения;
7. В случае необходимости заполнить поле Дополнительное описание.Страница 93
UNIPOS Terminal
Руководство инженераСтраница 94
UNIPOS Terminal
Руководство инженера
5.2 Настройки справочника Терминалы для загрузки OS
Для настройки параметров в справочнике Терминалы необходимо выполнить следующие действия (см. рис.39):
Рисунок 39 Настройки справочника Терминалы для загрузки ОС
1. В программе Config Manager выбрать справочник Терминалы;
2. В справочнике Терминалы выбрать необходимый раздел (терминал);
3. В открывшейся таблице найти подраздел Инсталляции ОС и в поле Загружать
ОС в терминал установить значение Да;
4. В поле Инсталляционный пакет ОС в раскрывающемся списке выбрать
наименование инсталляционного пакета, параметры которого были
настроены ранее в справочнике Инсталляции ОС.Страница 95
UNIPOS Terminal
Руководство инженера
Раздел 6 Инициализация терминала
После загрузки ПО и ключей при первом запуске терминала производится его
инициализация. В ходе инициализации производится диагностика, загруженного
ПО и наличие параметров. В том случае, если параметры не были загружены,
тогда производится загрузка приложения Agent, в котором необходимо
выполнить загрузку параметров для начала работы с терминалом.
При отсутствии параметров на экране терминала
отображается информационное сообщение с
предложением загрузки параметров.
По нажатию любой клавиши производится запуск
приложенияAgentдлязагрузкипараметров.
ПРИМЕЧАНИЕ: Без загрузки параметров дальнейшая работа с приложением невозможна.Страница 96
UNIPOS Terminal
Руководство инженера
Раздел 7 Настройка соединений терминала
с сервером авторизации
В дереве параметров, которое отображается на панели дерева параметров в
главном окне программы Config Manager Station, у каждого терминала имеются
две папки для настроек соединений с хостом авторизации и хостом
параметризации. В терминологии Config Manager Station хостом авторизации
называется компьютер, на котором работает программное обеспечение банка,
предоставившего платежные терминалы на торговые или сервисные
предприятия. Хостом параметризации называется компьютер, на котором
расположены папки, содержащие комплект, состощий из дистрибутива
терминальногоПОинаборапараметров для работающих с этим сервером POS
терминалов. Сервером парметрзизации может быть FTP сервер, это может
быть компьютер с работающем на нем Download Server, или это может быть
набор папок на ПК, подсоединенном к POS терминалу по COM порту и
имеющему работающую программу ConfigManagerStation.
Рисунок 40 Схема соединения терминала с сервером авторизации
ПРИМЕЧАНИЕ: Подробную информацию о работе с графическим интерфейсом программы
можно найти в документе UNIPOS Config Manager Station Руководство пользователя.
Подробную информацию по работе с программой Download Server можно найти в
документе UNIPOSDownloadServerРуководствопользователя.
В данном разделе рассматриваются все необходимые сетевые настройки
терминала для работы с хостом авторизации. Общим для всех настроек
является наличие протокола TCP/IP для передачи данных по локальным и
глобальным сетям и использование прикладных протоколов для
взаимодействия с банковскими приложениями. Отличия настроек
заключаются в использовании различных каналов передачи данных от
платежного терминала до устройства, непосредственно взаимодействующегоСтраница 97
UNIPOS Terminal
Руководство инженера
с этим терминалом (маршрутизатор, точка радиодоступа и т.д.; см. рис. 40).
7.1 Настройка Ethernet
Канал передачи данных Ethernet является наиболее распространенным для
соединения терминала с хостом авторизации. При наличии в помещениях,
где расположена точка продажи, локальной вычислительной сети Ethernet и
достаточного количества точек подключения, этот вариант является наиболее
оптимальным.
Для настройки передачи данных по Ethernet необходимо настроить
коммуникационные сети и коммуникационные шлюзы в справочнике
Коммуникационные сети,азатемвыполнить настройкивсправочникеТерминалы.
7.1.1 Коммуникационные сети
Для создания новой коммуникационной сети необходимо (см. рис. 41):
1. открыть справочник Коммуникационные сети;
2. щелкнутьправойкнопкоймышипопапкеКоммуникационные сетиивыбрать
Добавить ‘Сеть’;
3. воткрывшемсяокнеСоздание:Сетьввестинаименованиекоммуникационной
сети (например, Ethernet) и нажать кнопку OK;
4. после этого в папке Коммуникационные сети появится новый элемент.
Рисунок 41 Создание новой коммуникационной сети Ethernet
ВполеТипсоединенияпоумолчаниюбудетвыбранозначениеTCP/IP.Есливэтом
поле будет другое значение, установить TCP/IP.Страница 98
UNIPOS Terminal
Руководство инженера
7.1.2 Коммуникационные шлюзы
После создания коммуникационной сети для нее можно создавать
коммуникационные шлюзы. Для создания нового коммуникационного шлюза
необходимо(см. рис.42):
1. щелкнуть правой кнопкой мыши по папке Коммуникационные шлюзы и выбрать
пункт Добавить ‘Сетевой шлюз’;
2. в открывшемся окне Создание: Сетевой шлюз ввести наименование (например,
Новый офис) и нажать ОК;
3. воткрывшейсятаблиценапанелипараметровввестизначениявполяШлюзи
Маска подсети;
4. при необходимости ввести значения в поля Логин по умолчанию и Пароль по
умолчанию, а также нажав кнопку с многоточием в открывшемся окне Скрипт
входа в сеть или Скрипт выхода из сети ввести текст скрипта.
Рисунок 42 Создание коммуникационных шлюзов для сети Ethernet
7.1.3 Настройка соединения
После подготовки настроек для коммуникационной сети Ethernet можно
приступать к настройке соединения с хостом авторизации для терминалов.
Существуют две схемы настроек:
 соединение с использованием коммуникационных шлюзов;
 соединение с использованием уникальных настроек.
Ниже приведен порядок выполнениянастроекдлякаждойизэтихсхем.
7.1.3.1 Соединение с использованием коммуникационных шлюзов
Для настройки нового соединения терминала необходимо выполнить следующие
действия(см.рис.43):
1. щелкнуть правой кнопкой мыши на папке Список соединений и выбрать пунктСтраница 99
UNIPOS Terminal
Руководство инженера
Добавить ‘Соединение’;
2. заполнить полянапанелипараметровдлянового соединения(см.табл.6).
В обязательном порядке должны быть заполнены поля Порт терми
нала, Уникальное соединение и Шлюз. Значения для этих полей
выбираются из раскрывающегося списка. При необходимости
можно задать логин и пароль для данного соединения. В том
случае, если используются динамические IP адреса поле
Статический адрес должно оставаться пустым, если используются
статические адреса – в этом поле необходимо указать адрес.
Рисунок43 Порядоксозданияновогосоединениятерминалассерверомавторизации
ПРИМЕЧАНИЕ: При использовании DHCP и присвоении терминалу статического адреса в
сети, в значении параметра «Статический адрес» указывается 0.0.0.0 или остаётся пустым.
Таблица № 5 Параметры коммуникационного соединения терминала с хостом
авторизации (нет уникального соединения)
Наименование Тип объекта Описание
*Порт терминалаa Поле Коммуникационный разъем терминала.
Как правило у терминального устройства
несколько коммуникационных выходовдля
соединений в различных средах передачи
данных (Wi-Fi, GSM/GPRS, Landline
Modem, USB и т.д.). В раскрывающемся
списке можно выбрать один из имеющихся
коммуникационных выходов. Набор
выходов жестко задан терминальным ПО.
*Уникальное
соединение
Поле Вид соединения по шлюзу (уникальный –
Да, общий – Нет).
*Шлюз Поле Сетевой шлюз, в раскрывающемся списке
можно выбрать ссылку на один из наборов
параметров, созданных ранее в
справочнике Коммуникационные сети.Страница 100
UNIPOS Terminal
Руководство инженера
Логин Поле Имя для входа при необходимости. В случае
PPP соединения: одинаковое имя для всех
может браться из параметров шлюза
соединения; в случае уникальных имен по
терминалам необходимо указать его здесь.
Пароль Поле Пароль для входа. Аналогично имени, в
случае РРР соединения: одинаковый
пароль для всех может браться из
параметров шлюза соединения; в случае
уникальных паролей по терминалам
необходимо указать его здесь.
Протокол
аутентификации
Поле Протокол аутентификации РРР. В
раскрывающемся списке можно выбрать
одно из значений, заданных
терминальнымПО.
Статический адрес Поле Статический адрес при использовании в
сети статической адресации. При
использовании динамической адресации
параметр не заполняется.
Таймаут установки
соединения
Поле Таймаут установки соединения в секундах.
Минимальное значение 1, максимальное
значение 180.
*Параллельное
соединение
Поле Задает, будет ли использована
паралельна предустановка соединения с
хостом.
*Использовать
преддозвон
Поле Задает, будет ли использована
предустановка соединения с хостом.
a. Поле, помеченное знаком * обязательно для заполнения
7.1.3.2 Соединение с использованием уникальных настроек
В том случае, если платежный терминал используется в составе локальной сети,
используется соединение с использованием коммуникационных шлюзов. Однако,
если необходимо отдельно стоящий терминал подсоединить к глобальной сети, то
предпочтительнее использовать соединение с использованием уникальных
настроек.
Для создания нового соединения с уникальными настройками необходимо выпол
нитьследующиедействия(см.рис.43):
1. щелкнутьправойкнопкоймышинапапкеСписоксоединенийивыбратьпункт
Добавить ‘Соединение’;
2. для вновь созданного соединения в поле Уникальное соединение выбрать значениеДаизаполнитьвсенеобходимыеполядляэтогосоединения(см.табл.7).
Дляданноготипасоединениявобязательномпорядкедолжныбыть
заполнены поля Порт терминала и Уникальное соединение. В том
случае,еслитерминалубудетзаданстатическийадрес,необходимо
заполнить поля Статический адрес, Маска подсети и Шлюз. При
необходимости заполняются поля Логин и Пароль. Если для входа в
сеть и выхода из нее необходимо выполнять некую
последовательность действий, тогда в соответствующих поляхСтраница 101
UNIPOS Terminal
Руководство инженера
необходимо нажать кнопку с многоточием и в открывшемся окне
ввести текст скрипта.Страница 102
UNIPOS Terminal
Руководство инженера
Таблица№6 Параметры коммуникационного соединения терминала с хостом авторизации
(есть уникальное соединение)
Наименование Тип объекта Описание
*Порт терминалаa Поле Коммуникационный разъем терминала.
Как правило у терминального устройства
несколько коммуникационных выходовдля
соединений в различных средах передачи
данных (Wi-Fi, GSM/GPRS, Landline
Modem, USB и т.д.). В раскрывающемся
списке можно выбрать один из имеющихся
коммуникационных выходов. Набор
выходов жестко задан терминальным ПО.
*Уникальное
соединение
Поле Вид соединения по шлюзу (уникальный - Да,
общий – Нет).
*Сеть Поле Тип сети, в раскрывающемся списке можно
можно выбрать ссылку на набор
параметров, созданных ранее в справочнике
Коммуникационные сети.
Логин Поле Имя для входа при необходимости. В случае
PPP соединения: одинаковое имя для всех
может браться из параметров шлюза
соединения; в случае уникальных имен по
терминалам необходимо указать его здесь.
Пароль Поле Пароль для входа. Аналогично имени, в
случае РРР соединения: одинаковый
пароль для всех может браться из
параметров шлюза соединения; в случае
уникальных паролей по терминалам
необходимо указать его здесь.
Протокол
аутентификации
Поле Протокол аутентификации РРР. В раскрывающемся списке можно выбрать одно из
значений, заданных терминальнымПО.
Скрипт входа в сеть Поле После выбора поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Скрипт входа в сеть, в котором можно ввести
текст скрипта.
Скрипт выхода из сети Поле После выбора поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Скрипт выхода из сети, в котором можно
ввести текст скрипта.
Статический адрес Поле Статический адрес при использовании в
сети статической адресации. При
использовании динамической адресации
параметр не заполняется.
Маска подсети Поле Маска подсети для TCP/IP сетей
Шлюз Поле Межсетевой шлюз для TCP/IPсетейСтраница 103
UNIPOS Terminal
Руководство инженера
Таблица№6 Параметры коммуникационного соединения терминала с хостом авторизации
(есть уникальное соединение)
Наименование Тип объекта Описание
Таймаут установки
соединения
Поле Таймаут установки соединения в секундах.
Минимальное значение 1, максимальное
значение 180.
*Параллельное
соединение
Поле Задает, будет ли использована
паралельна предустановка соединения с
хостом.
*Использовать
преддозвон
Поле Задает, будет ли использована предустановка соединения с хостом.
a. Поле, помеченное знаком * обязательно для заполнения
7.2 Настройка Wi-Fi
Данный вариант соединения предпочтителен для подключения терминалов в тех
местах, где нет доступа к проводной локальной сети или в том случае, если
терминал необходимо перемещать с места на место для выполнения
производственных операций, например, если один терминал используется
несколькими кассирами.
Порядок настройки подключения с Wi-Fi соединением во многом схож с
порядком настройки Ethernet соединения. Здесь также необходимо сначала
создать и настроить коммуникационную сеть, затем создать и настроить
коммуникационный шлюз, и затем настроить соединение.
Рисунок 44 Создание новой коммуникационной сети WiFiСтраница 104
UNIPOS Terminal
Руководство инженера
7.2.1 Коммуникационные сети
Для создания коммуникационной сети необходимо (см. рис. 44):
1. щелкнуть правой кнопкой мыши на папке Коммуникационные сети и выбрать
Добавить ‘Сеть’;
2. в открывшемся окне Создание: Сеть ввести наименование новой сети
(например, Wi-Fi) и нажать ОК.
7.2.2 Коммуникационные шлюзы
После создания коммуникационной сети можно приступать к созданию коммуни
кационного шлюза. Для создания коммуникационного шлюза необходимо (см.
рис. 45):
 щелкнуть правой кнопкой мыши на папке Коммуникационные шлюзы и
выбрать Добавить ‘Сетевой шлюз’;
 в открывшемся окне Создание: Сетевой шлюзввести наименование нового
шлюза и затем ввести необходимые значения параметров для созданного
шлюза.
Рисунок 45 Создание коммуникационных шлюзов для сети WiFi
7.2.3 Настройка соединения
После подготовки настроек для коммуникационной сети Wi-Fi можно приступать
кнастройкесоединениясхостомавторизациидлятерминалов.Существуютдве
схемы настроек:
 соединение с использованием коммуникационных шлюзов;
 соединениесиспользованиемуникальныхнастроек.Страница 105
UNIPOS Terminal
Руководство инженера
Нижеприведенпорядоквыполнениянастроекдлякаждойизэтихсхем.Страница 106
UNIPOS Terminal
Руководство инженера
7.2.3.1 Соединение с использованием коммуникационных шлюзов
Для настройки нового соединения терминала необходимо выполнить следующие
действия:
1. щелкнутьправойкнопкоймышинапапкеСписоксоединенийивыбратьпункт
Добавить ‘Соединение’;
2. заполнить полянапанелипараметровдлянового соединения(см.табл.9).
Вобязательномпорядкедолжныбытьзаполненыполя:
• Порт терминала,
• Уникальное соединение,
• Шлюз.
Таблица № 7 Параметры коммуникационного соединения терминала Wi-Fi (общее
соединение)
Наименование Тип объекта Описание
*Порт терминалаa Поле Коммуникационный разъем терминала.
Как правило у терминального устройства
несколько коммуникационных выходовдля
соединений в различных средах передачи
данных (Wi-Fi, GSM/GPRS, Landline
Modem, USB и т.д.). В раскрывающемся
списке можно выбрать один из имеющихся
коммуникационных выходов. Набор
выходов жестко задан терминальным ПО.
*Уникальное
соединение
Поле Вид соединения по шлюзу (уникальный –
Да, общий – Нет).
*Шлюз Поле Сетевой шлюз, в раскрывающемся списке
можно выбрать ссылку на один из наборов
параметров, созданных ранее в
справочнике Коммуникационные сети.
Логин Поле Имя для входа при необходимости. В случае
PPP соединения: одинаковое имя для всех
может браться из параметров шлюза
соединения; в случае уникальных имен по
терминалам необходимо указать его здесь.
Пароль Поле Пароль для входа. Аналогично имени, в
случае РРР соединения: одинаковый
пароль для всех может браться из
параметров шлюза соединения; в случае
уникальных паролей по терминалам
необходимо указать его здесь.
Протокол
аутентификации
Поле Протокол аутентификации РРР. В
раскрывающемся списке можно выбрать
одно из значений, заданных
терминальным ПО.
Статический адрес Поле Статический адрес при использовании в
сети статической адресации. При
использовании динамической адресации
параметр не заполняется.Страница 107
UNIPOS Terminal
Руководство инженера
Таймаут установки
соединения
Поле Таймаут установки соединения в секундах.
Минимальное значение 1, максимальное
значение 180.
*Параллельное
соединение
Поле Задает, будет ли использована
паралельна предустановка соединения с
хостом.
*Использовать
преддозвон
Поле Задает, будет ли использована
предустановка соединения с хостом.
SSID Поле Идентификатор точки доступа SSID
Номер канала Поле Номер радиочастотного соединения канала
Wi-Fi соединения.
Схема шифрации Поле Тип криптозащиты канала. В зависимости
от выбранного в раскрывающемся списке
значения могут появиться дополнительные
поля:
• Не используется – при этом значении
дополнительных полей нет.
• WEP 64 bit OPEN, WEP 64 bit SHARED,
WEP 128 bit OPEN, WEP 128 bit
SHARED – для этих значений появятся
следующие поля: Номер ключа, Ключ
WEP 1, Ключ WEP 2, Ключ WEP 3,
Ключ WEP 4.
• WPA или WPA 2 – для этих ключей
появятся следующее поле: Ключ защиты
канала WPA.
a. Поле, помеченное знаком * обязательно для заполнения
Значения для этих полей выбираются из раскрывающегося списка. При
необходимости можно задать логин и пароль для данного соединения. В том
случае,если используются динамические IP адреса поле Статический адрес должно
оставаться пустым, если используются статические адреса – в этом поле
необходимоуказать адрес.
Далее необходимо заполнить поля для Wi-Fi соединения. В том случае, если
используется схема шифрации, необходимо ввести ключ в поле, которое
появится под полем Схема шифрации, когда в нем будет выбрана одна из схем
шифрации вместо значения Не используется.
7.2.3.2 Соединение с использованием уникальных настроек
Для настройки новогосоединения суникальными настройками необходимо вы
полнитьследующиедействия(см.рис.42):
1. щелкнуть правой кнопкой мыши на папке Список соединений и выбрать
пункт Добавить ‘Соединение’;
2. для вновь созданного соединения в поле Уникальное соединение выбрать значение Да и заполнить все необходимые поля для этого соединения (см. табл.
10).
Для данного типа соединения в обязательном порядке должны быть заполнены
поля Порт терминала и Уникальное соединение и Сеть. В том случае, если терминалуСтраница 108
UNIPOS Terminal
Руководство инженера
будет задан статический адрес, необходимо заполнить поля Статический адрес,
Маска подсети и Шлюз. При необходимости заполняются поля Логин и Пароль.
Если для входа в сеть и выхода из нее необходимо выполнять некую последова
тельность действий, тогда в соответствующих полях необходимо нажать кнопку с
многоточием и в открывшемся окне ввести текст скрипта.Страница 109
UNIPOS Terminal
Руководство инженера
Таблица № 8 Параметры коммуникационного соединения терминала Wi-Fi (уникальное
соединение)
Наименование Тип объекта Описание
*Порт терминалаa Поле Коммуникационный разъем терминала.
Как правило у терминального устройства
несколько коммуникационных выходовдля
соединений в различных средах передачи
данных (Wi-Fi, GSM/GPRS, Landline
Modem, USB и т.д.). В раскрывающемся
списке можно выбрать один из имеющихся
коммуникационных выходов. Набор
выходов жестко задан терминальным ПО.
*Уникальное
соединение
Поле Вид соединения по шлюзу (уникальный –
Да, общий – Нет).
*Сеть Поле Тип сети, в раскрывающемся списке можно
можно выбрать ссылку на набор
параметров, созданных ранее в справочнике
Коммуникационные сети.
Логин Поле Имя для входа при необходимости. В случае
PPP соединения: одинаковое имя для всех
может браться из параметров шлюза
соединения; в случае уникальных имен по
терминалам необходимо указать его здесь.
Пароль Поле Пароль для входа. Аналогично имени, в
случае РРР соединения: одинаковый
пароль для всех может браться из
параметров шлюза соединения; в случае
уникальных паролей по терминалам
необходимо указать его здесь.
Протокол
аутентификации
Поле Протокол аутентификации РРР. В
раскрывающемся списке можно выбрать
одно из значений, заданных
терминальнымПО.
Скрипт входа в сеть Поле После выбора поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Скрипт входа в сеть, в котором можно ввести
текст скрипта.
Скрипт выхода из сети Поле После выбора поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Скрипт выхода из сети, в котором можно
ввести текст скрипта.
Статический адрес Поле Статический адрес при использовании в
сети статической адресации. При
использовании динамической адресации
параметр не заполняется.
Маска подсети Поле Маска подсети для TCP/IP сетей
Шлюз Поле Межсетевой шлюз для TCP/IPсетейСтраница 110
UNIPOS Terminal
Руководство инженера
Таблица № 8 Параметры коммуникационного соединения терминала Wi-Fi (уникальное
соединение)
Наименование Тип объекта Описание
Таймаут установки
соединения
Поле Таймаут установки соединения в секундах.
Минимальное значение 1, максимальное
значение 180.
*Параллельное
соединение
Поле Задает, будет ли использована
паралельна предустановка соединения с
хостом.
*Использовать
преддозвон
Поле Задает, будет ли использована предустановка соединения с хостом.
SSID Поле Идентификатор точки доступа SSID
Номер канала Поле Номер радиочастотного соединенияканала
Wi-Fi соединения.
Схема шифрации Поле Тип криптозащиты канала. В зависимости
от выбранного в раскрывающемся списке
значения могут появиться дополнительные
поля:
• Не используется – при этом значении
дополнительных полей нет.
• WEP 64 bit OPEN, WEP 64 bit SHARED,
WEP 128 bit OPEN, WEP 128 bit
SHARED – для этих значений появятся
следующие поля: Номер ключа, Ключ
WEP 1, Ключ WEP 2, Ключ WEP 3,
Ключ WEP 4.
• WPA или WPA 2 – для этих ключей
появятся следующее поле: Ключ защиты
канала WPA.
a. Поле, помеченное знаком * обязательно для заполнения
После настройки общих параметров сети необходимо настроить Wi-Fi
соединение. В том случае, если будет выбрана какая–либо схема шифрации,
под полем Схемашифрациипоявитсяполе,вкоторое необходимобудетввести
ключ,соответствующейвыбраннойсхеме шифрации.
7.3 Настройка COM-порта по PPP
В данном подразделе дано описание настроек терминала для его соединения с сер
вером авторизации через интерфейс RS–232. Для настройки необходимо сначала
создать и настроить коммуникационную сеть, затем создать и настроить
коммуникационный шлюз, и затем настроить соединение.Страница 111
UNIPOS Terminal
Руководство инженера
7.3.1 Коммуникационные сети
Для создания коммуникационной сети необходимо (см. рис. 46):
Рисунок 46. Создание новой коммуникационной сети RS-232
1. щелкнутьправойкнопкоймышинапапкеКоммуникационные сетиивыбрать
Добавить ‘Сеть’;
2. в открывшемся окне Создание: Сеть ввести наименование новой сети
(например, RS-232) и нажать ОК.
7.3.2 Коммуникационные шлюзы
После создания коммуникационной сети можно приступать к созданию коммуни
кационного шлюза. Для создания коммуникационного шлюза необходимо (см.
рис.47):
1. щелкнуть правой кнопкой мыши на папке Коммуникационные шлюзы и
выбрать Добавить ‘Сетевой шлюз’;
2. в открывшемся окне Создание: Сетевой шлюз ввести наименование нового
шлюза и затем ввести необходимые значения параметров для созданного
шлюза.Страница 112
UNIPOS Terminal
Руководство инженера
Рисунок 47. Создание коммуникационных шлюзов для сети RS-232
7.3.3 Настройка соединения
После подготовки настроек для коммуникационной сети можно приступать к на
стройке соединения с хостом авторизации для терминалов. Существуют две
схемы настроек: соединение с использованием коммуникационных шлюзов и
соединение с использованием уникальных настроек. Ниже приведен порядок
выполнения настроек для каждой из этих схем.
7.3.3.1 Соединение с использованием коммуникационных шлюзов
Для настройки нового соединения терминала необходимо выполнить следующие
действия:
1. щелкнуть правой кнопкой мыши на папке Список соединений и выбрать
пункт Добавить ‘Соединение’;
2. заполнить поля на панели параметров для нового соединения. Для этого в поле
ПорттерминалаустановитьзначениеRS232,послечегонапанелипараметров
отобразится необходимый набор параметров (см. табл. 11).
Таблица № 9 Параметры коммуникационного соединения терминала для COM порта по
PPP (общее соединение)
Наименование Тип объекта ОписаниеСтраница 113
UNIPOS Terminal
Руководство инженера
*Порт терминалаa Поле Коммуникационный разъем терминала.
Как правило у терминального устройства
несколько коммуникационных выходов для
соединений в различных средах передачи
данных (Wi-Fi, GSM/GPRS, Landline Modem,
USB и т.д.). В раскрывающемся списке
можно выбрать один из имеющихся
коммуникационных выходов. Набор
выходов жестко задан терминальным ПО.
*Уникальное
соединение
Поле Вид соединения по шлюзу (уникальный –
Да, общий – Нет).
*Шлюз Поле Сетевой шлюз, в раскрывающемся списке
можно выбрать ссылку на один из наборов
параметров, созданных ранее в
справочнике Коммуникационные сети.
Логин Поле Имя для входа при необходимости. В случае
PPP соединения: одинаковое имя для всех
может браться из параметров шлюза
соединения; в случае уникальных имен по
терминалам необходимо указать его здесь.
Пароль Поле Пароль для входа. Аналогично имени, в
случае РРР соединения: одинаковый
пароль для всех может браться из
параметров шлюза соединения; в случае
уникальных паролей по терминалам
необходимо указать его здесь.
Протокол
аутентификации
Поле Протокол аутентификации РРР. В
раскрывающемся списке можно выбрать
одно из значений, заданных
терминальнымПО.
Статический адрес Поле Статический адрес при использовании в
сети статической адресации. При
использовании динамической адресации
параметр не заполняется.
Таймаут установки
соединения
Поле Таймаут установки соединения в секундах.
Минимальное значение 1, максимальное
значение 180.
*Использовать
преддозвон
Поле Задает, будет ли использована предустановка соединения с хостом.
Скорость Поле В раскрывающемся списке необходимо
выбрать нужное значение скорости
передачи данных через СОМ порт.
Параметры четности Поле В раскрывающемся списке необходимо
выбрать параметр протокола.
Протокол Поле В раскрывающемся списке необходимо
выбрать тип протокола передачи данных:
Асинхронный или Синхронный.Страница 114
UNIPOS Terminal
Руководство инженера
Внешнее устройство Поле В данном поле необходимо выбрать, будет
ли использоваться внешний модем. В том
случае, если выбрано значение Внешний
модем, становятся доступными
дополнительные поля (рассматриваются
ниже).
Тип набора номера Поле Можно выбрать одно из трех значений: По
умолчанию, Пульсовый, Тоновый.
Префикс Поле Дополнительный префикс телефона для
выхода в городскую сеть при наличии в
месте установки внутренней АТС.
Строка инициализации Поле Параметры инициализации модема. При
использовании разных модемов может
возникать необходимость подстройки их
параметров.
APN-ы Поле APN (Access Point Name), в терминологии
GPRS — символическое название точки
доступа, через которую пользователь может
иметь доступ к запрошенному типу услуги
(WAP, Internet, MMS).
Наименование Поле Наименование APN, отображаемое в меню
терминала
Значение Поле Значение APN. При использовании разных
модемов и операторов может возникнуть
необхождимость подстройки их
параметров.
a. Поле, помеченное знаком * обязательно для заполнения
7.3.3.2 Соединение с использованием уникальных настроек
Для настройки новогосоединения суникальными настройками необходимо вы
полнитьследующиедействия(см.рис.45):
1. щелкнутьправойкнопкоймышинапапкеСписоксоединенийивыбратьпункт
Добавить ‘Соединение’;
2. для вновь созданного соединения в поле Уникальное соединение выбрать
значение Да и заполнить все необходимые поля для этого соединения (см.
табл.12).
Для данного типа соединения в обязательном порядке должны быть заполнены
поля Порт терминала и Уникальное соединение и Сеть. В том случае, если терминалу
будет задан статический адрес, необходимо заполнить поля Статический адрес,
Маска подсети и Шлюз. При необходимости заполняются поля Логин и Пароль.
Если для входа в сеть и выхода из нее необходимо выполнять некую последова
тельность действий, тогда в соответствующих полях необходимо нажать кнопку с
многоточием и в открывшемся окне ввести текст скрипта.
После настройки общих параметров сети необходимо ввести параметры RS-232
соединение.
Таблица № 10 Параметры коммуникационного соединения терминала для COM порта по
PPP (уникальное соединение)Страница 115
UNIPOS Terminal
Руководство инженера
Наименование Тип объекта Описание
*Порт терминалаa Поле Коммуникационный разъем терминала.
Как правило у терминального устройства
несколько коммуникационных выходовдля
соединений в различных средах передачи
данных (Wi-Fi, GSM/GPRS, Landline
Modem, USB и т.д.). В раскрывающемся
списке можно выбрать один из имеющихся
коммуникационных выходов. Набор
выходов жестко задан терминальным ПО.
*Уникальное
соединение
Поле Вид соединения по шлюзу (уникальный –
Да, общий – Нет).
*Сеть Поле Тип сети, в раскрывающемся списке можно
можно выбрать ссылку на набор
параметров, созданных ранее в справочнике
Коммуникационные сети.
Логин Поле Имя для входа при необходимости. В случае
PPP соединения: одинаковое имя для всех
может браться из параметров шлюза
соединения; в случае уникальных имен по
терминалам необходимо указать его здесь.
Пароль Поле Пароль для входа. Аналогично имени, в
случае РРР соединения: одинаковый
пароль для всех может браться из
параметров шлюза соединения; в случае
уникаль- ных паролей по терминалам
необходимо указать его здесь.
Протокол
аутентификации
Поле Протокол аутентификации РРР. В
раскрывающемся списке можно выбрать
одно из значений, заданных
терминальнымПО.
Скрипт входа в сеть Поле После выбора поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Скрипт входа в сеть, в котором можно ввести
текст скрипта.
Скрипт выхода из сети Поле После выбора поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Скрипт выхода из сети, в котором можно
ввести текст скрипта.
Статический адрес Поле Статический адрес при использовании в
сети статической адресации. При
использовании динамической адресации
параметр не заполняется.
Маска подсети Поле Маска подсети для TCP/IP сетей
Шлюз Поле Межсетевой шлюз для TCP/IPсетей
Таймаут установки
соединения
Поле Таймаут установки соединения в секундах.
Минимальное значение 1, максимальное
значение 180.Страница 116
UNIPOS Terminal
Руководство инженера
*Использовать
преддозвон
Поле Задает, будет ли использована
предустановка соединения с хостом.
Скорость Поле В раскрывающемся списке необходимо
выбрать нужное значение скорости
передачи данных через СОМ порт.
Параметры четности Поле В раскрывающемся списке необходимо
выбрать параметр протокола.
Протокол Поле В раскрывающемся списке необходимо
выбрать тип протокола передачи данных:
Асинхронный или Синхронный.
Внешнее устройство Поле В данном поле необходимо выбрать, будет
ли использоваться внешний модем. В том
случае, если выбрано значение Внешний
модем, становятся доступными
дополнительные поля (рассматриваются
ниже).
Тип набора номера Поле Можно выбрать одно из трех значений: По
умолчанию, Пульсовый, Тоновый.
Префикс Поле Дополнительный префикс телефона для
выхода в городскую сеть при наличии в
месте установки внутренней АТС.
Строка инициализации Поле Параметры инициализации модема. При
использовании разных модемов может
возникать необходимость подстройки их
параметров.
APN-ы Поле APN (Access Point Name), в терминологии
GPRS — символическое название точки
доступа, через которую пользователь может
иметь доступ к запрошенному типу услуги
(WAP, Internet, MMS).
Наименование Поле Наименование APN, отображаемое в меню
терминала
Значение Поле Значение APN. При использовании разных
модемов и операторов может возникнуть
необхождимость подстройки их
параметров.
Региональный пул
номеров
Таблица Список региональных телефонных номеров
шлюза, разделенных по телефонным зонам.
Все телефонные зоны должны находиться
или в одном регионе или быть глобаль
ными.
Зональные телефонные
номера
Таблица Содержит параметры телефонных номеров
для заданной зоны.
Телефонная зона Поле В раскрывающемся списке можно выбрать
ссылку на набор параметров, созданных
ранее в справочнике Телефонные зоны.Страница 117
UNIPOS Terminal
Руководство инженера
Список телефонных
номеров
Поле При выборе поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Список телефонных номеров, в котором
необходимо ввести телефонные номера.
a. Поле, помеченное знаком * обязательно для заполнения
7.4 Настройка GSM/GPRS по PPP
В данном подразделе дано описание настроек терминала для его соединения с сер
веромавторизациисиспользованиемканалапередачиданныхGSM/GPRS.Для
настройки необходимо сначала создать и настроить коммуникационную сеть,
затем добавить телефонную зону, затем создать и настроить
коммуникационный шлюз, и затем настроить соединение.
7.4.1 Коммуникационные сети
Для создания коммуникационной сети необходимо (см. рис. 48):
1. щелкнутьправойкнопкоймышинапапкеКоммуникационные сетиивыбрать
Добавить ‘Сеть’;
2. в открывшемся окне Создание: Сеть ввести наименование новой сети
(например, GSM GPRS) и нажать ОК.
Рисунок 48. Создание новой коммуникационной сети GSM (GPRS)
7.4.2 Телефонные зоны
Длясозданиятелефоннойзонынеобходимо(см.рис.49):Страница 118
UNIPOS Terminal
Руководство инженера
Рисунок 49. Создание новой телефонной зоны GSM (GPRS)
1. щелкнуть правой кнопкой мыши по папке Телефонные зоны и выбрать
Добавить ‘Зона’;
2. затем в открывшемся окне Создание: Зона ввести наименование и нажать ОК.
7.4.3 Коммуникационные шлюзы
После создания телефонной зоны можно приступать к созданию
коммуникационного шлюза. Для создания коммуникационного шлюза
необходимо:
1. щелкнуть правой кнопкой мыши на папке Коммуникационные шлюзы и выбрать
Добавить ‘Сетевой шлюз’ и в открывшемся окне Создание: Сетевой шлюз ввести
наименование новогошлюза.
2. щелкнуть правой кнопкой мыши на папке Региональный пул номеров и
выбрать Добавить ‘Зональные телефонные номера’;
3. на панели параметров выбрать созданный ранее коммуникационный шлюз (в
нашем примере GSM Modem (PPP)) и заполнить поля Телефонная зона и Список
телефонных номеров. При необходимости заполнить поля Логин по–умолчанию и
Пароль по–умолчанию.
7.4.4 Настройка соединения
Послеподготовкинастроекдлякоммуникационнойсетиможноприступатькна
стройке соединения с хостом авторизации для терминалов. Существуют две
схемы настроек: соединение с использованием коммуникационных шлюзов и
соединение с использованием уникальных настроек. Ниже приведен порядок
выполнениянастроекдлякаждойизэтихсхем.
7.4.4.1 Соединение с использованием коммуникационных шлюзов
Для настройки нового соединения терминала необходимо выполнить следующие
действия(см.рис.50):Страница 119
UNIPOS Terminal
Руководство инженера
Рисунок 50. Создание нового соединения для сети GSM (GPRS)
1. щелкнуть правой кнопкой мыши на папке Список соединений и выбрать
пункт Добавить ‘Соединение’;
2. заполнитьполянапанелипараметровдляновогосоединения.Дляэтоговполе
Порт Терминала необходимо ввести значение GSM/GPRS, после чего отобразятся соответствующие поля, в которые необходимо ввести значения параметров (см. табл. 13).
Таблица № 11 Параметры коммуникационного соединения терминала для GSM/GPRS
соединения поPPP (общеесоединение)
Наименование Тип объекта Описание
*Порт терминалаa Поле Коммуникационный разъем терминала.
Как правило у терминального устройства
несколько коммуникационных выходовдля
соединений в различных средах передачи
данных (Wi-Fi, GSM/GPRS, Landline
Modem, USB и т.д.). В раскрывающемся
списке можно выбрать один из имеющихся
коммуникационных выходов. Набор
выходов жестко задан терминальным ПО.
*Уникальное
соединение
Поле Вид соединения по шлюзу (уникальный –
Да, общий – Нет).
*Шлюз Поле Сетевой шлюз, в раскрывающемся списке
можно выбрать ссылку на один из наборов
параметров, созданных ранее в
справочнике Коммуникационные сети.
Логин Поле Имя для входа при необходимости. В случае
PPP соединения: одинаковое имя для всех
может браться из параметров шлюза
соединения; в случае уникальных имен по
терминалам необходимо указать его здесь.Страница 120
UNIPOS Terminal
Руководство инженера
Пароль Поле Пароль для входа. Аналогично имени, в
случае РРР соединения: одинаковый
пароль для всех может браться из
параметров шлюза соединения; в случае
уникальных паролей по терминалам
необходимо указать его здесь.
Протокол
аутентификации
Поле Протокол аутентификации РРР. В раскрывающемся списке можно выбрать одно из
значений, заданных терминальнымПО.
Статический адрес Поле Статический адрес при использовании в
сети статической адресации. При использовании динамической адресации параметр
не заполняется.
Таймаут установки
соединения
Поле Таймаут установки соединения в секундах.
Минимальное значение 1, максимальное
значение 180.
*Параллельное
соединение
Поле Задает, будет ли использована
паралельна предустановка соединения с
хостом.
*Использовать
преддозвон
Поле Задает, будет ли использована
предустановка соединения с хостом.
Удержангие GPRS
соединения
Поле Задает, будет ли использована
удержание GPRS соединения с
провайдером.
Скорость Поле В раскрывающемся списке необходимо
выбрать нужное значение скорости
передачи данных через СОМ порт.
Параметры четности Поле В раскрывающемся списке необходимо
выбрать параметр протокола.
Протокол Поле В раскрывающемся списке необходимо
выбрать тип протокола передачи данных:
Асинхронный или Синхронный.
Внешнее устройство Поле В данном поле необходимо выбрать, будет
ли использоваться внешний модем. В том
случае, если выбрано значение Внешний
модем, становятся доступными дополнительные поля (рассматриваютсяниже).
Тип набора номера Поле Можно выбрать одно из трех значений: По
умолчанию, Пульсовый, Тоновый.
Префикс Поле Дополнительный префикс телефона для
выхода в городскую сеть при наличии в
месте установки внутренней АТС.
Строка инициализации Поле Параметры инициализации модема. При
использовании разных модемов может
возникать необходимость подстройки их
параметров.
Номер слота SIM карты Поле Позволяет выбрать слот SIM карты.
Запрос баланса SIM
карты
Поле Указывается USSD номер для проверки
баланса лицевого счета SIM карты.Страница 121
UNIPOS Terminal
Руководство инженера
APN-ы Поле APN (Access Point Name), в терминологии
GPRS — символическое название точки
доступа, через которую пользователь может
иметь доступ к запрошенному типу услуги
(WAP, Internet, MMS).
Наименование Поле Наименование APN, отображаемое в меню
терминала
Значение Поле Значение APN. При использовании разных
модемов и операторов может возникнуть
необхождимость подстройки их
параметров.
a. Поле, помеченное знаком * обязательно для заполнения
7.4.4.2 Соединение с использованием уникальных настроек
Для настройки новогосоединения суникальными настройками необходимо вы
полнитьследующиедействия(см.рис.50):
1. щелкнуть правой кнопкой мыши на папке Список соединений и выбрать
пункт Добавить ‘Соединение’;
2. для вновь созданного соединения в поле Уникальное соединение выбрать значениеДаизаполнитьвсенеобходимыеполядляэтогосоединения(см.табл.14).
Для данного типа соединения в обязательном порядке должны быть заполнены
поля Порт терминала и Уникальное соединение и Сеть. В том случае, если терминалу
будет задан статический адрес, необходимо заполнить поля Статический адрес,
Маска подсети и Шлюз. При необходимости заполняются поля Логин и Пароль.
Если для входа в сеть и выхода из нее необходимо выполнять некую
последовательность действий, тогда в соответствующих полях необходимо
нажать кнопку с многоточием и в открывшемся окне ввести текст скрипта.
Для настройки регионального пула номеров необходимо щелкнуть правой
кнопкой мыши на поле Региональный пул номеров и выбрать Добавить ‘Зональные телефонные номера’ (см. рис. 51) и затем заполнить появившиеся поля Телефонная зона
и Список телефонных номеров.Страница 122
UNIPOS Terminal
Руководство инженера
Таблица № 12 Параметры коммуникационного соединения терминала для GSM/GPRS
соединения по PPP (уникальное соединение)
Наименование Тип объекта Описание
*Порт терминалаa Поле Коммуникационный разъем терминала.
Как правило у терминального устройства
несколько коммуникационных выходовдля
соединений в различных средах передачи
данных (Wi-Fi, GSM/GPRS, Landline
Modem, USB и т.д.). В раскрывающемся
списке можно выбрать один из имеющихся
коммуникационных выходов. Набор
выходов жестко задан терминальным ПО.
*Уникальное
соединение
Поле Вид соединения по шлюзу (уникальный –
Да, общий – Нет).
*Сеть Поле Тип сети, в раскрывающемся списке можно
можно выбрать ссылку на набор
параметров, созданных ранее в справочнике
Коммуникационные сети.
Логин Поле Имя для входа при необходимости. В случае
PPP соединения: одинаковое имя для всех
может браться из параметров шлюза
соединения; в случае уникальных имен по
терминалам необходимо указать его здесь.
Пароль Поле Пароль для входа. Аналогично имени, в
случае РРР соединения: одинаковый
пароль для всех может браться из
параметров шлюза соединения; в случае
уникальных паролей по терминалам
необходимо указать его здесь.
Протокол
аутентификации
Поле Протокол аутентификации РРР. В
раскрывающемся списке можно выбрать
одно из значений, заданных
терминальнымПО.
Скрипт входа в сеть Поле После выбора поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Скрипт входа в сеть, в котором можно ввести
текст скрипта.
Скрипт выхода из сети Поле После выбора поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Скрипт выхода из сети, в котором можно
ввести текст скрипта.
Статический адрес Поле Статический адрес при использовании в
сети статической адресации. При
использовании динамической адресации
параметр не заполняется.
Маска подсети Поле Маска подсети для TCP/IP сетей
Шлюз Поле Межсетевой шлюз для TCP/IPсетейСтраница 123
UNIPOS Terminal
Руководство инженера
Таймаут установки
соединения
Поле Таймаут установки соединения в секундах.
Минимальное значение 1, максимальное
значение 180.
*Параллельное
соединение
Поле Задает, будет ли использована
паралельна предустановка соединения с
хостом.
*Использовать
преддозвон
Поле Задает, будет ли использована
предустановка соединения с хостом.
Удержангие GPRS
соединения
Поле Задает, будет ли использована
удержание GPRS соединения с
провайдером.
Скорость Поле В раскрывающемся списке необходимо
выбрать нужное значение скорости
передачи данных через СОМ порт.
Параметры четности Поле В раскрывающемся списке необходимо
выбрать параметр протокола.
Протокол Поле В раскрывающемся списке необходимо
выбрать тип протокола передачи данных:
Асинхронный или Синхронный.
Внешнее устройство Поле В данном поле необходимо выбрать, будет
ли использоваться внешний модем. В том
случае, если выбрано значение Внешний
модем, становятся доступными
дополнительные поля (рассматриваются
ниже).
Тип набора номера Поле Можно выбрать одно из трех значений: По
умолчанию, Пульсовый, Тоновый.
Префикс Поле Дополнительный префикс телефона для
выхода в городскую сеть при наличии в
месте установки внутренней АТС.
Строка инициализации Поле Параметры инициализации модема. При
использовании разных модемов может
возникать необходимость подстройки их
параметров.
Номер слота SIM карты Поле Позволяет выбрать слот SIM карты.
Запрос баланса SIM
карты
Поле Указывается USSD номер для проверки
баланса лицевого счета SIM карты.
APN-ы Поле APN (Access Point Name), в терминологии
GPRS — символическое название точки
доступа, через которую пользователь может
иметь доступ к запрошенному типу услуги
(WAP, Internet, MMS).
Наименование Поле Наименование APN, отображаемое в меню
терминала
Значение Поле Значение APN. При использовании разных
модемов и операторов может возникнуть
необхождимость подстройки их
параметров.
Региональный пул
номеров
Таблица Список региональных телефонных номеров
шлюза, разделенных по телефонным зонам.
Все телефонные зоны должны находиться
или в одном регионе или быть глобаль
ными.Страница 124
UNIPOS Terminal
Руководство инженера
Зональные телефонные
номера
Таблица Содержит параметры телефонных номеров
для заданной зоны.
Телефонная зона Поле В раскрывающемся списке можно выбрать
ссылку на набор параметров, созданных
ранее в справочнике Телефонные зоны.
Список телефонных
номеров
Поле При выборе поля в правой его части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Список телефонных номеров, в котором
необходимо ввести телефонные номера.
a. Поле, помеченное знаком * обязательно для заполнения
Рисунок 51. Добавление зональных телефонных номеровСтраница 125
UNIPOS Terminal
Руководство инженера
Раздел 8 Настройкасоединенийтерминала с
сервером параметризации
Для настройки сетевых параметров терминалов, позволяющих общаться с
сервером параметризации, используется справочник Общие установки. В этом
справочнике настраиваются параметры соединения для каждого сервера, с
которым может взаимодействовать терминал для загрузки ПО и параметров.
Единицей настройки является программа, FTP сервер и/или Download Server.
ПРИМЕЧАНИЕ: В настоящее время сервером параметризации является Download Server,
однако в перспективе для этих функций могут быть созданы и другие программы.
В стандартной схеме обычно используются один сервер параметризации и один
FTP сервер, расположенных на различных компьютерах (см. рис. 54). Однако по
желанию эксплуатирующей организации обе эти программы могут быть
расположены на одном компьютере, а также можно использовать несколько
серверов параметризации и FTP серверов, которые могут быть расположены в
различных сетях передачи данных.
Рисунок 54
В свою очередь настройки терминала (справочник Терминалы) позволяют
установить соединение как с одним сервером, так и с несколькими или всеми
серверами, указанными в справочнике Общие установки. Для того, чтобы
терминал мог взаимодействовать с этими серверами, для каждого сервера
должен быть настроен Вход сервера конфигурации.
Для настройки входа сервера конфигурации необходимо выполнить следующие
действия(см.рис.55):
1. щелкнутьправойкнопкоймышинапапкеВходы сервера конфигурацийи
выбрать Добавить‘Вход’;
2. открыть вновь созданный вход, щелкнуть правой кнопкой мыши на папке
Список портов и выбрать Добавить ‘Порт’;Страница 126
UNIPOS Terminal
Руководство инженера
3. щелкнуть мышкой на символе созданного входа и в открывшейся таблице
ввести необходимыепараметры.
Рисунок 55
Имеется возможность создать неограниченное количество входов сервера
конфигураций.Длякаждоговходазадаютсянетолькопротоколобмена,типсети
и список портов, но и файл с серверным SSL/TLS сертификатом. Затем POS
терминал можно подключить к одному, нескольким или всем созданным
входам в справочнике Терминалы в разделе Соединение с сервером параметризации,
выбирая в поле Вход враскрывающемся списке ссылку на тот или иной вход,
созданный в справочнике Общие установки.
Настройка коммуникационных сетей, телефонных зон, коммуникационных
шлюзов и соединения платежного терминала с сервером параметризации
аналогичны настройкам, проводимым для соединения терминала с сервером
авторизации.
ПРИМЕЧАНИЕ: Необходимо помнить, что значения, содержащиеся в раскрывающемся списке
поля Сеть, задаются в справочнике Коммуникационные сети. При этом с выбранной сетью
могутвзаимодействоватьтолькотешлюзы,которыеприсутствуютвданнойсети(папка
Коммуникационные шлюзы справочника Коммуникационные сети). В том случае, если для
сервера конфигурации будет задана одна сеть, а в терминалах будут заданы шлюзы из
другой сети, то все эти терминалы с этим сервером конфигурации работать не смогут.Страница 127
UNIPOS Terminal
Руководство инженера
Для создания нового наименования операции необходимо выполнить следующие
действия(см.рис.56):
Рисунок 56
1. Открыть справочник Общие установки;
2. В справочнике Общие установки щелкнуть правой кнопкой мыши на папке
Наименование операции ивыбрать Добавить ‘Команда’;
3. В открывшемся окне Создание: Команды в раскрывающемся списке выбрать
наименование изменяемой команды и нажать ОК;
4. Воткрывшейсятаблицезаполнить поляНовое имя на дисплее для операции и
Новое имя на чеке для операции.Страница 128
UNIPOS Terminal
Руководство инженера
Раздел 9 Настройка коммуникаций с кассой
Для совместного использования платежного терминала с кассой предполагается
подключениеэтоготерминалаккассеспомощьюпроводных илибеспроводных
интерфейсов. В процессе передачи данных терминал взаимодействует с банком
через кассу, используя имеющиеся у кассы подключения к каналам передачи
данных.
Для обеспечения работы платежного терминала с кассой необходимо в
справочнике Терминалы настроить параметры в подразделе Коммуникации с кассой
(см. рис.57).
ПРИМЕЧАНИЕ: Для появления подраздела Коммуникации с кассой, необходимо в блоке
SmartSale в пункте Взаимодействие с кассой одно из двух значений: Касса запускает операцию
или Касса или терминал запускает операцию.
Рисунок 57
Сначала необходимо выбрать значение поля Порт терминала. В зависимости от
выбранного значения будет доступен тот или иной набор полей для настройки
параметров соответствующего канала передачи данных.
Порт терминала – RS232:
• Связь с банком – из раскрывающегося списка можно выбрать одно из двух
значений: Использовать коммуникации терминала и Использовать
коммуникации кассы;
• Использование SSL без участия кассы – SSL шифрование между терминалом и
хостом без использования кассового ПО. Значения: Да/ Нет;
• Размер SA пакета – ввести число, означающее максимальную длину (в
байтах) отправляемых на кассу SA пакетов;
• Скорость – в раскрывающемся списке необходимо выбрать скорость
обмена данных по COM порту.Страница 129
UNIPOS Terminal
Руководство инженера
Порт терминала – USB:
• Связь с банком – из раскрывающегося списка можно выбрать одно из двух
значений: Использовать коммуникации терминала и Использовать
коммуникации кассы;
• Использование SSL без участия кассы – SSL шифрование между терминалом и
хостом без использования кассового ПО. Значения: Да/ Нет;
• Размер SA пакета – ввести число, означающее максимальную длину (в
байтах) отправляемых на кассу SA пакетов.
Порт терминала – 10BaseT (Ethernet):
• Номер порта для входящих соединений – в поле необходимо ввести значение
номера порта;
• Связь с банком – из раскрывающегося списка можно выбрать одно из двух
значений: Использовать коммуникации терминала и Использовать
коммуникации кассы;
• Использование SSL без участия кассы – SSL шифрование между терминалом и
хостом без использования кассового ПО. Значения: Да/ Нет;
• Размер SA пакета – ввести число, означающее максимальную длину (в
байтах) отправляемых на кассу SA пакетов;
Порт терминала – Wi–Fi:
• Номер порта для входящих соединений – в поле необходимо ввести значение
номера порта;
• Связь с банком – из раскрывающегося списка можно выбрать одно из двух
значений: Использовать коммуникации терминала и Использовать
коммуникации кассы;
• Использование SSL без участия кассы – SSL шифрование между терминалом и
хостом без использования кассового ПО. Значения: Да/ Нет;
• Размер SA пакета – ввести число, означающее максимальную длину (в
байтах) отправляемых на кассу SA пакетов.
Порт терминала – Pipe:
• Связь с банком – из раскрывающегося списка можно выбрать одно из двух
значений: Использовать коммуникации терминала и Использовать
коммуникации кассы;
• Использование SSL без участия кассы – SSL шифрование между терминалом и
хостом без использования кассового ПО. Значения: Да/ Нет;
• Размер SA пакета – ввести число, означающее максимальную длину (в
байтах) отправляемых на кассу SA пакетов.
Порт терминала – Bluetooth:
• Связь с банком – из раскрывающегося списка можно выбрать одно из двух
значений: Использовать коммуникации терминала и Использовать
коммуникации кассы;Страница 130
UNIPOS Terminal
Руководство инженера
• Использование SSL без участия кассы – SSL шифрование между терминалом и
хостом без использования кассового ПО. Значения: Да/ Нет;
• Размер SA пакета – ввести число, означающее максимальную длину (в
байтах) отправляемых на кассу SA пакетов;
• Имя устройства – имя терминала, кторое будет отображаться при поиске
его по Bluetooth;
• PIN – PIN (пароль) для подключения к устройству по Bluetooth;
• Время на поиск устройств – время на поиск устройств Bluetooth (в секундах).Страница 131
UNIPOS Terminal
Руководство инженера
Раздел 10 Настройка параметров TLS/SSL
Данный раздел содержит сведения о настройках параметров для установки
цифровых сертификатов, используемых при обмене данными между POS
терминалом и серверами центра авторизации (процессинговые центры банков) и
параметризации (серверы, на которых находятся параметры и обновления ПО
дляPOSтерминалов).
Для безопасной передачи данных реализовано шифрование с использованием
TLS/SSL протокола. Цифровые сертификаты подразделяются на серверные и
клиентские (как общие для группы терминалов, так и индивидуальные для
каждоготерминала).
10.1 Настройка параметров TLS/SSL для эквайринга
Для настройки параметров шифрования TLS/SSL протокола задается один файл
сертификата для сервера. Для каждого терминала вводится общий клиентский
сертификат в разделе Коммуникации с хостом, при этом для каждого ID
терминала можно задать свой клиентский сертификат (в подразделе для
соответствующего идентификатора POS). В том случае, если для ID терминала
клиентский сертификат не задан, будет использоваться общий клиентский
сертификат.Втомслучае, если для какого–либо ID терминала будет задан свой
сертификат, то он будет использоваться вместо общего клиентского
сертификата.
10.1.1 Задание доверительного TLS/SSL сертификата для работы с сервером
авторизации
Для задания доверительного сертификата необходимо выполнить следующие
действия(см.рисунки58и59):
1. в справочнике Эквайринговые сети выбрать необходимую сеть и в
открывшейся панели с параметрами в поле Файл с доверительным
SSL/TLS сертификатом нажать кнопку с многоточием;Страница 132
UNIPOS Terminal
Руководство инженера
Рисунок58 ВыборполяФайлссервернымSSLсертификатом
2. в открывшемся окне Файлы и БД нажать кнопку Добавить;
3. воткрывшемсяокнеОткрытьвыбрать файл с доверительным SSL/TLS
сертификатом и нажатьОткрыть;
4. в окне Файлы и БД выбрать появившуюся запись и нажать ОК;
5. проверить, что в поле Файл с доверительным SSL/TLS сертификатом
появиласьзапись с указанием пути.
Рисунок59 Добавлениефайласерверногосертификатавбазуданныхспараметрами
Для управления файлами с сертификатами и ключами предназначено окно
Файлы в БД (см. рис. 60).Страница 133
UNIPOS Terminal
Руководство инженера
Рисунок 60 Окно Файлы в БД
Окно Файлы в БД состоит из таблицы и командных кнопок. Командные кнопки
позволяют выполнить следующие операции:
• Добавлениеновыхфайловвбазубезпривязкикконкретномупараметру
производится нажатием кнопки Добавить. Через стандартное
приложение ОС локального компьютера. Например, через MS Windows.
• Удаление выделенного файла или файлов из базы производится по
нажатию кнопки Удалить.
• Сохранениеналокальномкомпьютеревыделенногофайлаилифайловиз
базы производится по нажатию кнопки ОК. Через стандартное
приложение ОС локального компьютера. Например, через MS Windows.
• Загрузка выделенного файла в значение редактируемого параметра
производится по нажатию кнопки Выгрузить. Одновременно закрывается
окно.
• Закрытие окна редактирования файлов без прикрепления файла в
значение параметра производится по нажатию кнопки Отмена.
10.1.2 Задание клиентского SSL/TLS сертификата для конкретного ID
терминала
Для задания клиентского SSL/TLS сертификата для конкретного ID терминала
необходимо выполнить следующие действия:
1. всправочникеТерминалывыбратьсначалатерминал,азатемодинизего
ID (идентификатор POS терминала), после этого на открывшейся панели с
параметрами в поле Файл с клиентским SSL/TLS сертификатом нажать
кнопку с многоточием (см. рис. 61);Страница 134
UNIPOS Terminal
Руководство инженера
Рисунок61 ВыборполяФайлсклиентскимSSLсертификатом
2. в открывшемся окне Файлы и БД нажать Добавить (см. рис. 59);
3. в открывшемся окне Открыть выбрать файл с клиентским SSL/TSL
сертификатом и нажать Открыть;
4. в окне Файлы и БД выбрать вновь созданную запись с файлом
клиентского SSL/TLS сертификата и нажать ОК;
5. проверить, что в поле Файл с клиентским SSL/TLS сертификатом
отобразилась запись, в которой указан путь к файлу;
6. перейти на поле Файл с приватным ключом клиентского сертификата
SSL и для этого поля выполнить действия, описанные в пунктах 2 – 5.
10.1.3 Задание общего клиентского TLS/SSL сертификата для всех ID
терминала
Для задания клиентского TLS/SSL сертификата, общего для всех ID выбранного
POS терминала, необходимо выполнить следующиедействия:
1. В главном окне программы Config Manager выбрать справочник Терминалы, а затем в этом справочнике выбрать подраздел Соединения с сервером
авторизации (см. рис.62);
Рисунок62 ВыборполяФайлсклиентскимSSLсертификатомСтраница 135
UNIPOS Terminal
Руководство инженера
2. В открывшейся таблице с параметрами в разделе Общие выбрать поле
Файл с клиентским SSL/TLS сертификатом хоста (см. рис. 62). Затем
необходимо нажать на появившуюся кнопку с многоточием;
3. После нажатия кнопки с многоточием откроется окно Файлы в БД (см.
рис. 59). В этом окне в таблице необходимо выбрать запись клиентского
SSL/TLS сертификата хоста и нажать ОК;
4. В том случае, если необходимый клиентский SSL/TLS сертификат хоста
отсутствует,необходимо выполнить следующие действия:
1. в окне Файлы в БД нажать кнопку Добавить;
2. в открывшемся окне Открыть найти необходимый файл с
SSL/TLS сертификатом хоста и нажать Открыть;
3. в окне Файлы в БД выбрать запись с добавленным SSL/TLS
сертификатом хоста и нажать ОК;
5. Убедиться, что в поле Файл с клиентским SSL/TLS сертификатом хоста
появилась запись пути к выбранному сертификату;
6. В таблице с параметрами выбрать поле Файл с приватным ключом
клиентского сертификата SSL/TLS хоста и выполнить действия
аналогичныевыполненным ранее в пунктах 2 – 5.
10.2 Настройка параметров SSL/TLS для хоста
параметризации
Для обеспечения безопасной передачи данных по сети Internet обязательно
должен быть установлен доверительный SSL/TLS сертификат. При его отсутствии
функционал безопасной передачи данных работать не будет. Клиентский TLS/SSL
сертификат устанавливается по желанию пользователя. Для настройки
параметров шифрования TLS/SSL протокола задается один файл сертификата
для сервера. Для каждого терминала вводится общий для всех ID клиентский
сертификатвразделеСоединениес сервером параметризации.
10.2.1 Задание доверительного SSL/TLS сертификата для работы с сервером
параметризации
Для задания довериельного сертификата необходимо выполнить следующие
действия:
1. в справочнике Общие установки выбрать Сервер конфигурации и в открывшейсяпанелиспараметрамивполеФайл с доверительным SSL/TLS
сертификатом нажать кнопку с многоточием (см. рис. 63);
2. в открывшемся окне Файлы и БД нажать кнопку Добавить (см. рис. 59);
3. в открывшемся окне Открыть выбрать файл с доверительным SSL/TLS
сертификатом и нажать Открыть;
4. в окне Файлы и БД выбрать появившуюся запись и нажать ОК;
5. проверить, что в поле Файл с доверительным SSL/TLS сертификатом
появиласьзапись с указанием пути.Страница 136
UNIPOS Terminal
Руководство инженера
Рисунок 63 Выбор поля Файл с доверительным SSL/TLS сертификатом
10.2.2 Задание общего клиентского SSL/TLS сертификата для работы с
сервером параметризации
Для задания клиентского SSL/TLS сертификата сервара для всех ID конкретного
POS терминала необходимо выполнить следующие действия:
1. в справочнике Терминалы выбрать сначала терминал, а затем папку
Соединение с сервером параметризации, после этого на открывшейся
панели с параметрами в поле Файл с клиентским SSL/TLS сертификатом
сервера нажать кнопку с многоточием (см. рис. 64);
2. в открывшемся окне Файлы и БД нажать Добавить (см. рис. 65);
3. в открывшемся окне Открыть выбрать файл с клиентским SSL/TLS
сертификатом сервера и нажать Открыть;
4. в окне Файлы и БД выбрать вновь созданную запись с файлом
клиентского SSL/TLS сертификата сервера и нажать ОК;
5. проверить, что в поле Файл с клиентским SSL/TLS сертификатом
сервера отобразилась запись, в которой указан путь к файлу;
6. перейти на поле Файл с приватным ключом клиентского сертификата
SSL/TLS сервера и для этого поля выполнить действия, описанные в
пунктах 2 – 5.Страница 137
UNIPOS Terminal
Руководство инженера
Рисунок64 ВыборполяФайлсклиентскимSSLсертификатом
Рисунок 65 Добавление файла клиентского сертификата в базу данных с параметрамиСтраница 138
UNIPOS Terminal
Руководство инженера
Раздел 11 Настройка независимых
справочников
Как уже было сказано во Введении, настройка параметров POS терминалов
организована в виде справочников. Все справочники можно разделить на четыре
типа:
Первый тип – это справочник Терминалы. В этом справочнике группируются
полныекомплектынастроекдляихзагрузкинаPOSтерминал.Частьпараметров
устанавливаются в этом справочнике, но одинаковые наборы параметров,
которые могут быть использованы для всех или нескольких POS терминалов
группируются в отдельных справочниках и подключаются в справочнике
Терминалы как ссылки на группу параметров.
Второй тип – это связанные справочники. С одной стороны, в этих
справочниках группируются наборы параметров, которые в дальнейшем
будут подключены при настройке того или иного терминала. С другой
стороны, в этих справочниках используются наборы параметров из других
справочников. Например, справочник Профили терминалов. Содержимое
этого справочника используется для заполнения полей справочникаТерминалы.
При этом сам справочник Профили терминалов использует содержимое
справочников Шаблоны отчетов, Дисконты и комиссииит.д.длязаполнения
своихполей.
Третий тип – это сложные справочники. Все необходимые параметры
вводятся непосредсвенно в полях данного справочника, однако такой тип
справочника имеет многоуровневую структуру. Т.е. сначала создаются
разделы верхнего уровня, затем, для каждого раздела верхнего уровня могут
быть созданы подразделы, а для каждого созданного подраздела могут быть
созданы свои подразделы.
Четвертый тип – это простые справочники. Они состоят из набора разделов,
имеющих название и набор однотипных полей.
В данном разделе рассматривается настройка простых и сложных справочников.
Параметры каждого из таких справочников не зависят от настроек других
справочников. С другой стороны, содержимое разделов этих справочников будет
подключаться в связанных справочниках и справочнике Терминалы с
использованием ссылки на тот или иной раздел или подраздел простого, или
сложного справочника. Т.е. во время создания ногого раздела простого или
сложного справочника ему присваивается имя, которое в дальнейшем будет
использовановполяхсраскрывающимся списком.
ПРИМЕЧАНИЕ: Например, это может быть реализовано следующим образом. При создании
нового раздела справочника (например, новой валюты в справочнике Валюта, который
будет рассмотрен ниже) ему присваивается уникальное имя и в поля этого справочника
вводится необходимый набор параметров. Затем, при заполнении какого-либо зависимого
справочника (например, Эквайринговые системы) в поле Валюты необходимо выбрать из
раскрывающегося списка одно из наименований валют. При этом перечень валют,
отображаемый в этом раскрывающемся списке - это перечень созданных ранее разделов
справочника Валюты. Выбор валюты в поле Валюта справочника Эквайринговые системыСтраница 139
UNIPOS Terminal
Руководство инженера
означает подключение всех ранее заполненных параметров, заданных для данной валюты в
справочнике Валюты.
11.1 Настройка справочника Валюты
Платежный терминал позволяет работать с несколькими валютами. При этом
одна из валют является базовой, а остальные пересчитываются относительно
базовой валюты. Если выбрать справочник Валюты, то откроется таблица
Валюты, в которой будет отображено описание всех доступных для терминала
валют.Валютаскоэффициентом«1»будетбазовой,акоэффициентыостальных
валют будутотображатьихтекущийкурсотносительнобазовойвалюты(см.рис.
66).
Коэффициент пересчета влияет на расчет дисконтов и наценок. Если задано
значение 1 – то расчет идет прямой. При любом другом значении идет
умножение и соответственно использование в операциях полученного значения.
ВНИМАНИЕ! Коэффицент пересчета валюты применяется к скидкам и комиссиям,
только если в справочнике «Дисконты и комиссии» / «Правило» / «Метод применения»
установлено значение «Абсолютный».
Рисунок66 СправочникВалюты.
ВНИМАНИЕ! Недопустимо пустое значение или равное нулю в поле Коэффициент
пересчета. В том случае, если курс валюты значительно меньше базовой валюты,
необходимо установить минимальное значение коэффициента. Например, если значение
коэффициентаимеетшесть знаков после нуля, необходимо установить значение 0,000001.
Для создания новой валюты необходимо выполнить следующие действия (см.
рис.67):
1. войти в справочник Валюты, щелкнуть правой кнопкой мыши на папке
Валюта и выбрать Добавить ‘Валюта’;
2. в открывшемся окне Создание: Валюта ввести цифровой код валюты,Страница 140
UNIPOS Terminal
Руководство инженера
например, 156 для китайского юаня, и нажать ОК;
3. заполнить поля параметрами для созданной валюты (см. рис. 68).Страница 141
UNIPOS Terminal
Руководство инженера
Рисунок67 Созданиеновогоразделав
Описание назначения полей, заполняемых для каждой валюты, приведено в таблице (см. табл. 15).
Таблица № 13 Назначение полей справочника Валюты
Наименование Тип объекта Описание
*Имя Поле Наименование валюты
*Код Поле Уникальный числовой код валюты
*Сокращенное
наименование
Поле Трехбуквенный алфавитный код
валюты
*Экспонента Поле Экспонента валюты (например для
обозначения рублей в формате 0,00
экспонента будет равна 2)
*Коэффициент
пересчета a
Поле Коэффициент пересчета к базовой
валюте, влияет на значение
дисконтов, комиссий и лимитов
карточных продуктов.
BIN диапозон Таблица Список BIN диапазонов,
предписанных карточному
продукту. После создания нового
карточного продукта отображается
серым цветом. После создания BIN
диапазона будет отображаться как
многоуровневый раскрывающийся
список. Назначение полей BIN
диапазона см. в табл. 17
Дополнительное
описание
Поле Символьное поле для хранения
пояснений и дополнительных
описаний к введенным параметрам
валютыСтраница 142
UNIPOS Terminal
Руководство инженера
a. Поле, начинающееся со знака * обязательно кзаполнению
Рисунок68 Порядокзаполненияполей.
11.2 Настройка справочника Платёжные системы
Справочник Платежные системы имеет сложную иерархическую структуру.
Каждый раздел справочника (платежная система) может иметь в своем составе
набор поддерживаемых карточных продуктов и набор ключей EMV. Как
минимум, для кадждой платежной системы должны быть созданы: один
карточный продукт и один ключ EMV. Каждый карточный продукт, в свою
очередь,можетсодержать набор BIN диапазонов (как минимумодин).
Для создания нового справочника платежной системы необходимо выполнить
следующиедействия(см.рисунки69и70):
1. выбрать справочник Платежные системы, щелкнуть правой кнопкой
мыши на папке Платежные системы и выбрать Добавить ‘МПС’;
2. в открывшемся окне Создание: МПС ввести наименование справочника,
например, VISA, и нажать ОК;
3. заполнить поля для раздела Общие.
Назначение полей, доступных для заполнения после создания новой платежной
системы приведено ниже (см. табл. 16).Страница 143
UNIPOS Terminal
Руководство инженера
Рисунок69 СозданиеновойМПС
Рисунок 70 Заполнение полей с параметрами для вновь созданной МПС
Таблица № 14 Назначение полей справочника Платежные системы
Наименование Тип объекта Описание
*Имяa Поле Наименование международной платежной
системы, вводится на этапе создания новой
МПС, в дальнейшем может быть изменено.
*Тип Поле Тип платежной системы. В этом поле из
раскрывающегося списка необходимо выбрать
одну из поддерживаемых международных
платежных систем.
Карточные продукты Таблица Содержит список типов карточных продуктов.
После создания новой платежной системы
подсвечивается серым цветом. После создания
карточного продукта будет отображаться как
многоуровневый раскрывающийсясписок.
Содержимое полей типа карточного продукта
см. в табл. 16.Страница 144
UNIPOS Terminal
Руководство инженера
RID Поле Registered application provider identifier,
пятибайтовый идентификатор МПС, который
входит в состав AID (идентификатора
приложения), на основании которого ПО POS
терминала выбирает соответствующий
программный модуль для обеспечения
взаимодействия с той или иной МПС. Задается
в соответствии со стандартом ISO/IEC 7816-5.
EmvTDOL Поле Transaction Certificate Data Object List, набор
данных, который используется для
формирования криптограммы. Терминал
выполняет конкатенацию всех перечисленных
в объекте TDOL полей данных и к
получившейся строке битов применяет хэшфункцию SHA-1. В результате получается
значение поля Value объекта TC Hash Value,
которое и передается карте в команде
GENERATE AC.
EmvDDOL Поле Dynamic Data Authentication Data Object List,
содержит список (тэги и длины) тех объектов
данных, которые требуются карте для
формирования поля Terminal Dynamic Data,
являющегося частью данных, подписываемых
картой.
Ключи EMV Таблица Содержит список публичных EMV ключей.
После создания новой МПС подсвечивается
серым цветом. После создания ключа EMV
будет отображаться как многоуровневый
раскрывающийся список. Содержимое полей
публичного ключа EMV см. в табл. 16.
Телефон Call центра Поле В поле вводится номер телефона Call центра
платежной системы, по которому можно
уточнить вводимые для данной МПС
параметры
Дополнительное
описание
Поле Символьное поле для хранения пояснений и
дополнительных описаний к введенным
параметрам
a. Поля, наименования которых помечены знаком * обязательны к заполнению
После создания справочника для новой платежной системы можно приступать к
созданию карточных продуктов.
11.2.1 Создание карточного продукта
Для создания нового карточного продукта необходимо выполнить следующие
действия(см.рисунки71и72):Страница 145
UNIPOS Terminal
Руководство инженера
Рисунок71 Порядоксозданиякарточногопродукта
Рисунок72 Заполнение полейСтраница 146
UNIPOS Terminal
Руководство инженера
1. щелкнуть правой кнопкой мыши на папке Карточные продукты и
выбрать Добавить ‘Тип карточного продукта’;
2. в открывшемся окне Создание: Тип карточного продукта ввести
наименование и нажать ОК;
3. заполнить поля с параметрами для раздела Общие.
Назначение полей, доступных для заполнения после создания карточного продукта,приведенониже(см.табл.17).
Таблица № 15 Назначение полей подраздела Карточные продукты справочника
Платежные системы
Наименование Тип объекта Описание
*Имяa Поле Наименование карточного продукта,
вводится на этапе создания нового
карточного продукта для выбранной
платежной сис темы. В дальнейшем может
быть изменено.
Имя в чеке Поле Наименование карточного продукта,
которое будет напечатано на чеке.
*Тип Поле Тип карточного продукта. Из
раскрывающегося списка можно выбрать
один из карточных продуктов,
поддерживаемых приложением.
PIX Поле Proprietary Application Extension,
одиннадцатибайтовый идентификатор
МПС, который входит в состав AID
(идентификатора приложения), на
основании которого ПО POS терминала
выбирает соответствующий программный
модуль для обеспечения вза- имодействия с
той или иной МПС. Значение PIX
определяют для каждого
зарегистрированного RID конкретный
карточный продукт. Задается в
соответствии со стандартом ISO/IEC 7816-5.
BIN диапазоны Таблица Список BIN диапазонов, предписанных
карточному продукту. После создания
нового карточного продукта отображается
серым цветом. После создания BIN
диапазона будет отображаться как
многоуровневый раскрывающийся список.
Назначение полей BIN диапазона см. в
табл. 17
*Ручной ввод Поле В этом поле задается допустимость ручного
ввода номера и срока действия карты. Если
ручной ввод допустим, необходимо выбрать
Да если не допустим, необходимо выбрать
Нет.
Дополнительное
описание
Поле Символьное поле для хранения пояснений
и дополнительных описаний к введенным
параметрамСтраница 147
UNIPOS Terminal
Руководство инженера
a. Поля, наименования которых помечены знаком * обязательны к заполнениюСтраница 148
UNIPOS Terminal
Руководство инженера
11.2.2 Создание BIN диапазона
Для создания BIN диапазона для карточного продукта необходимо выполнить
следующиедействия(см.Рисунок73):
1. щелкнуть правой кнопкой мыши на папке BIN диапазоны и выбрать
Добавить ‘BIN диапазон’;
2. ввести параметры для созданного BIN диапазона.
Рисунок 73 Порядок создания BIN диапазона
Рисунок74 Заполнениеполей:необходимозаполнитьвсеполяподраздела
Назначение полей, доступных для заполнения после создания карточного продукта,приведенониже(см.табл.18).
Таблица № 16 Назначение полей подраздела BIN диапазон
Наименование Тип объекта Описание
Начало длины номера
карты
Поле Минимальльное количество цифр,
используемое для обозначения
номера карты (например, если в это
поле ввести значение 16, то
минимальное количество цифр на
карте будет выглядеть следующим
образом: XXXX XXXX XXXX XXXX)Страница 149
UNIPOS Terminal
Руководство инженера
Конец длины номера
карты
Поле Максимальное количество цифр,
используемое для обозначения
номера карты (например, если в это
поле ввести значение 19, то
минимальное количество цифр на
карте будет выглядеть следующим
образом: XXXX XXXX XXXX XXXX
XXX)
*Начало диапазонаa Поле Первые значащие цифры начала
BIN диапазона (например, если
ввести значение 39 для 16-значного
номера карты, то номер будет иметь
следующий вид: 3900 0000 0000 0000)
*Конец диапазона Поле Первые значащие цифры окончания
BIN диапазона (например, если
ввести значение 40 для 16-значного
номера карты, то номер будет иметь
следующий вид: 4099 9999 9999 9999)
a. Поля, наименования которых помечены знаком * обязательны к заполнению
11.2.3 Создание ключа EMV
Для создания ключа EMV необходимо выполнить следующие действия (см. рисунки75и76):
Рисунок75 ПорядоксозданияключаEMV
1. щелкнуть правой кнопкой мыши на папке Ключи EMV и выбрать
Добавить ‘Описание EMV CAPK ключей’;
2. заполнить поля параметров ключей.Страница 150
UNIPOS Terminal
Руководство инженера
Рисунок76 Заполнениеполей:необходимозаполнитьвсеполяподраздела
Назначение полей, доступных для заполнения после создания карточного
продукта,приведенониже(см.табл.19).
Таблица№ 17 Назначение полей подраздела Ключи EMV
Наименование Тип объекта Описание
*Индексa Поле Индекс RSA ключа шифрования данных, является идентификатором
ключа для выбора необходимого значения ключа из набора имеющихся
*Длина Поле Длина модуля RSA ключа шифрования данных, значение в битах
*Экспонента Поле Значение, используемое при преобразовании RSA ключа шифрования
данных, возможно использование
двух значений: 3 или 2^16+1
*Значение Поле Значение модуля RSA ключа шифрования данных, задается в hex-формате без пробелов и переноса строк
*Контрольное значение Поле Контрольное значение для проверки
правильности данных (Hash алгоритм), значение задается в hex-формате без пробелов и переноса строк
*Дата окончания
действия
Поле Дата окончания действия (отзыва)
RSA ключа шифрования данных.
a. Поля, наименования которых помечены знаком * обязательны к заполнению
11.3 Настройка печатных форм
Логикой работы терминального ПО предусмотрена печать различных документов
на принтере платежного терминала. Каждый документ формируется из шаблона,
который задает внешний вид, постоянное содержимое документа, и набора
переменных, которые программа подставляет в заранее обозначенные места
шаблона. Программа позволяет создавать различные варианты шаблонов, в
соответствии с существующими у пользователей бизнес процессами, однако по
сути выполняемых этими шаблонами функций их можно разделить на две группы:
• Финансовый чек – документ, подтверждающий проведение финансовой
операции. Шаблоны из этой группы пользователь может создавать и
редактировать по своему усмотрению, исходя из текущих требований и
имеющихся бизнеспроцессов.
• Отчет – документ, предоставляющий синтетическую или
аналитическую информацию о проведенных операциях или техническомСтраница 151
UNIPOS Terminal
Руководство инженера
состоянии терминала. Шаблоны этой группы настраиваются
производителем терминального ПО, т.к. их создание требует знание
логики работы программы. При необходимости пользователь может
отредактировать текстовые блоки в этих отчетах, но удаление логических
блоков или их редактирование может привести к некорректному
отображению информации, печатаемой в этих отчетах.
Для настройки и редактирования шаблона предназначен специальный редактор,
который может работать в двух режимах:
• В графическом режиме с использованием различных элементов
графического интерфейса пользователя Windows (кнопки, поля, списки
и т.д.). В этом режимеимеются многочисленные подсказкиипояснения
для правильного выбора тех или иных параметров или элементов. Чек в
этомрежиме отображается так, как он будет выглядеть на печати.
• В расширенном режиме функционал большинства графических элементов
отключается, а содержимое чека отображается в символьном виде. В этом
режиме шаблон набирается как обычный текст, содержащий
информацию форматирования в виде специальных символов и кодов.
В том случае, если пользователь имеет незначительный опыт в разработке
шаблонов, или если изменения в шаблоны вносятся редко и в малом объеме,
предпочтительно использовать графический режим редактора. В данном
режимеимеется достаточный объем информации и подсказок, чтобы правильно
настроить шаблон.Втомслучае,еслинеобходимонастраиватьшаблонычастои
в больших объемах, предпочтительно использовать расширенный режим. В
этом режиме шаблоны настраиваются значительно быстрее, однако
пользователю необходимо хорошо знать значения символов и кодов,
используемых для настройки шаблона.
11.3.1 Создание нового шаблона
Для того, чтобы создать новый шаблон, необходимо выполнить следующие
действия(см.рисунки77и78):Страница 152
UNIPOS Terminal
Руководство инженера
Рисунок 77 Создание нового шаблона
1. щелкнуть правой кнопкой мыши на папке Шаблоны отчетов и выбрать
Добавить ‘Шаблон’;
2. в открывшемся окне Создание: Шаблон ввести наименование нового
шаблона и нажать ОК;
3. в поле Тип шаблона отчета из раскрывающегося списка выбрать
необходимый тип;
ПРИМЕЧАНИЕ: Все необходимые типовые отчеты уже присутствуют в базе данных
параметров, поставляемой вместе с терминальным ПО. Пользователю необходимо будет
толькосоздатьнаосновесуществующегоновыйфинансовыйчекиотредактироватьего.
Рисунок78 Заполнениеполейсозданногошаблона
4. перейти на поле Текст шаблона, после чего станет доступной кнопка с
многоточием, после нажатия на которую, будет открыто окно
Редактировать чек (см. рис. 79) для редактирования чека.
По умолчанию редактор открывается в графическом режиме редактирования.
Переход на расширенный режим производится установкой флага в поле
Расширенный режим (см. рис. 79). В любом из режимов будут доступны
следующие кнопки:
• Сохранениеивыходизредакторапроизводитсяпонажатиюкнопки ОК.
• Выход без сохраненияпо нажатию кнопки Отмена.
• Просмотр внешнего вида настроенного чека производится в новом окне,
вызываемом по нажатию кнопки Просмотр.Страница 153
UNIPOS Terminal
Руководство инженера
• Печать предварительно настроенного чека на принтере, подключённом к
локальному компьютеру,производится по нажатиюкнопки Печать.
• При нажатии на кнопку Загрузка условий будет предложен на выбор
терминал, из параметров которого возьмутся некоторые значения
условий. например, адрес, terminalId и некоторые другие. Полный список
условий: terminalId, merchantAddress, merchantName, cardType,
currencyName.
При работе с редактором в любом режиме используются следующие виды
записей:
• Строка – новая строка, запись, которая может содержать элементы и
входить в блоки. Одна строка в шаблоне чека может соответствовать
нескольким строкам, отображаемым в Окне внешнего вида.
• Элемент, текстовый – содержит текст, отображаемый на чеке в
зависимости от настроек параметров элемента.
• Элемент условия – содержит условие из предварительно настроенного
списка. В соответствие, с которым отображаются данные из параметров
терминала, полученные с карты клиента или в процессе выполнения
операции. В шаблоне чека отображается значение, предварительно
настроенное в редакторе «Значение условий».
• Блок–наборстроксэлементамиилибез.Позволяетнастраиватьусловия
отображения блока, задание дополнительных условий и т.д.
Рисунок79 Видокна«Редактироватьчек»длявновьсозданногошаблонаотчетаСтраница 154
UNIPOS Terminal
Руководство инженера
11.3.2 Настройка шаблонов в графическом режиме
При настройке шаблонов в графическом режиме окно Редактировать чек имеет
следующие особенности (см. рис.80):
1. На панели с чеком, чек отображается в том виде, в котором он будет
печататься на принтере. Однако в некоторых строках могут
отображаться условия и другая информация по логике обработки
данных. Чтобы увидеть вариант чека, который будет отображаться в
реальности, необходимо нажать кнопкуПросмотр.
2. Справа от панели с чеком отображается панель с параметрами этого чека.
На этой панели отображается информация по выбранной в чеке строке. В
данной таблице имеется три типа полей:
1. поле, в которое непосредственно вводятся данные;
2. поле, которое открывает список, из которого можно выбратьзначение;
3. поле, имеющее кнопку с многоточием, после нажатия на которую,
открывается новое окно для ввода данных или условий.
3. Под панелью с параметрами отображается контекстная справка, которая
дает описание параметра, выбранного в панели с параметрами.
4. Справа от панели с параметрами располагается панель с кнопками. Блок с
номером 4 очерчивает ту часть кнопок, которые доступны только в
графическом режиме. Остальные кнопки доступны для работы в любом
режиме редактора.Страница 155
UNIPOS Terminal
Руководство инженера
Рисунок80 Настройкашаблоначекавграфическомрежиме
11.3.2.1 Редактирование блока
Форматирование блока производится в экране «Свойства» в группе «Блок».
Настройки автоматически распространяются на все содержащиеся элементы и
строки блока.
• Условия печати строки – инициализация печати блока строк и
элементов, в случае если исполняется заданное условие. Выбор условия
извыпадающего списка
• Сумма операции;
• Дополнительная сумма(сдачи);
• Сумма отменяемой операции;
• Номер картыклиента;
• Срок действия карты клиента;
• Имя владельца.
• Условие циклической печати – выбор условия из списка «Значение
условия».
• Инициализация цикла;
• Перемещение поциклу;
• Итераций цикла.
• Арифметическое условие
• Математическое выражение – ввод математического выражения.
Добавление блока элементов, по умолчанию содержащих строку и одинСтраница 156
UNIPOS Terminal
Руководство инженера
текстовый элемент, производится по нажатию кнопки +блок. Удаление блока
элементов производится по нажатию кнопки -блок.Страница 157
UNIPOS Terminal
Руководство инженера
11.3.2.2 Редактирование строки
Информация,отображаемаяначеке,организованаввидеблоков,каждыйблок
состоит из одной и более строк. Для того, чтобы создать новую строку или
отредактировать имеющуюся, необходимо щелкнуть мышкой по этой строке.
После того, как строка чека будет выбрана, на панели с параметрами чека
отобразятся параметры, относящиеся к выбранной строке.
Добавление новых строк, по умолчанию содержащих один текстовый элемент,
производитсяпонажатиюкнопки+строку.Присозданиитекстэлементауказан
«…». Удаление выделенной строки, со всеми элементами, производится по
нажатию кнопки -строку. Форматирование строки производится в экране
«Свойства» в группе «Свойства строки». Изменения производятся из свойств
любого элемента строки и автоматически распространяются на все остальные
содержащиеся в строке элементы.
• Условия печати – выбор условий отображения строки на чеке.
Производится из выпадающего списка, изменение списка
пользователям недоступно. Примерный список условий:
• Сумма операции;
• Дополнительная сумма(сдачи);
• Сумма отменяемой операции;
• Номер картыклиента;
• Срок действия карты клиента;
• Имя владельца.
• Выравнивание – выбор условий из выпадающего списка, изменение
списка пользователямнедоступно.
• Не используется;
• Вправо;
• Влево;
• Центр;
• Макс.размер строки – автоматическое разделение информации из
параметра по строкам чека, без разбиения слов, разделителем считается
пробел. Используется для подгонки текста под ширину ленты чека.
• Логотип–добавлениессылкинафайллоготипапонажатиюкнопки.
• Прогонбумаги–количествострокпрогонабумагибезпечатисимволов.
• Режим печати:
• Не используется;
• 24 символа;
• 32 символа;
• 42 символа;
• Нормальная высота – Применение или не применение нормальной высоты
к значению строки (Да/Нет).
• Инверсная печать – Применение или не применение инверсной печати
значения строки(Да/Нет).Страница 158
UNIPOS Terminal
Руководство инженера
• Двойная высота – Применение или не применение двойной высоты печати
значения строки(Да/Нет).
• Двойная ширина – Применение или не применение двойной ширины
печати значения строки (Да/Нет).
• Полуторнаявысота–Применениеилинеприменениеполуторнойвысоты
печати значения строки (Да/Нет).
ПРИМЕЧАНИЕ: При установке значения «Свойства строки шаблона» равным «Двойная Высота» или «Двойная ширина», в левой части экрана Текст элементов не отображается в
ожидаемом виде. Увидеть применение параметров к элементу возможно только в режиме
«Просмотр», по нажатию соответствующей кнопки или на распечатке.
11.3.2.3 Редактирование элемента
Добавление элемента, по умолчанию текстового, производится в строку, по
нажатию кнопки +элемент. Преобразование текстового элемента в элемент
условий, производится удалением текста из значения параметра «Текст» и
указанием условия в значении параметра «Используемое условие -параметр»
Удаление выделенного элемента, вне зависимости от его типа,производится по
нажатию кнопки -элемент.
• Выравнивание:
• Не используется;
• Вправо;
• Влево;
• Центр.
• Направление форматирования:
• Не используется;
• Слева направо;
• Справа налево.
• Ограничение размера:
• Не используется;
• По размерушаблона;
• По размеруданных.
• Символ замещения – символ из значения параметра «Шаблон
форматирования», который должен при печати замещаться на
соответствующее значение из параметра «Используемое условиепараметр», на соответствующем месте (см. рис. 81).
Рисунок81 Отображение вчекеисвойствахсимволовзамещенияСтраница 159
UNIPOS Terminal
Руководство инженераСтраница 160
UNIPOS Terminal
Руководство инженера
• Символы-разделители – символы из значения параметра «Шаблон
форматирования», которые должны указываться при печати, на
соответствующем месте. Добавляются в соответствующем редакторе.
• Сохранение и выход из редактора производится по нажатию
кнопки ОК.
• Выходбезсохраненияпо нажатиюкнопки Отмена.
• Добавление символов производится по нажатию кнопки
Добавить(см. рис. 82)
Рисунок 82 Добавление символов разделителей
Шаблон форматирования – шаблон в виде текстового поля по типу, которого
маскируются и форматируются данные полученные из параметра «Используемое
условие-параметр»(см.рис.81)
Пример: Маскирование символом * номера карты клиента, кроме
финальных четырёх символов, с разделением на группы по четыре
символапробелами(см.рис.83).
Рисунок83 Примермаскирования
ПРИМЕЧАНИЕ: При добавлении нескольких текстовых элементов в одну строку, без
разделения элементами условий, производится автоматическое слияние в один текстовый
элемент,собъединением(склеиванием)ихтекстов.Страница 161
UNIPOS Terminal
Руководство инженера
• Разделитель мин. единиц валюты – символ разделения минимальной
единицы валюты.Страница 162
UNIPOS Terminal
Руководство инженера
• Экспонента валюты
• Текст – текст, отображаемый на чеке.
• Используемое условие-параметр – выбор условия из списка «Значение
условия».
• Режим вставкиданных:
• Не используется
• Вставка
• Перезапись
11.3.2.4 Описание параметра «Значение условия»
Параметр «Значение условия» отображается одинаково для всех записей
редактора чеков (см. рис. 84). Параметр «Содержимое» каждого условия печати
строки содержит примерное значение, подставляемое в запись шаблона чека при
отображении в редакторе, на предварительной печати или при просмотре. При
печати чека на терминале используется соответствующее значение из параметров
терминала, из данных карты клиента или полученное в результате проведения
операции.
ПРИМЕЧАНИЕ: Параметр «Значение условия», содержит условия печати строки, является
информационным. Редактирование пользователем возможно только для поля
«Содержимое» каждого предварительно добавленного и настроенного «Условия печати».
Рисунок 84 Редактирование параметра Значение условияСтраница 163
UNIPOS Terminal
Руководство инженера
Рисунок85 ОтображениепараметраЗначениеусловияСтраница 164
UNIPOS Terminal
Руководство инженера
В обычном режиме редактирования чека параметр Значение условия
отображается на панели параметров чека (см. рис. 80) в виде номера,
заключенного в квадратные скобки и наименования этого значения,
расположенного сразу за номером (см. рис. 85). Также этот параметр может
отображатьсянапанелисчекомввиде числа в квадратныхскобках.
Втомслучае,еслинеобходимоуточнитьназначениетогоилииногоусловия,необходимовыполнитьследующиедействия(см.рис.86):
1. выбрать редактируемую строку чека;
2. на панели параметров чека найти наименование условия;
3. выбрать поле Значение условий и нажать кнопку с многоточием;
4. в открывшемся окне Значение условий в списке Члены найти и выбрать
наименование условия;
5. на панели свойства выбрать поле Описание условия и в нижней части этой
панели отобразится справка по выбранному условию.
Рисунок 86 Порядок уточнения значения условия
11.3.3 Настройка шаблона в расширенном режиме
Для включения расширенного режима редактирования необходимо установить
флажоквполеРасширенный режимокнаРедактировать чек(см.рис.87).
В расширенном режиме блокируются кнопки редактирования стандартным
режимом, так же блокируются «Свойства элементов». Редактирование
шаблона чека производится в левой части экрана – Поле редактирования,
полностью в ручном режиме, согласно Правилам форматирования данных (см
табл. 23).
Панельчекапревращаетсявпростойтекстовыйредактор(см.рис.88)вкотором
содержимое чека редактируется в виде текста, например, как в Notepad. Каждая
строка текста в этом редакторе соответствует строке чека, распечатанного на
принтере. Язык, который используется для описания параметров отображения
данных на чеке, напоминает HTML теги и не представляет большой сложности
в изучении.Страница 165
UNIPOS Terminal
Руководство инженера
Рисунок 87
Рисунок 88
ПРИМЕЧАНИЕ: Возможности штатного редактора ограничены, однако для редактированияможноиспользоватьлюбойдругойтекстовыйредактор,аполученныйтекстдлячека
скопировать из своего редактора и вставить в штатный редактор Config Manager Station
(см.рис. 89).
Рисунок 89
В том случае, если в ходе работы с чеком необходимо уточнять назначения техСтраница 166
UNIPOS Terminal
Руководство инженера
или иных условий (числа, заключенные в квадратные скобки), необходимо
выполнитьследующиедействия(см.рис.89):
Рисунок 90
1. в расширенном режиме скопировать текст редактируемого чека во
внешний текстовый редактор (см. рис. 89) перейти в обычный режим и
открыть окно Значение условия;
2. при редактировании чека в текстовом редакторе, если появилось условие,
значения которого необходимо узнать, перейти к окну Значение условий и
выбрать условие с соответствующим идентификатором (например, [4] см.
рис. 90);
3. в нижней части панели Свойства будет отображена контекстная справка
по этомуусловию.
Еслинеобходимопросмотретькакбудетвыглядетьчекнапринтере,необходимо
нажать на кнопку Просмотр, после чего откроется окно Просмотр, в котором
отобразится пример чека (см. рис. 91). Реальный чек может значительно
отличаться, от того, который отображается в режиме просмотра. Это связано с
рядом причин:
 Во–первых, дляотображения значений в чеке программа использует ряд
переменных и условий, от которых будет зависеть текущий вариант
значений.
 Во–вторых, в зависимости от выполнения тех или иных условий, часть
блоков информации на чеке может или отображаться несколько раз в
зависимости от текущих данных, или вообще не отображаться при
текущихданныхначеке.Страница 167
UNIPOS Terminal
Руководство инженера
Рисунок 91
Примернастроенногоблокасоднойстрокой,текстовымэлементомиэлементом
условия«Имяоперации»рассмотренвтаблицениже.
Таблица № 18
Содержимое чека Расшифровка содержимого чека
^G[36]^ G - Печать графического логотипа.
{[24]Am} [24] – “Наименование продавца”. Am -
Выравнивание по середине строки. Используется
для однострочных данных.
^M32m^{[25]Al} [25] – “Адрес продавца”. M32m – максимальный
размер строки – 32 символа, выравнивание – по
середине строки. Используется для
автоматического разбиения длинных строк.
{C+[38]} КОПИЯ ЧЕКА С+ [38] – признак печати копии чека. Если признак
установлен (любое значение) – строкапечатается.
ЧЕК КЛИНТА {[22]Ar} [22] – номер чека. Выравнивание по правому краю
строки.
{[8]Am} [8] – имя операции. Выравнивание – поцентру.
{[23]Al} {[10]Ar} [23] – дата операции на терминале. Выравнивание
по левому краю строки.
[10] – Время операции на терминале.
Выравнивание по правому краю строки.
Формат даты/времени задается в ресурсах
терминала, но может быть переопределен в
шаблоне чека.
ТЕРМИНАЛ: {[11]Ar} [11] – идентификатор терминала.Выравнивание
по правому краю строки.Страница 168
UNIPOS Terminal
Руководство инженера
КАРТА {[29]Ar} [29] – название карты (из справочника «Карточные
продукты»). Выравнивание по правому краю
строки.
{[4]AmF01#* (#### * ####)} [4] – PAN карты. Выравнивание по середине
строки.
F01#* (#### * ####)} – маска форматирования
номера карты. Символ замещения в шаблоне - #,
символ разделитель данных – пробел. Для карты с
номером 1234567890123456 будет напечатано на
чеке 1234*******3456. При изменении длины
номера карты будет увеличиваться количество
символов *.
СРОК ДЕЙСТВИЯ :{[5]ArFld#/(##/##)} [5] – срок действия карты. Выравнивание по
правому краю строки.
Fld#/(##/##) – маска форматирования срока
действия карты. Направление форматирования (l)
– слева направо, ограничение размера
форматируемых данных (d) – по размеру данных,
символ замещения в шаблоне - #, символ
разделительданных – /.
КЛИЕНТ: {[6]Ar} [6] – имя владельца карты. Выравнивание по
правому краю строки.
AID {[39]Ar} [39] – AID. Выравнивание по правому краюстроки.
{E([51] != 15)}СУММА ({[13]Al}) E([51] != 15) – условие печати строки «Если
операция не ‘Минивыписка’».
[13] – валюта операции.
{[1]Ar} [1] – сумма операции. Выравнивание поправому
краю строки.
^M32m^^NP^{[34]Al} [34] – сообщение от хоста (или расшифровка кода
ответа). M32m – максимальный размер строки – 32
символа, выравнивание - по центру строки.
Используется для автоматического разбиения
длинных строк. NP – Печать инверсным шрифтом.
КОД ОТВЕТА {[19]Ar} [19] – цифровой код ответа хоста. Выравнивание по
правому краю строки.
КОД АВТОРИЗАЦИИ: {[17]Ar} [17] – буквенно-цифровой код авторизации.
Выравнивание по правому краю строки.
№ ССЫЛКИ: {[14]Ar} [14] – значение номера ссылки. Выравнивание по
правому краю строки.
/** {L[206,207,208]} /** - признак начала блока печатаемыхстрок.
L[206,207,208] – условие печати циклическихданных, например, нескольких записей по лояльности. Условия печати применяются длявсего
блока.
{[45]AlMo} [45] – имя программы лояльности. Выравнивание
по левому краю строки. Режим добавления символов в строку – перезапись существующих символов
(overwrite).
СУММА СКИДКИ: {[49]Ar} [49] – сумма скидки по программе лояльности.
Выравнивание по правому краю строки.
ПРОЦЕНТ СКИДКИ: {[50]Ar} % [50] - процент скидки по программе лояльности.Страница 169
UNIPOS Terminal
Руководство инженера
Выравнивание по правому краю строки.
**/ **/ - признак окончания блокаданных.
{C+[37]}СУММА С ЛОЯЛЬНОСТЬЮ
({[13]Al})
C+[37] – признак печати строки. Строка будет
напечатана, если в параметрах транзакцииприсутствуют данные по сумме операции с учетом
лояльности.
[13] – валюта операции.
{[37]Ar} [37] – сумма с лояльностью. Выравнивание поправому краю строки.
/** {E([51] == 25 || [51] == 26 || [51] == 28} /** - признак начала блока печатаемых строк.
E([51] == 25) – арифметическое условиепечати
блока строк. Строки будут напечатаны, если
«Идентификатор операции» (51) равен«Платеж»
(25).
E([51] == 25 || [51] == 26) – логическое ИЛИдля
нескольких арифметических выражений.Строки
будут напечатаны, если «Идентификатороперации» (51) равен «Платеж» (25) ИЛИ «Оплата телефона» (26).
{C+[30]}ДЕТАЛИЗАЦИЯ ПЛАТЕЖА: C+[30] – признак печати строки. Строкабудет
напечатана, если в параметрах транзакции присутствуют данные по сумме операции сучетом
лояльности.
{[30]Ar} [30] - данные по сумме операции с учетом лояльности. Выравнивание по правому краюстроки.
{C+[33]}НАЗНАЧЕНИЕ ПЛАТЕЖА: C+[33] – признак печати строки. Строкабудет
напечатана, если в параметрах транзакции присутствуют данные по назначениюплатежа.
{[33]Ar} [33] - назначению платежа. Выравнивание по правому краю строки.
{C+[32]}ПЕРИОД ПЛАТЕЖА: C+[32] – признак печати строки. Строкабудет
напечатана, если в параметрах транзакции присутствуют данные по периоду платежа.
{[32]Ar} [32] - период платежа. Выравнивание по правому
краю строки.
**/ **/ - признак окончания блокаданных.
{C+[28]}{C+[27]}------------------------------- С+[28] – признак успешного выполненияопера-
{C+[28]}{C+[27]} (КЛИЕНТ) ции. Если признак установлен (любое значение)–
{C+[28]} строка печатается.
{C+[28]} ------------------------------- С+[27] – признак необходимости печати подписи
{C+[28]} (КАССИР) клиента. Если признак установлен (любоезначе-
{C+[28]} ние) – строка печатается.
{C+[28]}{C+[27]} – при задании нескольких условий
– выполняется последовательная проверкавсех
условий слева направо. Строка будет напечатана
если были выполнены все условия.
================================ Печать текстового поля.
^F[7]^ F[7] – прогон бумаги в строках.Страница 170
UNIPOS Terminal
Руководство инженера
11.4 Настройка дисконты и комиссии
Скидки и наценки (дисконты и комиссии) реализованы в виде правил. Каждое
правило–этоскидкаилинаценка,котораяпривязанакнекомуBINдиапазонуи
вычисляетсяпозаданномуалгоритму(правилу).Длясозданиянабораправилдля
терминала, необходимо настроить справочник Дисконты и комиссии, затемв
справочнике Профили терминалов для каждого профиля подключить набор
правил. Каждый терминал имеет один из заданных профилей, и в зависимости от
выбранного профиля будет использовать тот или иной набор скидок и наценок.
В общем виде для создания набора скидок и наценок необходимо выполнить
следующие действия:
1. Создать группы BIN диапазонов. Каждая группа будет объединять наборы
пластиковых карт для их дальнейшего подключения к тем или иным
скидкам или наценкам. Например, если необходимо создать набор
нескольких типов карт VISA (VISA Classic, VISA Gold и т.д.) для их
дальнейшего подключения к системе бонусных скидок, то для этого
создается группа с диапазонами этих карт, которая в дальнейшем
будет подключаться к различным типам скидок.
2. Создатьправило.Посутиправилозадаетнаборпараметровдлякаждого
типа скидки или наценки.
3. Подключить к каждому правилу необходимый набор групп BIN
диапазонов. К каждому правилу можно подключить все группы BIN
диапазонов и каждый BIN диапазон можно подключить ко всем
имеющимся правилам.
Для каждого правила существует два способа подключения BIN диапазонов
(группа). В том случае, если группа подключается в режиме BIN входит, значит
данное правило будет применяться для пластиковых карт данных BIN
диапазонов. В том случае, если группа подключается в режиме BIN не входит,
значит данное правило будет применяться для пластиковых карт, которые не
входят в данные BIN диапазоны.
11
ПРИМЕЧАНИЕ: Для корректного применения комисси необходимо выполнить особые
настройки операционной системы (если используется «Config Manager Download
Server»). Описание данных настроек можно найти в документе «DownloadServer.pdf» в
пункте «4.2.2 Особенности настройки Download Server».
12
12.4.1 Создание BIN диапазона
Для создания BIN диапазона необходимо выполнить следующие действия (см.
рис.92):
1. щелкнуть правой кнопкой мыши на папке Группы BIN диапазонов и
выбрать Добавить ‘Группа’;
2. в открывшемся окне Создание: Группа ввести наименование группы и
нажать ОК;
3. в случае необходимости можно изменить наименование группы и
добавить дополнительное описание (см. табл. 21);Страница 171
UNIPOS Terminal
Руководство инженера
Рисунок 92 Порядок создания новой группы BIN диапазонов
Таблица№19 ПараметрыгруппыBINдиапазонов
Наименование Тип объекта Описание
Имя группы Поле Наименование группы BIN диапазонов.
Создается на этапе создания новой группы,
в дальнейшем может быть изменено.
BIN диапазоны Таблица Ссылка на набор таблиц, содержащих
описание BIN диапазонов пластиковых
карт. Назначение параметров BIN
диапазона см. в табл. 21 Параметры BIN
диапазона.
Дополнительное
описание
Поле Символьное поле для хранения пояснений
и дополнительных описаний к введенным
параметрам
4. в созданной группе щелкнуть правой кнопкой мыши на папке BIN
диапазоны и выбрать Добавить ‘BIN’ диапазон (см. рис. 93);Страница 172
UNIPOS Terminal
Руководство инженера
Рисунок93 Порядок создания нового BIN диапазона
5. заполнить поля для номера карты и диапазона (см. табл. 22).
Таблица № 20 Параметры BIN диапазона
Наименование Тип объекта Описание
Начало длины номера
карты
Поле Минимальльное количество цифр,
используемое для обозначения номера
карты (например, если в это поле ввести
значение 16, то минимальное количество
цифр на карте будет выглядеть следующим
образом: XXXX XXXX XXXX XXXX)
Конец длины номера
карты
Поле Максимальное количество цифр,
используемое для обозначения номера
карты (например, если в это поле ввести
значение 19, то минимальное количество
цифр на карте будет выглядеть следующим
образом: XXXX XXXX XXXX XXXX XXX)
*Начало диапазона Поле Первые значащие цифры начала BIN
диапазона (например, если ввести
значение 39 для 16-значного номера карты,
то номер будет иметь следующий вид: 3900
0000 0000 0000)
*Конец диапазонаa Поле Первые значащие цифры окончания BIN
диапазона (например, если ввести значение
40 для 16-значного номера карты, то номер
будет иметь следующий вид: 4099 9999 9999
9999)
a. Поля, наименования которых помечены знаком * обязательны к заполнению
12.4.2 Создание дискотов и комиссийСтраница 173
UNIPOS Terminal
Руководство инженера
Для создания новой скидки или комиссии необходимо выполнить следующие
действия:
Рисунок94 Созданиескидкиилинаценки
1. щелкнуть правой кнопкой мыши на папке Дисконты и комиссии и
выбрать Добавить ‘Дисконт/комиссия’;
2. в открывшемся окне Создание: Дисконт/комиссия ввести наименование и
нажать ОК (см. рис. 94);
3. длясозданнойскидки(наценки)заполнитьполяразделаОбщие(см.табл.
23 Параметры дисконтов и комиссий);
13
ПРИМЕЧАНИЕ: В зависимости от хостового протокола, поля для заполнения могут
отличаться.
14
Таблица № 21 Параметры дисконтов и комиссий
Наименование Тип объекта Описание
Наименование
дисконта/комиссии
Поле Наименование дисконта или комиссии. Создается
на этапе создания нового правила, в дальнейшем
может быть изменено.
Имя в чеке Поле Наименование дисконта или комиссии, которое
будет печататься в чеке
PAN входит Таблица PAN карты входит в одну из групп. Назначение
параметров BIN диапазона см. в табл. 21
Параметры BIN диапазона.
PAN не входит Таблица PAN карты не входит ни в одну из групп.
Назначение параметров BIN диапазона см. в табл.
21 Параметры BIN диапазона.Страница 174
UNIPOS Terminal
Руководство инженера
Разрешенные операции Поле Список операций, для которых применимы
правила. После выбора поля в правой его части
становится доступной кнопка со стрелкой после
нажатия которой открывается список доступных
финансовых операций. Установкой флажка слева
от наименования операции производитсяее выбор.
Минимальная сумма Поле Минимальное значение суммы с которого
применимы дисконт или комиссия
Максимальная сумма Поле Максимальное значение суммы до которой
применимы дисконт или комиссия
Порядок применения Поле Начисление или только информационное
выделение значения из общей суммы. Можно
выбрать два значения: Применение - в этом случае
итоговая сумма будет изменена на величину
скидки или наценки и результат выполнения
операции будет печататься на чеке (например,
сумма – 100 рублей, скидка – 5 рублей, итоговая
сумма – 95 рублей), Информация - в этом случае
итоговая сумма изменена не будет, а на чеке будет
печататься информация о назначаемых скидках
или наценках (например, например, сумма – 100
рублей, скидка – 5 рублей).
Метод применения Поле Способ применения расчета. Можно выбрать одно
из двух значений: Процентный, в этом случае
скидка или наценка будет вычисляться как
процент от суммы операции (значение
указывается в поле Значение
дисконта/комиссии) или Абсолютный, в этом
случае скидка или наценка будет значение поля
Значениедисконта/комиссии.
Тип применения Поле Устанавливает условия применения. Можно
выбрать одно из двух значений. Автоматически,
в этом случае скидка или комиссии будет
начисляться автоматически на все выбранные
разрешенные операции (при выборе данного
значение открывается доступ к заполению полей:
Основание применения и Значение
дисконта/комиссии). Запрос кассира, в
данном случае скидка или комиссия будет
начисляться с помошью ввода кассиром.
Основание применения Поле Основание применения. Можно выбрать одно из
двух значений: К текущему значению, тогда
процент скидки или наценки будет вычисляться
исходя из суммы финансовой операции с учетом
выполнения всех предыдущих скидок или
наценок, или К первоначальной сумме, тогда
процент для скидки или наценки будет
вычисляться только от суммы финансовой
операции без учета других скидок и наценок к этой
сумму финансовой операции.Страница 175
UNIPOS Terminal
Руководство инженера
Значение
дисконта/комиссии
Поле Значение дисконта или комиссии. В зависимости
от значения поля Метод применения будет
обозначать или проценты, или денежную сумму.
Если значение дисконта со знаком плюс (без
знака), значит устанавливается наценка, сумма
финансовой операции будет увеличена, если
минус – значит скидка, сумма финансовой
операции будет уменьшена.
Отмена скидки
сервесной картой
Поле Отказ от применения скидки/комиссии при
помощи сервисной карты.
Применение по тегу
9F6E
Поле Применение скидки для системы лояльности ДК
по тегу 9F6E
Дополнительное
описание
Поле Символьное поле для хранения пояснений и
дополнительных описаний к введенным
параметрам Данная информация на терминал не
передается.
1. в созданном правиле щелкнуть правой кнопкой мыши на папке PAN
входит и выбратьИзменить;
2. в открывшемся окне Выберите выбрать группу и нажать ОК;
3. щелкнуть правой кнопкой мыши на папке PAN не входит и выбрать
Изменить;
4. воткрывшемсяокнеВыберитевыбратьгруппуинажатьОК(см.рис.95).
Рисунок 95 Порядок отключения (подключения) BIN диапазонов к скидкам и наценкам
11.5 Справочник Типы счетов
В этом справочнике задаются типы банковских счетов, с которыми может
работать платежный терминал.Страница 176
UNIPOS Terminal
Руководство инженера
11.5.1 Создание нового счета
Для создания нового счета необходимо выполнить следующие действия (см.рис.
96):
Рисунок96 Порядоксозданияновоготипасчета
1. щелкнуть правой кнопкой мыши на папке Типы счетов и выбрать
Добавить ‘Счет’;
2. в открывшемся окне Создание: Счет ввести наименование нового счета и
нажать ОК;
3. заполнить поля вкладки Общие (см. табл. 24).
Таблица № 22 Назначение полей типов счетов
Наименование Тип объекта Описание
*Наименованиеa Поле Наименование типа счета. Создается на
этапе создания нового типа счета, в
дальнейшем может быть изменено.
*Идентификатор Поле Идентификатор счета.
Операции со счетом Поле Поле содержит раскрывающийся список, в
котором можно установив флажок слева от
наименования поля выбрать финансовые
операции, которые POS терминал может
выполнять с этим счетом. Можно выбрать
как одну, так и все финансовыеоперации.
Локализация Таблица Список наименований типов счетов на
разных языках. Описание полей дано в
табл. 24.
Дополнительное
описание
Поле Символьное поле для хранения пояснений
и дополнительных описаний к введенным
параметрам Данная информация на
терминал не передается.Страница 177
UNIPOS Terminal
Руководство инженера
a. Поля, наименования которых помечены знаком * обязательны к заполнению
11.5.2 Добавление описания языков и значений
Для добавления нового описания языков и значений необходимо выполнить
следующие действия (см. рис.97):
Рисунок97 Порядоксозданиялокализации
1. щелкнуть правой кнопкой мыши на папке Локализация и выбрать
Добавить ‘Язык’;
2. заполнить поля Язык и Строка вывода (см. табл. 25).Страница 178
UNIPOS Terminal
Руководство инженера
Таблица № 23 Назначение полей для локализации типов счетов
Наименование Тип объекта Описание
*Языкa Поле Наименование языка, на котором будут
выводиться сообщения. Значения выбираются из раскрывающегося списка.
*Строка вывода Поле Выводимый на экран терминала текст на
выбранном языке
a. Поля, наименования которых помечены знаком * обязательны к заполнению
11.6 Настройка справочника платежей
В том случае, если POS терминал будет использоваться для оплаты услуг
мобильной связи, коммунальныж платежей или других услуг, необходимо
выполнить настройки в Справочнике платежей. Для каждого типа платежа
необходимо настроить отдельный справочник платежей. Например, для оплаты
услуг сотовой связи необходимо настроить справочники платежей для каждого
оператора сотовой связи.
15
ПРИМЕЧАНИЕ: Данный справочник есть не во всех протокольных частях. В данном
случае приводится пример на сборке OpenWay Base.
16
Для создания и настройки нового справочника платежей необходимо выполнить
следующие действия (см. рис. 98):
1. Создать новыйсправочникплатежейиприсвоитьемусоответствующее
наименование;
2. В созданном справочнике заполнить поля для его использования
(назначение полей см. в табл. 26).Страница 179
UNIPOS Terminal
Руководство инженера
Рисунок98 Создание новогоплатежаСтраница 180
UNIPOS Terminal
Руководство инженера
Таблица № 24 Назначение полей справочника платежей
Наименование Тип объекта Описание
Наименование Поле Наименование платежа. Создается на этапе
создания нового платежа, в дальнейшем
может быть изменено.
Описание Поле Дополнительное описание платежа,
содержит более детальную иформацию о
назначении и особенностях использования
созданного платежа.
Код платежа Поле Заданный получателем платежа код,
который будет расшифрован им при
выполнении транзакции.
Тип платежа Поле Задется тип платежа. Возможные
варианты: Стотвая связь и Штрафы
ГИБДД.
Код оператора Поле Код получателя платежа, который будет
использован для переадресации платежа
хостом.
Запрашивать
детализацию
Поле Задает требование по детализации
платежа. Если задано значение Да, то
после ввода на POS терминале
информации по платежу будет показано
сообщение с требованием ввести
детализацию платежа, если Нет, то такого
сообщения выводиться не будет.
Название детализации
платежаa
Поле Ввести название детализации платежа,
полученное от получателя платежа,
например, Оплата телефона, Номер
кватанции ГИБДД и т.д.
Метод платежаb Поле Задает количество этапов проведения
платежа.
Если выбрано значение
«Двухпроводный», то платеж будет
проводится в два этапа:1. Кассир вводит
данные детализации, после чего
клиенту предлгается проверить и
подтвердить правильность введения
данных. (Возможна печать данных
детализации на чеке. Для этого
необходимо предварительно: создать
шаблон чека с типом «Финансовый чек»
в справочнике Шаблоны отчетов;
добавить созданные шаблон в
спровочник Профили терминалов –
Промежуточный чек). 2. Подтверждение
корректности дынных детализации и
проведение платежа.
Если выбрано значение
«Однопроходный», то операция будет
проведена сразу после ввода данных
детализации кассиром.Страница 181
UNIPOS Terminal
Руководство инженера
a. Данное поле будет доступным, если в поле Запрашивать детализацию выбрано значение Да
b. Данное поле будет доступным, если в поле Запрашивать детализацию выбрано значение НетСтраница 182
UNIPOS Terminal
Руководство инженера
11.7 Настройка справочника Группы пользователей
Для того, чтобы упростить работу с пользователями, их можно привязывать к
группампользователей,длякоторыхзадаютсяролииправа.Наэтапенастройки
параметров в программе Config Manager производится настройка групп
пользователей. Далее на терминале при создании того или иного пользователя
производится привязка создаваемого пользователя к той или иной группе.
Для создания и настройки новой группы пользователей необходимо выполнить
следующие действия (см. рис. 99):
Рисунок 99 Создание новой группыпользователей
1. ВспискесправочниковвыбратьсправочкинГруппы пользователей;
2. Щелкнуть правой кнопкой мыши на папке Группы пользователей и в
раскрывающемся меню выбрать Добавить Группа пользователей;
3. В открывшемся окне Создание: Группа пользователей ввести
наименование новой группы и нажать ОК;
4. В появившейся таблице заполнить необходимые поля (см. табл. 27).
Таблица № 25 Назначение полей справочника Группы пользователей
Наименование Тип объекта Описание
Наименование Поле Наименование вводится на этапе создания
новой группы, в дальнейшем это
наименование можно изменить.
Разрешенные
финансовые операции
Поле При выборе поля в правой его части
появляется кнопка с многоточием при
нажатии на которую открывается окно
Разрешенные финансовые операции, в
котором необходимо выбрать тип
разрешения для той или иной финансовой
операции и нажать ОК.
Разрешенные
административные
операции
Поле При выборе поля в правой его части
появляется кнопка с многоточием при
нажатии на которую открывается окно
Разрешенные административные
операции, в котором необходимо выбрать
тип разрешения для той или иной
административной операции и нажать ОК.Страница 183
UNIPOS Terminal
Руководство инженера
Роль Поле В раскрывающемся списке необходимо
выбрать роль для группы пользователей.
11.8 Настройка справочника Общие установки
СправочникОбщиеустановкисостоитизнесколькихнесвязанныхдругсдругом
групп параметров. Данные группы параметров содержат небольшие наборы
значений и объеденены вместе, чтобы сократить количество справочников В
данном разделе будут рассмотрены параметры, не связанные с настройками
сети.
11.8.1 Настройка вызовов по клавишам
Длясозданияинастройкиновойгорячейклавишинеобходимовыполнитьследу
ющиедействия(см.рис.100):
1. Выбрать справочник Общие установки;
2. Щелкнуть правой клавишей мыши по разделу Вызовы по клавишам и в
раскрывшемся меню выбрать команду Добавить 'Профиль горячих
клавиш';
3. В открывшемся окне Создание: профиль горячих клавиш ввести
наименование профиля и нажать ОК;
4. В поле Операция по умолчанию в раскрывающемся списке выбрать
необходимую операцию.
Рисунок 100 Создание новой горячейклавиши
11.8.2 Настройка наименований операций
Для создания и настройки новой команды необходимо выполнить следующие
действия(см.рис.101):
1. Выбрать справочник Общие установки;
2. В справочнике Общие установки щелкнуть правой кнопкой мыши поСтраница 184
UNIPOS Terminal
Руководство инженера
разделу Наименование операции;
3. В открывшемся окне Описание: Команда в раскрывающемся списке
выбрать необходимую операцию и нажать ОК;
4. Заполнить поля: Новое имя на дисплее для операции и Новое имя на чеке
для операции.
Рисунок101 Созданиеновойкоманды
11.8.3 Настройка групп изображений для печати на чеке
Длянастройкигруппизображений,необходимосначаласоздатьгруппу,азатем
прикрепить к этой группе необходимые изображения. Для создания новой
группы изображений необходимо выполнить следующие действия (см. рис. 102):
Рисунок102 Добавлениеновойгруппыизображений
1. В списке справочников выбрать Общие установки;
2. На панели структуры справочника найти папку Группы изображений для
печатиначеке,щелкнутьпонейправойкнопкоймышиивыбратьДобавить
'Группа изображений';
3. В открывшемся окне Создание: Группа изображений ввести наименованиеСтраница 185
UNIPOS Terminal
Руководство инженера
новойгруппы и нажать ОК;
4. При необходимости заполнить поле Дополнительное описание (данное
поле содержитсправочнуюинформациюинепередаетсянатерминал).
Для добавления нового изображения в имеющуюся группу необходимо
выполнитьследующиедействия(см.рис.103):
Рисунок103 Добавление новогоизображения вгруппу
1. В списке справочников выбрать Общие установки;
2. Напанелиструктурысправочниканайтипапкусгруппой(например,Группа
– Группа 1), щелкнуть по ней правой кнопкой мыши и выбрать Добавить
'Изображение';
3. В открывшемся окне Создание: Изображение ввести наименование для
ссылки на прикрепляемое изображение и нажать ОК;
4. После создания новой ссылки на изображение необходимо прикрепить bmp
файл, для чего выбрать полеИмя файла,нажать на появившуюся кнопку с
многоточием, открыть окно Файлы в БД и выбрать необходимое
изображение.
ПРИМЕЧАНИЕ: Подробное описание работы с окном Файлы в БД дано в руководстве
пользователя на Config Manager Station(Client).
После того, как в группе будет создано несколько ссылок на изображения, их
можно сортировать (менять местами). Для сортировки изображений необходимо
нажать левой кнопкой мыши на иконке соответствующего изображения и не
отпуская кнопки передвинуть это изображение вверх списка на нужное место.
Для того, чтобы отдельное изображение , или группа отображалась на
терминале, необходимо подключить ее в справочнике Организации (см.
подраздел13.3 Настройка параметров справочника Организации).
Изображения будут загружены в терминал автоматически на этапе загрузки
параметров. Для того, чтобы изображение отображались на чеке, необходимо
в шаблон этого чека для каждого изображения добавить следующую строку:
^I[Logo1.bmp]^
где Logo1.bmp – содержимое поля Название изображения из справочника
Общие установки соответствующей группы изображений.Страница 186
UNIPOS Terminal
Руководство инженера
Формат изображения: для всех типов терминалов формат изображения
один: максимальное разрешение изображения по горизонтали – ширина
принтера (можно оценить, как число символов в строке, умноженное на
количество точек в символе по горизонтали: 32ˣ12=384), если изображение
больше 384, правый край будет обрезан. Ширина изображения должна быть
кратна 8-ми. Максимальное разрешение по вертикали практически не имеет
ограничений. Формат изображений - BMP монохромный.Страница 187
UNIPOS Terminal
Руководство инженера
11.9 Настройка параметров справочника Группы изображений
Для терминалов, имеющих хорошие графические возможности предусмотрен
режим отображения рекламных изображений на этапе режима ожидания и
после проведения финансовых операций, дифференцированно для удачных
и неудачных. Терминальное ПО позволяет последовательно в заданном
порядке отобразить набор изображений, загруженных на терминал.
Для того, чтобы изображения отобразились на экране, файлы с графическими
изображениями должны соответствовать следующим требованиям:
1. Всеименафайловизображенийдолжныиметьанглоязычныеимена,т.к.
на терминале поддерживается только кодировка 1251.
2. Изображения должны иметь конкретное разрешение, чтобы изображение
правильно отображались на экране терминала. Для терминалов
VeriFone и PAX Prolin разрешение изображения должно совпадать с
разрешением экрана, то есть для терминалов с разрешением экрана
240 на 320 пикселей, разрешение должно составлять 240 на 320
пикселей, а для терминала с разрешением 320 на 240, разрешение
должно составлять 320 на 240 пикселей. Для терминалов PAX Monitor
Plus разрешение изображений следующее:
 Для экранов с разрешением 320 на 240 – разрешение
изображения должно быть 320 на 200 пикселей;
 Для экранов с разрешением 240 на 320 – разрешение
изображения должно быть 240 на 280 пикселей;
3. Поддерживаетсяограниченный набор форматов изображений:
1. для графической сборки: JPG, BMP (кроме глубины цвета 24 бит), GIF;
2. для не графической сборки: BMP.
Для выбора изображений и настройки алгоритмов их отображения предназначен
справочникГруппы изображений.Дляподключенияэтих группктемилииным
терминалам используются поля Выбранная группа изображенийсправочника
Терминалы (см. подраздел 13.4 Настройка параметров справочника Терминалы)
и Выбранная группа изображений справочника Организации (см. подраздел
Настройка параметров справочника Организации).
Для создания новой группы изображений необходимо выполнить следующие
действия(см.рис.104):Страница 188
UNIPOS Terminal
Руководство инженера
Рисунок104 Порядоксозданияновойгруппыизображений
1. В главном окне программы Config Manager в списке справочников
выбрать справочник Группы изображений;
2. ВсправочникеГруппыизображенийщелкнутьправойкнопкоймышина
папкеГруппыизображенийивраскрывшемсяспискевыбратьДобавить
Группа изображений;
3. В открывшемся окне Создание: Группа изображений ввести
наименования новой группы и нажать ОК;
4. При необходимости отредактировать содержимое полей таблицы для
созданной группы изображений (см. табл. 28).
Таблица № 26 Назначение полей группы изображений
Наименование Тип объекта Описание
*Название группыa Поле Текстовое поле, содержащее название
группы изображений, которое было
введено на этапе создания группы.
Тип изображения
группы
Поле В раскрывающемся списке можно выбрать
тип изображения группы (цветность и
размер). Для корректного отображения
изображений необходимо соблюдать размер
(в пикселах) и цветность. Сжатие
изображений недопустимо. Для цветных
изображений допускается использовать 1, 4,
8 и 24 битные изображения. Для черно
белых: 1 и 4 битные.
Задержка перед
началом показа Idle
изображений
Поле Числовое значение в милисекундах,
значение задержки от события, например,
окончания транзакции, до появления
первого изображения на экранетерминала.
a. Поля, наименования которых помечены знаком * обязательны к заполнению
Для сортировкиизображенийв группе необходимо выбратьизображениеиприСтраница 189
UNIPOS Terminal
Руководство инженера
нажатой левой кнопке мыши перетянуть изображение в дереве справочника
Группы изображений на новое место. Таким образом можно изменять порядок
изображений в группе.
Для добавления нового изображения в группу необходимо выполнить
следующие действия(см.рис.105):
Рисунок 105 Добавление нового изображения в группу изображений
1. Щелкнуть правой кнопкой мыши по той папке (группе изображений), в
которую необходимо добавить новое изображение (например, по папке По
умолчанию)ивраскрывшемсяспискевыбратьДобавить Изображение;
2. В открывшемся окне Создание: Изображение ввести наименование
добавляемого изображения и нажать ОК;
3. Отредактировать необходимое содержимоет полей таблицы для
прикрепляемого изображения (см. табл. 29).
Таблица № 27 Назначение полей, описывающих порядок использования изображения
Наименование Тип объекта Описание
*Название
изображенияa
Поле Текстовое поле, содержащее название
изображения, которое было введено на
этапе создания изображения.
Имя файла Поле При выборе данного поля в его правой части
появляется кнопка с многоточием, после
нажатия на которую открывается окно
Файлы в БД, в котором необходимо выбрать
файл с изображением и нажать ОК. Работа
в окне Файлы в БД подробно рассмотрены в
Руководстве пользователя на Config
Manager Station(Client).Страница 190
UNIPOS Terminal
Руководство инженера
Тип изображения Поле В этом поле в раскрывающемся списке
необходимо выбрать один из трех режимов
ожидания (режим, в котором будет
отображаться данное изображение:
• Режим ожидания - в этом режиме
терминальное ПО находится при его
бездействии.
• Успешное окончание транзакции - в
этом режиме терминальное ПО
находится некоторый промежуток
времени после успешного проведения
финансовой операции.
• Неуспешное окончание транзакции - в
этом режиме терминальное ПО
находится некоторый промежуток
времени после неудачного окончания
финансовой операции.
*Срок действия - дата Поле После выбора данного поля в правой его
части появляется кнопка со стрелкой после
нажатия на которую открывается
календать, в котором необходимо выбрать
дату окончания отображения данного
изображения на экране платежного
терминала.
Срок действия - время Поле После выбора данного поля в правой его
части становится доступной кнопка со
стрелкой, после нажатия на которую
открывается окно, в котором можно
установить необходимый временной срок.
Время суток - начало Поле После выбора данного поля в правой его
части становится доступной кнопка со
стрелкой, после нажатия на которую
открывается окно, в котором можно
установить ежесуточное время начала
отображения данного изображения.
Время суток - окончание Поле После выбора данного поля в правой его
части становится доступной кнопка со
стрелкой, после нажатия на которую
открывается окно, в котором можно
установить ежесуточное время окончания
отображения данного изображения.
Длительность (мс) Поле В данном поле необходимо в милисекундах
установить значение временного
промежутка, в течение которого будет
отображаться данный рисунок.
a. Поля, наименования которых помечены знаком * обязательны к заполнению
11.10 Использование справочника Логи
ДляведенияпротоколасобытийпрограммасоздаетзаписивсправочникеЛоги.
Для управления этими файлами предназначен справочник Логи. Подробно работа
с этим справочником рассматривается в документе UNIPOS Config Manager
Station Руководство пользователя. В данном подразделе приводятся только
сведения о назначении параметров, отображаемых в данном справочнике.Страница 191
UNIPOS Terminal
Руководство инженера
Если в справочнике Логи открыть содержимое записи, соответствующей номеру
терминала (наименование log– файла соответствует номеру терминала), то на
панели параметров отобразится информация о действиях с тем или иным
терминалом (см. рис. 106).
Рисунок106 ПорядокиспользованиясправочникаЛоги
Количество полей может меняться в зависимости от того, была ли произведена
загрузка ПО и параметров на терминал. Информация о назначении полей
представлена в таблице (см. табл. 30).
Таблица № 28 Назначение полей справочника Логи
Наименование Тип объекта Описание
Терминал Поле Идентификатор терминала для которого
ведётся логирование
Дата-время
опубликования
Поле Дата-время опубликования параметров
терминала
Дата-время изменения Поле Дата-время изменения параметров
терминала
Дата-время создания Поле Дата-время создания параметров
терминала
Дата-время загрузки Поле Дата-время загрузки параметров
терминала
Статус Поле Результат опубликования параметров
терминала
Пользователь Поле Имя пользователя производившего
манипуляции с параметрами
Загруженные файлы Таблица Список файлов, загруженных втерминал:
• Имя загруженного файла;
• Время загрузки файла;
• Результат загрузки файла.
Имеет лицензию в БД поле Указывает на наличие лицензии в базе
данных: Да – имеет, Нет – не имеет.Страница 192
UNIPOS Terminal
Руководство инженераСтраница 193
UNIPOS Terminal
Руководство инженера
Раздел 12 Настройка связанных
справочников
Как уже было сказано в предыдущем разделе, настройка параметров POS
терминалов организована в виде справочников. Все справочники можно
разделить на четыре типа.
Первый тип – это справочник Терминалы. В этом справочнике группируются
полные комплекты настроек для их загрузки на POS терминал. Часть
параметров устанавливаются в этом справочнике, но одинаковые наборы
параметров, которые могут быть использованы для всех или нескольких POS
терминалов группируются в отдельных справочниках и подключаются в
справочнике Терминалы как ссылки на группу параметров.
Второй тип – это связанные справочники. С одной стороны, в этих
справочниках группируются наборы параметров, которые в дальнейшем
будут подключены при настройке того или иного терминала. С другой
стороны, в этих справочниках используются наборы параметров из других
справочников. Например, справочник Профили терминалов. Содержимое
этого справочника используется для заполнения полей справочника
Терминалы. При этом сам справочник Профили терминалов использует
содержимое справочников Шаблоны отчетов, Дисконты и комиссии и т.д. для
заполнения своих полей.
Третий тип – это сложные справочники. Все необходимые параметры
вводятся непосредсвенно в полях данного справочника, однако такой тип
справочника имеет многоуровневую структуру. Т.е. сначала создаются
разделы верхнего уровня, затем, для каждого раздела верхнего уровня могут
быть созданы подразделы, а для каждого созданного подраздела могут быть
созданы свои подразделы.
Четвертый тип – это простые справочники. Они состоят из набора разделов,
имеющих название и набор однотипных полей.
В данном разделе рассматриваются связанные справочники и справочник
Терминалы, как вариарт зависимого справочника. Материал
рассматривается таким образом, чтобы используемые справочники
рассматривались раньше, чем справочники использующие настройки
используемых. Т.е. настройка справочника Терминалы будет рассмотрена
последней.Страница 194
UNIPOS Terminal
Руководство инженера
12.1 Настройка параметров справочника Эквайринговыесети
Для работы терминала должна быть настроена эквайринговая сеть. В
зависимости от версии поставляемого терминального ПО может
использоваться тот или иной протокол взаимодействия с процессинговым
центром. При этом терминал может работать с серверами, расположенными
в различных банках или филиалах. Для терминала это будут различные
эквайринговые сети, которые необходимо настраивать отдельно друг от
друга.
По умолчанию вместе с терминальным ПО поставляется типовая база
данных, имеющая набор наиболее стандартных и употребительных настроек
для POS терминалов исходя из поддерживаемой данной версией ПО
протокола. В этой базе по умолчанию уже присутствует необходимая
эквайринговая сеть с типовыми настройки. Однако, исходя из того, что для
работы может потребоваться взаимодействовать с несколькими
процессинговыми центрами, может потребоваться создавать несколько
наборов данных, т.е. создавать дополнительные эквайринговые сети.
В общем виде, для создания и настройки новой эквайринговой сети
необходимо выполнить следующие действия:
1. всправочникеЭквайринговыесетисоздатьновуюэквайринговуюсеть;
2. заполнить списокМПС;
3. заполнить списоквалют;
4. настроить подключение к серверу авторизации;
12.1.1 Создание новой эквайринговой сети
Для создания новой эквайринговой сети необходимо выполнить следующие
действия (см. рис. 107):
Рисунок107 Созданиеновойэквайринговойсети
17
ПРИМЕЧАНИЕ:Данный пример рассмотрен на сборке OpenWay Base, набор полей дляСтраница 195
UNIPOS Terminal
Руководство инженера
других протоколов может отличаться.
18
1. щелкнуть правой кнопкой мыши на папке Эквайринговые сети и
выбрать Добавить ‘Эквайринг’;
2. в открывшемся окне Создание: Эквайринг ввести наименование новой
сети и нажать ОК;
3. на панели параметров во вкладке Общие заполнить поля Часовой пояс,
Переход на летнее время и при необходимости Файл с доверительным
SSL/TLS сертификатом и Проверка расширения extandedKeyUsage;
4. затем необходимо заполнить поля раздела Отчеты по сервисным
операциям.
Таблица № 29 Назначение полей справочника Эквайринговые сети
Наименование Тип объекта Описание
*Наименование сетиa Поле Наименование эквайринговой сети.
Создается на этапе создания новой
эквайринговой сети, в дальнейшем может
быть изменено.
Список обслуживаемых
МПС
Таблица Список обслуживаемых МПС в данной
эквайринговой сети. Состоит из набора
однотипных таблиц, описывающих
обслуживаемые МПС. Назначение полей
для обслуживаемой МПС см. в табл. 31
Назначение полей подраздела
Обслуживаемые МПС.
Валюты Таблица Список валют, в которых возможны
операции в данной эквайринговой сети.
Состоит из набора однотипных таблиц,
которые берутся из справочника Валюты
(см. табл. 14 Назначение полей
справочника Валюты на стр. 147).
Параметры хоста
авторизации
Таблица Параметры хоста авторизации для данной
эквайринговой сети. Состоит из набора
однотипных таблиц, описывающих
параметры хоста авторизации.
Назначение полей см. в табл. 32.
Часовой пояс Поле Часовой пояс хоста эквайринга
Переход на летнее
время
Поле Позволяет включить или отключить автоматический переход на летнее время
Файл с доверительным
SSL/TLS сертификатом
Поле Если на хосте используется SSL/TLS –
шифрация, то в этом поле необходимо
выбрать соответствующий серверный
сертификат.
Проверка расширения
extendedKeyUsage
Поле Проверка наличия у сертификата
расширения extendedKeyUsage с
соответствующим значением. Для
доверительного сертификата «serverAuth»
(Object identifier = 1.3.6.1.5.5.7.3.1)Страница 196
UNIPOS Terminal
Руководство инженера
Дополнительное
описание
Поле Символьное поле для хранения пояснений и
дополнительных описаний к введенным
параметрам Данная информация на терминал не передается.
Отчет по операции
'Сверка итогов'b
Поле Позволяет выбрать из раскрывающегося
списка и подключить шаблон отчета по опе
рации 'Сверка итогов'. Содержимое раскрывающегося списка определяется шаблонами
отчетов, созданными в справочнике Шаблоны отчетов.
Отчет по операции
'Смена ключей'
Поле Позволяет выбрать из раскрывающегося
списка и подключить шаблон отчета по опе
рации 'Смена ключей'. Содержимоераскрывающегося списка определяется шаблонами
отчетов, созданными в справочнике Шаблоны отчетов.
Отчет по операции 'Проверка связи'
Поле Позволяет выбрать из раскрывающегося
списка и подключить шаблон отчета по
операции 'Проверка связи'. Содержимое
рас- крывающегося списка определяется
шаблонами отчетов, созданными в справочнике Шаблоны отчетов.
a. Поля, наименования которых помечены знаком * обязательны к заполнению
b. Поля Отчет по операции 'Сверка итогов', Отчет по операции 'Смена ключей' и Отчет по операции 'Проверка связи' объеденены в подраздел Отчеты по сервисным операциям
Для созданной эквайринговой сети необходимо подключить данные из других
справочников по международным платежным системам, валютам и сетевым
настройкамхостаавторизации.КакминимумдолжнабытьоднаМПС,одна
валюта и один вход для хоста авторизации.
12.1.2 Заполнение списка МПС
Для заполнения списка МПС необходимо выполнить следующие действия (см.
рис. 108):Страница 197
UNIPOS Terminal
Руководство инженера
Рисунок108 ПорядокдобавленияобслуживаемойМПС
1. щелкнуть правой кнопкой мыши на папке Список МПС и выбрать
Добавить 'Обслуживаемая МПС';
2. заполнить поля Платежная система и Идентификатор эквайера
(идентификатор должен содержать 6 символов);
3. выполнить действия, описанные в пп. 1 – 2 для всех обслуживаемых
данной эквайринговой сетью МПС.
Таблица № 30 Назначение полей подраздела Обслуживаемые МПС
Наименование Тип объекта Описание
*Платежная системаa Поле Ссылка на платежную систему. В данном
поле из раскрывающегося списка
необходимо выбрать наименование
платежной системы, созданной в
справочнике Платежные системы. После
выбора этого наименования к
настраиваемой эквайринговой сети будет
подключен набор параметров, созданных
для выбранной платежной системы.
*Идентификатор
эквайера
Поле Идентификатор эквайера в этой сети МПС
a. Поля, наименования которых помечены знаком * обязательны к заполнению
12.1.3 Заполнение списка валют
Для заполнения справочника валют необходимо выполнить следующие действия
(см.рис.109):Страница 198
UNIPOS Terminal
Руководство инженера
Рисунок109 Порядокдобавлениявалют
1. щелкнутьправойкнопкоймышинапапкеВалютыивыбратьИзменить;
2. в открывшемся окне Выберите выбрать валюты, используемые в
настраиваемой эквайринговой сети и нажать ОК;
3. проверить, что валюты отобразились в справочнике Валюты
настраиваемой эквайринговойсети.
ПРИМЕЧАНИЕ: Перед тем, как заполнять справочник валют для эквайринговой сети
необходимо убедиться, что все необходимые валюты присутствуют в справочнике Валют.
Есликакие–либо валюты отсутствуют, ихнеобходимо добавитьвсправочнике Валют.
12.1.4 Настройка подключения к серверу авторизации
Для настройки подключения к серверу авторизации необходимо выполнить
следующиедействия(см.рис.110):Страница 199
UNIPOS Terminal
Руководство инженера
Рисунок 110 Порядок настройки параметров для хоста авторизации'
1. щелкнуть правой кнопкой мыши на папке Список входов и выбрать
Добавить ‘Вход’;
2. заполнить полеСеть;
3. щелкнуть правой кнопкой мыши на папке Список портов и выбрать
Добавить ‘Порт’;
4. заполнить полеАдрес;
5. повторить действия, описанные в пп. 1 – 4 длявсех входов и портов.
ПРИМЕЧАНИЕ: Формат ввода адреса хоста: ххх.ххх.ххх.ххх:уууу, где ххх.ххх.ххх.ххх – IP адрес в локальной сети, а уууу – номер порта. Для одного хоста, может быть настроено два и
более порта. В случае отсутствия связи по текущему порту автоматически производится
переход и связь последующему.
Таблица № 31 Назначение полей подраздела Хост авторизации
Наименование Тип объекта Описание
Список входов Таблица Список входов хоста, дифференцированный
по коммуникациям. Назначение полей
подраздела Список входов описано в табл.
33 Назначение полей подраздела Вход.
NII Поле Сетевой международный идентификатор,
используемый для связи с хостом через IEN.
Дополнительное
описание
Поле Символьное поле для хранения пояснений и
дополнительных описаний к введенным
параметрам Данная информация на
терминал не передается.
Таблица № 32 Назначение полей подраздела Вход
Наименование Тип объекта Описание
*Сетьa Поле В раскрывающемся списке необходимо
выбрать одну из поддерживаемых
программой сеть передаци данных.
Список портов Таблица Содержит набор полей *Адрес
(IP адрес:порт используемые хостом авторизации).
a. Поля, наименования которых помечены знаком * обязательны к заполнению
12.2 Настройка параметров справочника Профили терминалов
Для настройки справочника Профили терминалов используются наборы
параметров, созданные в справочниках Карточные продукты, Шаблоны отчетов,
Дисконты и комиссии и Справочник платежей. Назначение этого справочника
состоит в том, чтобы создавать наборы параметров, относящихся к финансовым
операциямиподключатьихктомуилииномуразделусправочникаТерминалыв
видессылкинатотилиинойпрофильтерминалов.Страница 200
UNIPOS Terminal
Руководство инженера
В шаблонной базе данных параметров, прилагаемой к терминальному ПО по
умолчанию создан как минимум один профиль терминалов со стандартным
набором параметров. Он может быть использован как основа для созданим
необходимых профилей, используемых для настройки параметров терминала.
Длякаждогопрофилянаборпараметровсгруппированвпятьразделов,каждый
из которых заполняется самостоятельно:
1. Карточные продукты;
2. Промежуточный чек
3. Финальный чек;
4. Отчеты;
5. Дисконты икомиссии;
6. Платежи.
В обязательном порядке должны быть заполнены параметры (хотя бы один набор)
дляпервыхтрехразделов.Остальныеразделызаполняютсяпринеобходимости.
Далее будет рассмотрен порядок создания нового профиля, его разделов и
назначениевводимыхпараметров.Страница 201
UNIPOS Terminal
Руководство инженера
12.2.1 Создание нового профиля
Для создания нового профиля терминала необходимо выполнить следующие
действия(см.рис.111):
19
ПРИМЕЧАНИЕ:Данный пример рассмотрен на сборке OpenWay Base, набор полей для
других протоколов может отличаться.
20
Рисунок 111 Порядок создания нового профиля терминала
1. щелкнуть правой кнопкой мыши на папке Профили терминалов и
выбрать Добавить’Профиль’;
2. воткрывшемсяокнеСоздание: Профильввестинаименованиеинажать
ОК;
3. заполнитьпараметрыразделаОбщиедлявновьсозданногопрофиля(см.
табл. 35).
Таблица № 33 Назначение параметров справочника Профили терминалов
Наименование Тип объекта Описание
*Имяa Поле Наименование профиля терминала. В
наименовании лучше отразить место
установки и специализацию профиля,
например, "POS гостиница".
*Тип терминала Поле Выбор типа терминала по месту установки.
Из раскрывающегося списка необходимо
выбрать одно из трех значений: POS –
точка продажи, BBT – пункт выдачи
наличных (в этом режиме становится
недоступным поле Подтверждение
суммы клиентом в разделе EMV
параметры), QUASI – пункт выдачи того,
что не является ни товаром ни наличными,
например, фишки в казино.
Карточные продукты Таблица Принимаемые к обслуживанию карточные
продукты. Список формируется из
предварительно сформированного
справочника карточных продуктов.Страница 202
UNIPOS Terminal
Руководство инженера
Визуальные проверки Поле Визуальная проверка, имеет двазначения:
4 цифры и Выключена.
• В первом случае производится путем
ввода последних 4 цифр номера карты,
отпечатанных на ее лицевой стороне.
Проверка производится только для
магнитных карт;
• Во втором случае визуальная проверка
не производится.
Force Online Поле Возможность для продавца принудительно
выполнить операцию в онлайн режиме.
Можно выбрать Да или Нет.
Оплата за наличные Поле Позволяет произвести оплату наличными
для операции «Платеж».
Можно выбрать Да или Нет.
Выдача наличных по
коду
Поле Операция получения наличных по коду
состоит из 2-х этапов.
1) Операция Авторизация наличных, в
результате чего печатается чек с
кодом.
2) Операция Наличные по коду, в
результате чего можно получить
наличные по чеку с кодом, без
использования карты.
Можно выбрать Да или Нет.
Операции MOTO Поле Список операций, разрешенных к
выполнению в MOTO режиме. В данном
поле в раскрывающемся списке необходимо
установить флаг слева от наименования
операции. Можно выбрать как ни одной так
и все операции.
Промежуточный чек Таблица Печатный документ финансовой операции -
чек. Набор таблиц, подключающих
шаблоны чеков. Выбирается ссылка на
шаблон чека, созданный в справочнике
Шаблоны отчетов.
Финальный чек Таблица Печатный документ финансовой операции -
чек. Набор таблиц, подключающих
шаблоны чеков. Выбирается ссылка на
шаблон чека, созданный в справочнике
Шаблоны отчетов.
Отчёты Таблица Список отчетов для профиля. Включает
набор отчетов, наиболее полно отражающих
специфику профиля. Набор таблиц,
подключающих шаблоны отчетов.
Выбирается ссылка на шаблон отчета,
созданный в справочнике Шаблоны
отчетов.Страница 203
UNIPOS Terminal
Руководство инженера
Дисконты и комиссии Таблица Дисконты и комиссии. Наборприменяемых
в профиле дисконтов или комиссий.
Правила будут выполняться в порядке их
следования. Набор таблиц, подключающих
дисконты и комиссии. Выбирается ссылка
на дисконт или комиссию, созданные в
справочнике Дисконты и комиссии.
Платежи Таблица Доступные платежи. Набор таблиц,
подключающих доступные платежи.
Выбирается ссылка на платеж, созданный
в Справочнике платежей.
Использование прямой
отмены
Поле Включает или отключает режим
использования прямой отмены. Можно
выбрать одно из двух значений Да или Нет.
Дополнительное
описание
Поле Символьное поле для хранения пояснений
и дополнительных описаний к введенным
параметрам Данная информация на
терминал не передается.
Свойства терминала
(Terminal Capabilities)
Поле EMV свойства терминала (Terminal
Capabilities - '9F33'). При выборе поля
становится доступной кнопка с
многоточием в правой части поля. После
нажатия этой кнопки открывается окно
Terminal Capabilities (TAG 9F33)
вкладка Byte 1 Card Data Input
Capability. Настройка полей этой вкладки
будет рассмотрена в подразделе 13.2.2
Создание нового карточного продукта.
Доп. свойства терминала (Additional
Terminal Capabilities)
Поле EMV дополнительные характеристики
терминала (Additional Terminal Capabilities
- '9F40'). При выборе поля становится
доступной кнопка с многоточием в правой
части поля. После нажатия этой кнопки
открывается окно Terminal Type
Capabilities (TAG 9F40) вкладка Byte 1
Transaction Type Capability. Настройка
полей этой вкладки будет рассмотрена в
подразделе 13.2.2 Создание нового
карточного продукта.
Отказ от ввода ПИНа Поле Опция разрешения отказа от ввода ПИНа
клиентом. Для терминалов ПВН отказ от
ввода ПИНа запрещен. Можно выбрать
одно из двух значений Да или Нет.
EMV решение при
отсутствии связи
Поле Решение по EMV операции при отсутствии
связи. Возможно одно из трех значений:
Отказать, Выбор кассира и Решение ТАС.
EMV Threshold Value Поле Параметр EMV для процедуры Random
Transaction Selection (TRM).
EMV Target Percentage Поле Параметр EMV для процедуры Random
Transaction Selection (TRM).
EMV Maximum Target
Percentage
Поле Параметр EMV для процедуры Random
Transaction Selection (TRM).Страница 204
UNIPOS Terminal
Руководство инженера
Подтверждение клиентом
Поле Подтверждение суммы операции
клиентом. Для типа терминала ВВТ это
поле отсутствует.
a. Поля, наименования которых помечены знаком * обязательны к заполнению
12.2.2 Создание нового карточного продукта
Для создания нового карточного продукта необходимо выполнить следующие
действия(см.рис.112):
ПРИМЕЧАНИЕ: Создание карточного продукта в справочнике Профили терминалов, по
сути, является вторым этапом создания настроек карточных продуктов, с которыми
будет работать платежный терминал. На первом этапе были созданы настройки
карточных продуктов, которые задаются МПС, с которыми будет работать платежный
терминал. На втором этапе, в справочнике Профили терминалов после создания нового
карточного продукта в папке Карточные продукты в поле Карточный продукт
необходимо выбрать один из созданных ранее в справочнике Платежные системы
карточный продукт тем самым подключая все сделанные ранее настройки для этого
карточногопродуктавсправоч нике Платежные системы.
Рисунок 112 Порядок создания нового карточного продукта
1. щелкнуть правой кнопкой мыши на папке Карточные продукты и
выбрать Добавить ‘Карточныйпродукт’;
2. заполнить поля для созданного карточного продукта (см. табл. 35)
3. в том случае, если используются отдельные правила верификации для
магнитного считывателя, необходимо выполнить следующие шаги (более
подробно эти действия рассматриваются в подразделе 13.2.3 Настройка
проверок по карте):
1. раскрыть содержимое карточного продукта и выбрать подразделСтраница 205
UNIPOS Terminal
Руководство инженера
Верификация держателя магн. карты;
2. щелкнуть правой кнопкой мыши по записи Верификация держателя
магн. карты и в раскрывшемся меню выбрать Добавить Верификация
держателя магн. карты;
3. заполнить поля для создавшегося подраздела Использовавть Service
Code.
В том случае, если пользователю необходимо организовать многоступенчатую
систему верификации держателя контактной карты используется значение Да в
поле Использовать CVM limit. В этом случае становится доступным набор
дополнительных полей (см. табл. 36).
Таблица № 34 Назначение полей подраздела Карточные продукты
Наименование Тип объекта Описание
*Карточный продуктa Ссылка Выбранный карточный продукт.
Раскрывающийся список, в котором можно
выбрать ссылку на один из созданных в
справочнике Платежные системы карточный
продукт.
*Технологический тип
карты
Ссылка Технологический тип карты. Задается
интерфейс взаимодействия пластиковой
карты с POS терминалом. Можно выбрать
одно из следующих значений:
• Магнитная и контактная;
• Магнитная;
• Контактная;
• Беспонтактная.
*EMV Application Select
Indicator
Поле Установка EMV Application Select Indicator
при формировании Candidate List. Можно
установить одно из двух значений Да –
устанавливать или Нет – не устанавливать.
Разрешенные операции Поле Список операций, применимых для
выбранного карточного продукта. После
выбора поля в правой его части появляется
кнопка с многоточием после нажатия на
которую открывается окно Выберите, в
котором можно добавить или удалить
разрешенные операции из списка
доступных финансовых операций.
*Transaction Limit Поле Верхний лимит суммы бесконтактной
операции в базовой валюте.
Максимальное значение не более
4294967295.
*Terminal Floor Limit -
domestic
Поле Верхний лимит в базовой валюте для
офлайн операций по магнитной карте для
местных операций
*Terminal Floor Limit -
International
Поле Верхний лимит в базовой валюте для
офлайн операций по магнитной карте для
международных операций
Верификации
держателей магнитной
карты
Таблица Список верификаций держателей
магнитной карты. Описание параметров
дано в табл. 36.Страница 206
UNIPOS Terminal
Руководство инженера
Верификация
держателя контактной
карты
Таблица Список верификаций держателей
контактной карты. Описание параметров
дано в табл. 36.
Terminal Capabilities
для продуктаb
Поле Индивидуальные EMV свойства терминала
для каждого продукта (Terminal
Capabilities – «9F33»). При выборе поля
становится доступной кнопка с многоточием
в правой части поля. После нажатия этой
кнопки открывается окно Terminal Capabilities
(TAG 9F33) вкладка Byte 1 Card Data Input
Capability(см.рис.113).
Доп.свойстватерминала
(Additional Terminal
Capabilities)c
Поле Индивидуальные EMV дополнительные
характеристики терминала для каждого
продукта (Additional Terminal Capabilities –
«9F40»). При выборе поля становится
доступной кнопка с многоточием в правой
части поля. После нажатия этой кнопки
открывается окно Terminal Type
Capabilities (TAG 9F40) вкладка Byte 1
Transaction Type Capability (см.рис.113).
* EMV TAC Denial Поле EMV параметр терминала TAC Denial
* EMV TAC Online Поле EMV параметр терминала TACOnline
* EMV TAC Default Поле EMV параметр терминала TACDefault
*Разрешить FallBack Поле Разрешение проводить операцию по
магнитной полосе при невозможности
выполнить операцию с чипом. В
раскрывающемся списке можно выбрать
одно из двух значений: Да или Нет.
a. Поля, наименования которых помечены знаком * обязательны к заполнению
b. Данное поле дублируется, используется как в справочнике Карточные продукты, так и в справочнике
Профили терминалов. Программа сначала ищет это значение в справочнике Карточные продукты, а затем
в справочнике Профили терминалов.
c. Данное поле дублируется, используется как в справочнике Карточные продукты, так и в справочнике
Профили терминалов. Программа сначала ищет это значение в справочнике Карточные продукты, а затем
в справочнике Профили терминалов.
ПРИМЕЧАНИЕ: Для заполнения полей Terminal Capabilities для продукта предназначено
специальное окно Terminal Capabilities (TAG 9F33), а для заполнения поля Доп. свойства
терминалапредназначено окноAdditionalTerminal Capabilities (см. рис.113).Страница 207
UNIPOS Terminal
Руководство инженера
Рисунок113 Окнадлязаполненияполейсвойствпродуктаитерминала
Втомслучае,еслииспользуютсяпластиковыекартысмагнитнойполосой,встает
вопрос приоритета использования карточных продуктов, имеющих одинаковый
BIN диапазон. В данном случае приоритет задается порядком следования записей
по пластиковым картам в справочнике Профили терминалов для каждого
профилявотдельности(см.рис.114).
Рисунок 114 Приоритет использования пластиковых карт
Например, см. рисунок выше, для профиля POS наивысший приоритет будет
иметькартаMaster Card Standart – Магнитная и контактная,затемVISA
Classic – Магнитная и контактнаяинаименьшийприоритетбудет укарты
Maestro – Бесконтактная. В том случае, если необходимо изменить приоритет
карточных продуктов, необходимо изменить порядок их следования.
Для измененияпорядкаследованиякарточныхпродуктовнеобходимо выбрать
необходимый карточный продукт и удерживая нажатой левую кнопку мыши,
перетащить запись с выбранным карточным продуктом в нужное место. После
того, какзаписьбудетперетащена,необходимоотпуститькнопкумыши,ипосле
этого выбранная запись переместится на новое место.
12.2.3 Настройка проверок по карте
После создания карточного продукта, в случае необходимости, для него
настраиваются проверки для держателей пластиковых карт с магнитной полосой.
Терминальное ПО позволяет создавать различные проверки для выполнения
различныхопераций.
Для создания новой проверки необходимо выполнить следующие действия (см.Страница 208
UNIPOS Terminal
Руководство инженера
рис. 115);
1. выбрать карточный продукт, щелкнуть в нем правой кнопкой мыши на
элементе Верификация держателя магнитной картыи выбрать Добавить
‘Верификация держателя магн. карты’;
2. в поле Метод верификации из раскрывающегося списка выбрать
необходимый метод;
3. в поле Операции в раскрывшемся списке выбрать те операции, к которым
будет применен выбранный ранее метод верификации;
4. в том случае, если необходимо создать ряд проверок, выполнить действия,
описанные в пп. 1 – 3 для всех необходимых проверок.
Рисунок115 Порядоксозданияпроверки
Таблица№35 Поля подраздела Верификация держателей карты
Наименование Тип объекта Описание
Операции Поле Список операций, к которым применяется
метод верификации
Метод верификации Поле Установка метода верификации держателя
для магнитного карточного продукта.
Можно выбрать одно из следующих значений:
• Использовать Service Code;
• Использовать ПИН, при отказе – подпись;
• Использовать только ПИН;
• Использовать только подпись;
• Не использовать верификацию;
• Ввод пин–кода определяется кассиром.
CVM limit Поле Минимальное значение суммы, начиная с
которого будут использоваться указанные
ниже EMV Terminal CapabilitiesСтраница 209
UNIPOS Terminal
Руководство инженераСтраница 210
UNIPOS Terminal
Руководство инженера
12.3 Настройка параметров справочника Организации
В справочнике Организации производится настройка параметров, относящихся к
юридическим лицам. Юридическим лицом в терминологии UNIPOS является
организация, использующая платежный терминал для проведения
финансовых операций. Например, торговая точка или отделение банка,
работающее с физическими лицами. Терминальное ПО позволяет настроить
терминал для работы с несколькими организациями. Например, терминал
может использоваться несколькими торговыми точками.
ПРИМЕЧАНИЕ: Структура параметров организована таким образом, что терминал могут
использовать несколько организаций, для каждой организации может использоваться
несколько профилей и у каждого профиля может быть настроено несколько ID терминала.
Т.е. структураорганизованаввидедерева.
Для настройки юридических лиц используются справочники Организации и
Терминалы. В справочнике Организации вводятся все необходимые данные по
той или иной организации, а в справочнике Терминалы подключаются те
организации, которые могут использовать данныйтерминал.
12.3.1 Создание новой организации
Для создания новой организации необходимо выполнить следующие действия
(см.рис.116):
Рисунок116 Порядоксозданияновойорганизации
1. щелкнуть правой кнопкой мыши на папке Организации и выбрать
Добавить ‘Организация’;
2. в открывшемся окне Создание: Организация ввести наименование и
нажать ОК;Страница 211
UNIPOS Terminal
Руководство инженера
3. заполнить значения параметров вкладки Общие (см. табл. 38).
Таблица № 36 Назначение полей справочника Организации
Наименование Тип объекта Описание
*Имяa Поле Наименование организации-продавца.
*Код категории
продавца
Поле Код категории продавца. Classifies the type
of business being done by the merchant,
represented according to ISO 8583:1993 for
Card Acceptor Business Code.
*Назначение
терминала
Поле Назначение терминала для использования
либо в ПВН, либо в ТСП.
Продавец Поле Наименование продавца на английском
языке (EMV Tag 9F4E).
Регистрация в МПС Таблица Список регистраций продавца вразличных
платежных системах. При регистрации в
каждой из МПС участник получает свой
уникальный идентификатор MerchantId.
Валюты Таблица Список валют, поддерживаемых на терминалах данной организации.
Пользователи Таблица Список зарегистрированныхпользователей
Выбор диалога языка Поле Правило для диалога выбора языка
клиентом. В точках обслуживания
разноязычных клиентов желательно
выбрать данную опцию для выбора языка:
Диалог отключен - выбор языка не
используется; Диалог включен по
спецификации - всегда предлагается выбор
языка; Диалог включается по мере
необходимости - перед первым клиентским
диалогом.
Выбранная группа
изображений
Поле Выбор группы изображений для
отображения на экране терминала. В
раскрывающемся списке можно выбрать
одно из следующих значений:
• Запрет изображений - в этом режим
ни одно из имеющихся изображений,
созданных в справочнике Группы
изображений, не будет доступно для
платежных терминалов, имеющих в
поле Выбранная группа
изображений справочника
Терминалы значение Использовать
настройки организации.
• Выбрать вручную - в этом режиме при
установленном значении
Использовать настройки
организации в справочнике
Терминалы для всех терминалов,
использующих настройки данной
организации будет использована
группа изображений, выбранная в
появившемся поле группа
изображений.Страница 212
UNIPOS Terminal
Руководство инженера
Изображения для
печати на чеке
Поле Выбор группы изображений для печати на
чеке. В раскрывающемся списке можно
выбрать одно из следующих значений:
• Запрет изображений - в этом режим
ни одно из имеющихся изображений,
созданных в справочнике Группы
изображений, не будет доступно для
платежных терминалов, имеющих в
поле Выбранная группа
изображений справочника
Терминалы значение Использовать
настройки организации.
• Выбрать вручную - в этом режиме при
установленном значении
Использовать настройки
организации в справочнике
Терминалы для всех терминалов,
использующих настройки данной
организации будет использована
группа изображений, выбранная в
появившемся поле группа
изображений.
Дополнительные
отчёты
Таблица Список дополнительных отчетов для
юридического лица. В список могут входить
специализированные отчеты, печатаемые
из меню Отчеты.
Логотип в чеке Поле Графический логотип при печати чека.
Необходимо указать файл логотипа.
Дополнительное
описание
Поле Параметр на терминал не передается.
Отчет сверки итогов
(итоги совпали)
Ссылка В раскрывающемся списке можно выбрать
ссылку на один из шаблонов, созданный
ранее в справочнике Шаблоны отчетов
Отчет сверки итогов
(итоги не совпали)
Ссылка В раскрывающемся списке можно выбрать
ссылку на один из шаблонов, созданный
ранее в справочнике Шаблоны отчетов
a. Поля, наименования которых помечены знаком * обязательны к заполнению
12.3.2 Регистрация организации в МПС
После создания новой организации необходимо указать те международные
платежные системы, с которыми данный терминал может работать. Для
регистрации новой платежной системы необходимо выполнить следующие
действия (см. рис. 117):
1. щелкнуть правой кнопкой мыши на папке Регистрация в МПС и выбрать
Добавить ‘Регистрация’;
2. в окне Создание ‘Регистрация’ выбрать платежнуцю и в поле
Идентификатор продавцаввести необходимое значение.Страница 213
UNIPOS Terminal
Руководство инженера
Рисунок 117 Порядок создания новой регистрации
12.3.3 Добавление используемых валют
После создания новой организации необходимо добавить перечень валют,
которые будут использоваться при проведении финансовых операций этой
организацией. Для добавления новой валюты необходимо выполнить следующие
действия(см.рис.118):
1. щелкнутьправойкнопкоймышинапапкеВалютыивыбратьИзменить;
2. в открывшемся окне Выберите выбрать необходимую валюту на панели
Все элементы и нажать кнопку со знаком больше (в том случае, если
необходимо выбрать несколько валют необходимо удерживая нажатой
клавишу CTRL щелкнуть кнопкой мыши по выбираемым валютам);
3. проверить, что все необходимые валюты отображаются на панели
Выбранные элементы и нажатьОК.Страница 214
UNIPOS Terminal
Руководство инженера
Рисунок 118 Порядок подключения валют
12.3.4 Добавление дополнительных отчетов
Послевыполненияоперациисверкиитоговможетвыводитьсяавтоматический
отчет о результатах сверки итогов. В разделе Дополнительные отчеты можно
задать шаблон этого автоотчета. Для того, чтобы задать шаблон автоотчета
необходимо выполнить следующие действия (см. рис. 119):
1. щелкнуть правой кнопкой мыши на папке Дополнительные отчеты и
выбрать Изменить;
2. в открывшемся окне Выберите выбрать необходимый шаблон отчета и
нажать ОК.
Рисунок 119 Порядок выбора дополнительных отчетов
12.3.5 Добавление и настройка пользователейСтраница 215
UNIPOS Terminal
Руководство инженера
Для разграничения прав доступа к POS терминалу необходимо создать набор
пользователей этого терминала и привязать их к одной из имеющихся групп
пользователей. Для создания нового пользователя необходимо выполнить
следующиедействия(см.рис.120):
Рисунок 120 Добавление нового пользователяСтраница 216
UNIPOS Terminal
Руководство инженера
1. В списке справочников выбрать Организации.
2. В справочнике Организации щелкнуть правой кнопкой мыши по папке
Пользователи и выбрать Добавить ‘Пользователь’.
3. В открывшемся окне Создание: Пользователь ввести наименование нового
пользователя и щелкнуть ОК.
4. Заполнить параметры для созданного пользователя (см. табл. 39).
Таблица № 37 Параметры пользователя
Наименование Тип объекта Описание
Имя пользователя Поле Наименование пользователя, вводится на
этапе создания, в дальнейшем может быть
изменено
*Пароль a Поле При выборе поля в правой его части
появляется кнопка с многоточием после
нажатия на которую открывается окно
Изменить пароль. В этом окне необходимо
дважды ввести значение пароля и нажать
ОК.
*Группаa Поле В раскрывающемся списке необходимо
выбрать группу, которая будет задавать
набор прав доступа пользователя.
a. Поля, начинающиеся со знака * обязательны для заполнения
12.4 Настройка параметров справочника Терминалы
Справочник Терминалы является основным для настройки терминалов.
Остальные справочники выполняют вспомогательную роль и предназначены
для того, чтобы облегчить настройку большого количества терминалов,
позволяя изменять общие для всех терминалов параметры в одном месте. Т.е.
имеется набор справочников, в которых имеется возможность настроить
набор общих для всех терминалов параметров (сеть, организация, профиль и
т.д.), а затем при настройке конкретного терминала эти параметры или
используются автоматически по умолчанию или имеется возможность
выбрать из набора настроек необходимые комплекты.
После открытия справочника Терминалы на панели Терминалы отобразится
дерево с папкой Терминалы, в которой расположен набор настроек для
платежных терминалов. После того, как будет выбран один из наборов
настроек справа на панели параметров отобразятся его параметры (см. табл.
39 Параметры терминала).
ПРИМЕЧАНИЕ: Рекомендуется для каждого терминала иметь индивидуальный набор
настроек.
Все взаимосвязанные группы параметров организованы в виде вложенных
папок. Для создания таких параметров необходимо сначала создать
подраздел, в котором будет содержаться набор взаимосвязанныхСтраница 217
UNIPOS Terminal
Руководство инженера
параметров, и только после создания этого подраздела появится набор полей,
которые необходимо будет заполнить. На верхнем уровне расположены
только самые общие и обязательные для заполнения параметры.
После заполнения необходимого набора параметров для каждого терминала
они образуют сложную структуру вложенных подпапок, содержимое которых
связано с содержимым других справочников (см. рис. 121).
Чтобы настроить параметры отдельного терминала, рекомендуется сначала
убедиться, что выполнены настройки параметров других взаимосвязанных
справочников, если какие–либо параметры взаимосвязанных справочников
отсутствуют, их необходимо ввести. Только после того, как взаимосвязанные
параметры других справочников будут введены и сохранены, можно
начинать настройку соответствующих параметров в справочнике
Терминалы. Например, пока не создан необходимый профиль терминала, его
значение нельзя будет выбрать в поле Профиль при настройке терминала.
Рисунок 121 Структура справочника Терминалы
Длянастройкитерминаланеобходимосоздатьвсправочникетерминалыновую
запись, а затем заполнить все необходимые параметры, используя одну из двух
методик:
• тематическая, сначала заполнить настройки для загрузки терминального
ПО,затемнастроитькоммуникации,затеморганизацииит.д.,заполняя
одновременно параметры вспомогательных справочников;
• общая, сначала создать и ввести параметры для всех вспомогательных
справочников, а затем настраивать параметры терминалов в справочнике
терминалы.
12.4.1 Создание новой записи в справочнике Терминалы
Для создания новой записи в справочнике Терминалы необходимо выполнить
следующие действия (см. рис. 122):
1. щелкнуть правой кнопкой мыши на папке Терминалы и выбрать
Добавить ‘Терминал’;Страница 218
UNIPOS Terminal
Руководство инженера
2. в открывшемся окне Создание: Терминал ввести наименование для
создаваемого терминала и нажать ОК;
3. перейтинапанельспараметрамидлянастройкипараметровтерминала.
Рисунок122 Порядоксозданияновоготерминала
21
ПРИМЕЧАНИЕ:Данный пример рассмотрен на сборке OpenWay Base, набор полей для
других протоколов может отличаться.
22
Таблица № 38 Параметры терминала
Наименование Тип объекта Описание
*Идентификатор
терминалаa
Поле Уникальный в системе идентификатор
терминала. Может содержать любой
идентификатор, определяемый бизнес
процессом, например POSID, номер
эквайрингового договора и т.д.
Владелец терминала Поле В этом поле указывается банк владеющий
терминалом.
Признак владельца
терминала
Поле В данном поле указывается данные о
владельце терминала. Значение
выберается из выпадающего списка,
Содержимое задается в справочнике
Общие установки | Признак владельца
оборудования.
Адрес установки Поле Полный адрес установки терминального
устройства.
Адрес (English) Поле Адрес установки терминального устройства.
Запись делается на английском языке
(часть EMV Tag 9F4E).
Часовой пояс Поле Часовой пояс в месте установки терминала.
Выбирается из раскрывающегосясписка.
Переход на летнее
время
Поле Имеет два значения Да – будет
использоваться переход на летнее время,
Нет –не будет использоваться переход на
летнее время.Страница 219
UNIPOS Terminal
Руководство инженера
*Модель терминала Поле Из раскрывающегося списка необходимо
выбрать наименование модели
используеого терминала.
Модель пинпада Поле Из раскрывающегося списка нужно
выбрать наименование используемого
пинпада.
Код страны Поле Вводится значение кода страны в
соответствии со стандартом ISO 3166 (три
цифры, например 643).
Серийный номер Поле Вводится серийный номер терминального
устройства. Как правило, наносится на
нижнюю крышку платежноготерминала.
Серийный номер
пинпада
Поле Отображается серийный номер PINpad,
поле недоступно для изменения.
Версия прошивки
внешнего пинпада
Поле Отображается версия прошивки внешнего
пинпада, поле недоступно для изменения.
Организации Таблица Список организаций – юридических лиц,
которые эксплуатируют платежный
терминал. Обычно платежный терминал
используется одним юридическим лицом,
однако он также может использоваться
несколькими юридическими лицами.
Коммуникации с хостом Таблица Список коммуникационных соединений
терминала с хостом
*Телефонная зона Поле Телефонная зона региона, в котором
установлен платежный терминал,
выбирается из раскрывающегося списка.
Программируемые
таймеры
Таблица Набор программируемыхтаймеров
Выбранная группа
изображений
Поле В раскрывающемся списке можно выбрать
одно из следующих значений:
• Запрет изображений - в этом режиме
изображения не будут отображаться на
платежном терминале.
• Выбранная вручную - в этом режиме
появляется поле группа
изображений, в котором в
раскрывающемся списке можно
выбрать одну из имеющихся групп
изображений, настроенных в
справочнике Группы изображений.
• Использовать настройки
организации - в этом режиме будут
использованы настройки поля
Выбранная группа изображений
справочника Организации.
Дополнительное
описание
Поле Символьное поле для храненияпояснений и
дополнительных описаний к введенным
параметрам Данная информация на
терминал не передается.Страница 220
UNIPOS Terminal
Руководство инженера
Список переменных
терминала
Поле Список, который содержит имена
переменных и их значения. При выборе
данного поля в его правой части появляется
кнопка с многоточием после нажатия на
которую появляется окно Список
переменных терминала. В этом окне
необходимо ввести наименование
переменной, далее знак присваивания и
далее новое значение этой переменной
(например, x = 100) и затем нажать ОК.
Схема проведения
транзакций
Поле Нужно бырать одно из двух значений:
Обычная – для проведения операции
терминал ожидает ввод карты;
Альтернативная – терминал при нажатии
клавиши Enter (зеленая клавиша), входит в
меню операций заданных в справочнике
Общие установки | Вызов по
клавишам.
Параметры плагинов Поле Задает выполнять или нет вызов
конфигуратора плагинов сторонних
организаций.
Метод выбора операций Поле В раскрывающемся списке можно выбрать
два значения: Выключен и Hot Keys. В
том случае, если выбрано значение Hot
Keys, появляется поле Дополнительное
описание, в котором из раскрывающегося
списка можно выбрать наименование
профиля горячих клавиш, заданных в
справочнике Общие установки.
Клавиша входа в меню Поле В раскрывающемся списке можно выбрать
одно из двух значений: Enter – меню на
терминале будет открываться после
нажатия клавиши Enter и
Одновременное нажатие Enter и 6 –
для открытия меню необходимо будет на
терминале одновременно нажимать
клавиши Enter и 6.
Взаимодействие с
кассой
Поле Варианты взаимодействия платежного
терминала с кассой. В раскрывающемся
списке можно выбрать одно из следующих
значе ний:
• Не используется;
• Касса запускает операцию;
• Касса или терминал запускает
операцию;
• Теримнал запускает операцию.
В том случае, если будет выбрано одно из
трех значений: Касса запускает
операцию, Касса или терминал
запускает операцию или Терминал
запускает операцию становятся
доступными дополнительные поля.
Коммуникации с кассой Таблица Параметры соединения терминала с кассойСтраница 221
UNIPOS Terminal
Руководство инженера
Выбор Terminal ID Поле Можно выбрать одно из двух значений:
• По номеру терминала от ККМ;
• По БИН диапазону.
Отмена как возврат Поле Возможность проведения операции
Возврат вместо операции Отмена, если
оригинальная операция в базе не найдена.
Можно выбрать одно из двух значений: Да
или Нет.
Печать чеков Поле Указывается где печатать чеки. В
раскрывающемся списке можно выбрать
одно из следующих значений:
• На кассе;
• На терминале;
• На кассе и терминале;
• Не печатать.
Печать отчетов Поле Указывается где печатать отчеты. В
раскрывающемся списке можно выбрать
одно из следующих значений:
• На кассе;
• На терминале;
• На кассе и терминале;
• Не печатать.
Отправлять срок
действия карты
Поле Отправлять срок действия карты на кассу.
В раскрывающемся списке можно выбрать
одно из двух значений: Да или Нет.
Маска PAN при
отправке на кассу
Поле Шаблон PAN при отправке на кассу.
Примеры (для PAN 1111222233334444):
#### - ************4444
####* - 1111************
####*#### - 1111********4444
*#### - ***********4444
Ожидать ответ от ККМ Поле Задает, ожидать или нет ответ от ККМ на
отправку результатовоперации.
Загружать параметры в
терминал
Поле Настройка способов загрузки параметров в
терминал. При нажатии кнопки со
стрелкой раскрывается список с
дополнительными условиями загрузки
параметров. Можно добавить следующие
особенности загрузки:
• Вручную – в этом случае на терминале
необходимо будет запускать процедуру
загрузки вручную;
• После сверки итогов – в этом случае
перед проведением процедуры загрузки
параметров на терминал будет
проведена сверка итогов.
Установкой галочки слева от наименования
включается то или иное условие.Страница 222
UNIPOS Terminal
Руководство инженера
Загружать ПО в
терминал
Поле Имеет два значения: Да – в этом случае при
выборе в главном окне программы Config
Manager команды Загрузить вместе с
параметрами на платежный терминал
будет загружаться терминальное ПО. Нет –
в этом случае на платежный терминал
будут загружаться только параметры. В том
случае, если выбрано Да, станут
недоступными поля загрузки операционной
системы в терминал.
*Инсталляционный
пакет
Поле Раскрывающийся список содержит набор
ссылок на инсталляционные пакеты
терминального ПО, загружаемых на
платежные терминалы. Содержимое
раскрывающегося списка задается в
справочнике Инсталляции ПО.
Загружать ОС в
терминал
Поле Имеет два значения: Да – в этом случае при
выборе в главном окне программы Config
Manager команды Загрузить вместе с
параметрами на платежный терминал
будет загружаться операционная система.
Нет – в этом случае на платежный
терминал будут загружаться только
параметры. В том случае, если выбрано Да,
станут недоступными поля загрузки
терминального ПО в терминал.
*Инсталляционный
пакет ОС
Поле Раскрывающийся список содержит набор
ссылок на инсталляционные пакеты
операционных систем, загружаемых на
платежные терминалы. Содержимое
раскрывающегося списка задается в
справочнике Инсталляции ОС.
Контроль заряда
аккумулятора
Поле Имеет два значения: Да – в этом случае на
платежном терминале будет включен
функционал контроля заряда аккумулятора
и Нет – в этом случае данный функционал
будет выключен.
Уровень
предупреждения
Поле Уровень заряда батареи при котором будет
выводиться сообщение о необходимости
зарядить аккумулятор.
Уровень блокировки Поле Уровень заряда батареи, при котором будут
блокироваться операции платежного
терминала.
Уровень выключения Поле Уровень заряда батареи, при котором
терминал будет выключен.
Использовать
разграничение прав
Поле Имеется возможность выбрать одно из
двух значений: Да – использовать список
пользователей с разграничением прав
(пользователями являются:
Администратор, Старший кассир и
Кассир), Нет – не использовать.Страница 223
UNIPOS Terminal
Руководство инженера
Способ авторизации
пользователя
Поле Варианты использования разграничения
прав доступа. В раскрывающемся списке
можно выбрать одно из двух значений:
Авторизация пользователя при
разблокировке терминала и
Авторизация пользователя при
выполнении операции.
Автологин Поле Разблокировка терминала при включении
питания. Текущим пользователем
становится тот, кто имеет признак
автологин в настройках.
Деактивация логина Поле Вводится режим деактивации логина.
После активации логина пользователем
терминала переход в блокированный
режим может осуществляться:
• (-1) – никогда;
• (0) – сразу после операции;
• (>0) – таймаут в секундах.
*Ввод пароля при исп.
карты доступа
Поле Ввод пароля при идентификации Логина
картой доступа. Возможен режим
ускоренного логина в терминал при
использовании операторами магнитных
идентификационных карт без ввода пароля
(не рекомендуется).
Статус Таблица Ссылка на папку с логами о результатах
выполнения процедуры загрузки ПО и
параметров на платежных терминал.
a. Поля, наименования которых помечены знаком * обязательны к заполнению
12.4.2 Настройка параметров для проведения финансовых операций
Для настройки параметров для проведения финансовых операций используются
триуровнявложениясправочника.Наверхнемуровнетерминаларасположена
папка с организациями, которые связаны со справочником Организации, каждая
организация содержит папку с профилями терминалов, которые связаны со справочником Профили терминалов, каждый профиль терминалов содержит папку
Идентификаторы POS, которые связаны со справочником Эквайринговые сети и
в каждом ID терминала имеется папка Рабочие ключи, содержащая набор
рабочих ключей для каждого ID. Далее будет рассмотрен процесс настройки
параметров для уровней Организации, Профили терминала и
Идентификаторы POS.
12.4.2.1 Создание нового владельца (организации)
После того, как организация будет создана, ее можно подключить к терминалу
дляиспользования.Можнонастроитьиспользованиетерминалакаксодной,так
и с несколькими организациями, однако работать терминал сможет только с
одной из этих организаций.
Для того чтобы подключить организацию к терминалу необходимо выполнить
следующие действия (см. рис. 123):
1. щелкнуть правой кнопкой мыши на папке Организации и выбратьСтраница 224
UNIPOS Terminal
Руководство инженера
Добавить ‘Владелец’;
2. в поле Организация из раскрывающегося списка выбрать необходимое
значение.
Рисунок123 Порядоксозданиявдадельца
12.4.2.2 Создание нового профиля терминала
Для создания нового профиля терминала необходимо выполнить следующие
действия(см.рис.124):
1. Создать новый профиль терминала;
2. В поле Профиль выбрать значение из списка.
Рисунок124 Созданиеновогопрофилятерминала
12.4.2.3 Создание нового идентификатора терминала
Для создания нового идентификатора терминала необходимо выплнить следующиедействия(см.рис.125):
1. Создать немобходимый ID терминала;Страница 225
UNIPOS Terminal
Руководство инженера
2. Для созданного ID терминала заполнить поля раздела Общие;
3. Создать подразделы с рабочими ключами ID терминала.
Рисунок 125 Порядок создания нового ID терминала
12.4.3 Настройка таймеров терминала
Таймер терминала предназначен для выполнения: автоматического запуска
сверки итогов, проверки соединения и обновления параметров. Таймер можно
установить, как для запуска одноразовых действий, так и для запуска
периодических действий ежедневно, еженедельно и ежемесячно.
Для создания нового таймера необходимо выполнить следующие действия (см.
рис.126):
1. щелкнуть правойкнопкоймышинапапкеПрограммируемые таймерыи
выбрать Добавить ‘Событие’ или Добавить ‘Программируемый таймер’;
2. выполнить действия, описанные в пп. 1 – 2 для всех таймеров.
Рисунок 126 Порядок создания нового таймера
23
ПРИМЕЧАНИЕ:Данный пример рассмотрен на сборке OpenWay Base, набор полей для
других протоколов может отличаться.
24Страница 226
UNIPOS Terminal
Руководство инженера
Таблица№39 Наименование полей таймера
Наименование Тип объекта Описание
*Запускa Поле Наименование процедуры, запускаемой по
таймеру.
*Периодичностьa Поле Период, через который будет запускаться
данная процедура. В раскрывающемся
списке можно выбрать одно из следующих
значений:
• Ежедневно;
• Еженедельно;
• Ежемесячно;
• Одноразово;
• Периодически.
*Время активацииa Поле Время начала периода возникновения
события.
*Время деактивацииa Поле Время окончания периода возникновения
события
Дополнительное описание
Поле Символьное поле для хранения пояснений и
дополнительных описаний к введенным
параметрам Данная информация на
терминал не передается.
a. Поля, наименования которых помечены знаком * обязательны к заполнению
12.4.4 Создание отчета по терминалам
Для анализа статистики по имеющимся настройкам параметров терминалов
предназначена функция отчета по дате создания терминала. Данный функционал
позволяет упорядочить записи по имеющимся комплектам настроек терминалов
по дате их создания и сохранить в виде отчета. Отчет представляет собой таблицу,
содержащую записи по каждому комплекту настроек терминала. Каждая запись
содержит:
• дату созданиятерминала;
• наименование терминала;
• серийный номертерминала;
• инвентарный номер;
• тип конфигурациитерминала.
При создании отчетов имеется возможность использовать фильтры для
отсеивания ненужной информации.
Для создания отчета необходимо выполнить следующие действия (см рис. 127):Страница 227
UNIPOS Terminal
Руководство инженера
Рисунок 127 Открытия окна Отчет по терминалам
1. В справочнике Терминалы выбрать папку Терминалы и щелкнуть
мышкой на появившейся кнопке Отчет по терминалам.
2. В открывшемся окне Отчет по терминалам выбрать необходимый набор
записей, формат планируемого отчета и нажать кнопку Экспортировать, а
затем ОК.
Рисунок128 ОкноОтчетпоТерминаламСтраница 228
UNIPOS Terminal
Руководство инженера
Приложение A Возможные проблемы и их
решение
Описание возможных технических проблем, возникающих при эксплуатации
терминала, причин их возникновения и методов решения приведено в таблице:
Таблица № 40
Проблема Возможные причины Решение
На экране терминала
нет изображения
Напряжение питания
терминала не
соответствует
номиналу
Проверить напряжение на выходе блока
питания.
Контрастность дисплея
минимальная
Изменить контрастность дисплея.
Неисправность
терминала
Обратиться в сервисный центр компании
«INPAS».
Нет связи с хостом при
использовании
внутреннего модема
Телефонный кабель /
разъем неисправен
Проверить целостность кабеля /Разъемов.
Нет линии Проверить наличие сигнала в телефонной
линии; при отсутствии сигнала обратиться
в телефонную компанию.
Неисправность
внутреннего модема
Обратиться в сервис-центр компании
«INPAS».
Неправильные
настройки соединения
Проверить настройки соединения в
программе конфигурирования терминала;
обратиться в службу сопровождения
клиентов компании «INPAS» для решения
проблемы.
Не печатает принтер Напряжение питания
терминала не
соответствует
номиналу
Проверить напряжение на выходе блока
питания.
Неисправность
терминала
Обратиться в сервисный центр компании
«INPAS».
Нет бумаги в терминале Заправить новый рулон бумаги в терминал.
Индикатор питания
терминала мигает
Нет бумаги в терминале Заправить новый рулон бумаги в терминал.
Нет связи с
внешним
устройством по
RS232
Неисправен соединительный кабель/разъем
Проверить целостность кабеля /Разъемов.
Скорость соединения, правильность
установленного порта.
Напряжение питания
терминала не соответствует номиналу
Проверить напряжение на выходе блока
питания.
Неисправность
терминала
Обратиться в сервисный центр компании
«INPAS».Страница 229
UNIPOS Terminal
Руководство инженераСтраница 230
UNIPOS Terminal
Руководство инженера
Таблица № 40
Проблема Возможные причины Решение
Не работает внутренний
пинпад
Неисправность
терминала
Провести тестирование внутреннего
пинпада встроенной системой контроля
работоспособности терминала; если
тестирование завершилось с ошибкой, то
обратиться в сервисный центр компании
«INPAS».
Неправильные
настройки ПО
Проверить правильность настройки
параметров пинпада в программе
конфигурирования терминала.
Не введены ключи Ввести ключи в пинпад.
Не работает клавиатура
терминала
Неисправность
терминала
Провести тестирование клавиатуры
встроенной системой контроля
работоспособности терминала; если
тестирование завершилось с ошибкой, то
обратиться в сервисный центр компании
«INPAS».
Ограничение
подвижности кнопок
из-за загрязнения
клавиатуры
Произвести чистку клавиатуры.
Нет связи с хостом при
использовании GSM
модема
Нет связи с GSM
провайдером
Убедиться, что терминал находится в зоне
действия сети провайдера.
SIM карта требует ввода
PIN кода
Отключить запрос ввода PIN кода.
Не активирован режим
передачи данных
Активировать режим передачи данных.
Неверные настройки
соединения
Проверить правильность настроек
параметров соединения в программе
конфигурирования терминала (9600, 8N1,
Char).
Неисправность
терминала
Обратиться в сервисный центр компании
«INPAS».
Ошибка получения
баланса SIM-карты
Ошибка старой
прошивки модема на
терминале PAX S90.
Локально обновить прошивку модема до
версии MG-323 12.210.10.16
После загрузки ПО в терминал на дисплее терминала появляется сообщение:
INVALID *GO
PARAMETR
Загружено ПО не для
того типа терминала
(например, в терминал
510 загружено ПО 610)
В настройках терминала выбрать
правильный инсталляционный пакет и
перезагрузить ПО в терминал.Страница 231
UNIPOS Terminal
Руководство инженера
Приложение B Описание ошибок
приложения
В таблице 2 дано описание ошибок, коды которых будут отображаться на
экране POS терминала.
Таблица №41
№ п/п Описание ошибок Код
1. Ошибка открытия считывателясмарт-карт - 2000
2. Ошибка закрытия считывателя смарт-карт - 2001
3. Ошибка начала работы с ридером и подачи питания на карту - 2002
4. Ошибка завершения работы со считывателем смарт-карт - 2003
5. Ошибка получения ATR от карты. - 2004
6. Ошибка обмена APDU с картой - 2005
7. Считыватель смарт-карт открыт не был - 2006
8. Недопустимая длина данных с карты - 2007
9. Ошибка открытия слота считывателя смарт-карт - 2008
10. Ошибка выбора слота считывателя смарт-карт - 2009
11. Ошибка подачи/снятия питания со слота считывателя смарт-карт - 2010
12. В считывателе смарт-карт отсутствуеткарта - 2011
13. Ошибка закрытия слота считывателясмарт-карт - 2012
14. Ошибка связи с удаленным считывателемсмарт-карт - 2013
15. Ошибка подписки на события считывателя смарт-карт - 2014
16. Ошибка отписки от события считывателя смарт-карта - 2015
17. Ошибка отправки данных на карту - 2016
18. Превышен таймаут ожидания ответа скарты - 2017
19. Ошибка формата APDU - 2018
20. Недопустимые значения параметров - 2019
21. Ошибка отображения индикаторов подсветки ридера - 2020
22. Протокол обмена с картой не поддерживается - 2021
23. Ошибка открытия магнитного считывателя - 2050
24. Ошибка закрытия магнитного считывателя - 2051
25. Магнитный считыватель открыт не был - 2052
26. Ошибка чтения данных магнитной дорожки - 2053Страница 232
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
27. Ошибка связи с удаленным считывателем магнитныхкарт - 2054
28. Ошибка подписки на события магнитногосчитывателя - 2055
29. Ошибка отписки от события магнитного считывателя - 2056
30. Ошибка параметров - 2057
31. Нет данных - 2058
32. Ошибка отображения индикаторов подсветки ридера - 2059
33. Ошибка открытия дисплея - 2100
34. Ошибка закрытия дисплея - 2101
35. Дисплей открыт не был - 2102
36. Ошибка вывода текста на дисплей - 2103
37. Позитивный шрифт не указан - 2104
38. Негативный шрифт не указан - 2105
39. Ошибка выбора шрифта - 2106
40. Ошибка установки позиции курсора - 2107
41. Ошибка очистки строки дисплея - 2108
42. Ошибка доступа к удаленному дисплею - 2109
43. Ошибка отрисовки - 2110
44. При работе с библиотекой IG функционал не поддерживается - 2111
45. Неверный формат изображения - 2112
46. Неверный аргумент функции - 2113
47. Ошибка открытия клавиатуры - 2150
48. Ошибка закрытия клавиатуры - 2151
49. Клавиатура открыта не была - 2152
50. Ошибка чтения клавиатуры - 2153
51. Ошибка подписки на события клавиатуры - 2154
52. Ошибка отписки от событияклавиатуры - 2155
53. Ошибка открытия принтера - 2200
54. Ошибка закрытия принтера - 2201
55. Принтер открыт не был - 2202
56. Ошибка инициализации принтера - 2203
57. Ошибка выбора шрифта принтера - 2204
58. Ошибка подписки на события принтера - 2205Страница 233
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
59. Ошибка отписки от событияпринтера - 2206
60. Файл логотипа не найден - 2207
61. Ошибка загрузки шрифта в принтер - 2208
62. Ошибка установки размера печатаемойстроки - 2209
63. Длина файла при печати в файл больше установленной - 2210
64. Ошибка открытия файла печати - 2211
65. Ошибка печати файла изображения - 2212
66. Ошибка при установке режима печати - 2213
67. Ошибка непосредственно при печати - 2214
68. Ошибка добавления в буфер печати - 2215
69. Недостаточен размер буфера - 2216
70. Недостаточно памяти - 2217
71. Ошибка открытия файла - 2250
72. Ошибка закрытия файла - 2251
73. Файл открыт не был - 2252
74. Файл не найден - 2253
75. Недопустимое имя файла - 2254
76. Ошибка копирования файла - 2255
77. Ошибка удаления файла - 2256
78. Файл не открыт, заблокирован или позиция за пределами файла - 2257
79. Ошибка чтения файла - 2258
80. Ошибка записи в файл - 2259
81. Ошибка открытия динамика - 2300
82. Ошибка закрытия динамика - 2301
83. Динамик (устройство) закрыт - 2302
84. Ошибка выдачи звукового сигнала - 2303
85. Ошибка открытия часов - 2350
86. Ошибка закрытия часов - 2351
87. Часы не открыты - 2352
88. Неверный аргумент функции - 2353
89. Ошибка при установке нового значениядаты/времени - 2354
90. Ошибка открытия последовательногопорта - 2400Страница 234
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
91. Ошибка закрытия последовательного порта - 2401
92. Недопустимые значенияпараметров - 2402
93. Ошибка чтения данных их порта - 2403
94. Истекло время приема данных - 2404
95. Ошибка записи данных в порт - 2405
96. Ошибка подписки на события последовательного порта - 2406
97. Ошибка отписки от события последовательного порта - 2407
98. Ошибка установки параметров - 2408
99.
Ошибка снятия/установки питания на устройстве на последовательном
порту - 2409
100. Ошибка доступ к COM порту запрещен - 2410
101. Недопустимые значенияпараметров - 2450
102. Нулевое значение указателя на блок памяти - 2451
103. Ошибка отправки команды CREATE_GISKE_BLOCK наSAM - 2452
104. SAM вернул ошибку в APDU_R - 2453
105. Ошибка отправки команды PIN_DECRYPT наSAM - 2454
106. Ошибка отправки команды INIT_SESSION наSAM - 2455
107. Ошибка отправки команды START_SESSION наSAM - 2456
108. Ошибка отправки команды SAM_ENCRYPT наSAM - 2457
109. Ошибка отправки команды SAM_DECRYPT наSAM - 2458
110. Ошибка инициализации библиотеки OpenSL - 2459
111. Ошибка библиотеки OpenSL. Неподдерживаемый алгоритм шифрации или нарушение безопасности (полученный ключ длиннее упаковочного) - 2460
112. Ошибка библиотеки OpenSL. Нет текущего ключа - 2461
113. Ошибка библиотеки OpenSL. Выполнение команды в данном состоянии невозможно - 2462
114. Ошибка библиотеки OpenSL - 2463
115. Функция не поддерживается - 2464
116. Ошибка библиотеки OpenSL. Ошибка открытия криптоустройства - 2465
117. Ошибка библиотеки OpenSL. Имя загруженного скрипта не верное - 2466
118. Ошибка библиотеки OpenSL. Ошибка вызова iPS_GetScriptStatus - 2467
119. Ошибка библиотеки OpenSL. Скрипт незагружен - 2468
120. Ошибка библиотеки OpenSL. Нет доступа к скрипту из текущего GID - 2469Страница 235
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
121. Ошибка библиотеки OpenSL. Ошибка инсталляции VSSскрипта - 2470
122. Ошибка библиотеки OpenSL. Неверная версия VSSскрипта - 2471
123. Ключи в пинпаде и криптоустройстве (VSS или SAM) имеют различные характеристики - 2472
124. Текущий ключ не для шифрации (KeyUsage != "D0") - 2473
125. Crypto SAM delete applet - 2474
126. Crypto SAM install applet - 2475
127. Длина данных шифрации не кратна 8 - 2476
128. Режим шифрования не ECB - 2477
129. GISKE рабочий ключ для шифрации не поддерживается - 2478
130. Не допустимая длина рабочего ключа шифрования - 2479
131. Не найдено приложение на карте - 2480
132. Ошибка обмена данными с картой - 2481
133. Неподдерживаемый тип пинпада - 2482
134. Ошибка получения подписи - 2483
135. Ошибка генерации RSA ключа - 2484
136. Ошибка открытия пинпада - 2500
137. Ошибка закрытия пинпада - 2501
138. Недопустимые значенияпараметров - 2502
139. Ошибка выбора мастер-ключа впинпаде - 2503
140. Ошибка формата рабочего ключа - 2504
141. Ошибка удаления ключей из пинпада - 2505
142. Ошибка вывода приглашения на дисплейпинпада - 2506
143. Ключ не загружен - 2507
144. Ошибка чтения состояния ключа - 2508
145. Пользователь нажал Cancel при вводе пин - 2509
146. Ошибка загрузки ключа в пинпад - 2510
147.
Ошибка загрузки ключа в пинпад(пинпад в неверном Key
Management Mode - 2511
148.
Ошибка загрузки ключа в пинпад(incorrect KeyUsage или Mode of Use
или Algorithm или Key Length - 2512
149. Ошибка загрузки ключа в пинпад(невернаяверсия - 2513
150.
Ошибка загрузки ключа в пинпад(KLK уже загружен, новый KLK не
шифрован на предыдущем - 2514Страница 236
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
151.
Ошибка загрузки ключа в пинпад(ошибка расшифровки GISKE или
ошибка MAC. - 2515
152. Ошибка загрузки ключа в пинпад 6 (не приминима для пинпада 1000SE) - 2516
153. Ошибка загрузки ключа в пинпад 7 - недопустимый адрес мастер ключа - 2517
154. Ошибка загрузки ключа в пинпад 8 - 2518
155.
Ошибка загрузки ключа в пинпад 9 (попытка загрузки ключа со
значением, уже имеющимся в одной из ячеек пинпада) - 2519
156. Пинпад не найден - 2520
157. Недостаточно памяти - 2521
158. Ошибка вывода сообщения на дисплей пинпада - 2522
159.
Истек таймаут (для функций ожидания пользовательского ввода -
истекло время ожидания ввода) - 2523
160. Функция не поддерживается - 2524
161. Прерывание от внешней процедуры - 2525
162. Не удалось запустить поток - 2526
163.
Неверный аргумент функции - нулевой указатель. Более узкое определение, чем - 2527
164. Истекло количество попыток выполнения операции - 2528
165.
Ошибки, возникшие при обмене с пинпадом, которая не была классифицирована другими ошибками, * т.е. это ошибка коммуникации с
пинпадом общего характера
- 2529
166. Устройство прекратило соединение - 2530
167. Ошибка установки режима работы пинпада (Key Management Mode) - 2531
168. Ошибка парсинга пакета от пинпада - 2532
169. Ошибка формата или контрольной суммы пакета от пинпада - 2533
170. Отсутствует мастер-ключ - 2534
171. Ошибка рабочего ключа - 2535
172. Ошибка аттрибутов мастер-ключа ключа - 2536
173. Недопустимые значения параметров при получении пин блока - 2537
174. Неверные параметры расчета подписи - 2538
175. Недопустимый номер ключа - 2539
176. При расчете подписи пинпад вернул ошибку - 2540
177. Неверные параметры функции проверки ключа - 2541
178. Неверные параметры функции отображения строки пинпадом - 2542
179. Неверные параметры функции получения пинблока DUKPT - 2543Страница 237
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
180. Пинпад вернул ошибку в функции получения пинблока DUKPT - 2544
181. Неверные параметры функции подписи DUKPT - 2545
182. Пинпад вернул ошибку в функции подписи DUKPT - 2546
183. Виртуальный пинпад не поддерживается или неверный номер пинпада - 2547
184. Пинпад занят выполнением другой команды - 2548
185. Pinpad buffer too small - 2549
186. Pinpad access denied - 2550
187. Функционал не поддерживается пинпадом - 2551
188. Pinpad S01 packet size error - 2552
189. Pinpad S01 unsupported request type - 2553
190. Pinpad S01 packet data length error - 2554
191. Pinpad S01 invalid wk format - 2555
192. Pinpad S01 unknown error code - 2556
193. Pinpad api error - 2557
194. Pinpad load certificate - 2558
195. Pinpad read certificate - 2559
196. Pinpad initiate ns - 2560
197. Bad input parameter. - 2561
198. Desktop RSA key pair not present. - 2562
199. Pinpad finalize ns - 2563
200. Bad input parameter, wrong cryptogram length, pp_initiateNS() was not
called. - 2564
201. Host RSA key pair not present - 2565
202. Decryption of crypto2 failed or Rdsk does not match - 2566
203. Pinpad resolve challenge - 2567
204. Bad input parameter - 2568
205. MAK not present - 2569
206. Pinpad generate challenge - 2570
207. Bad input parameter - 2571
208. Key not present (CAK/MAK/PAK) - 2572
209. Pinpad verify challenge - 2573
210. Bad input parameter - 2574
211. Challenge not generated - 2575Страница 238
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
212. Pinpad encrypt pinblock - 2576
213. Bad input parameter - 2577
214. PKEK is not present - 2578
215. iPS_SelectPINAlgo() is not in EMV_PIN (0x0a) mode - 2579
216. No PIN found - 2580
217. Invalid PIN length (min: 4 - max:12) - 2581
218. Pinpad get PIN key - 2582
219. Bad input parameter - 2583
220. PKEK not generated - 2584
221. Ввод пина пропущен - 2585
222. Ошибка команды S02 - 2586
223. No Z2/Z3 prior to PIN Entry - 2587
224. PIN entry exhausted - 2588
225. Ошибка при чтении пакета от пинпада - 2589
226. Pinpad update file absent - 2590
227. Pinpad get pin block base - 2600
228. Базовая ошибка получения пинблока. Pinpad get pin block
base+PinpadErrorCode 2600 - 2699
229.
Базовая ошибка получения пинблока. Pinpad get pin block
base+100+ошибка возвращенная пинпадом 2700 - 2709
230. Pinpad unavaliable - 2749
231. Extvss script not found - 2750
232. Extvss invalid script number - 2751
233. Extvss invalid last facket flag - 2752
234. Extvss invalid sequence number - 2753
235. Extvss invalid get pin flag - 2754
236. Extvss invalid pin len - 2755
237. Extvss invalid null pin flag - 2756
238. Extvss invalid macro id - 2757
239. Extvss invalid input data - 2758
240. Extvss pin entry canceled or timed out - 2759
241. Extvss no z2 z3 prior to pin entry - 2760
242. Extvss no key - 2761
243. Extvss wrong header - 2762Страница 239
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
244. Extvss script execution error - 2763
245. Extvss bad chaining - 2764
246. Extvss reset error - 2765
247. Extvss unsupported algo - 2766
248. Extvss cmpa b0 - 2767
249. Нулевое значение указателя на блок памяти - 2850
250. Ошибка получения имени приложения - 2851
251. Ошибка получения серийного номераоборудования - 2852
252. Ошибка подписки на системные события - 2853
253. Ошибка при отписке от системныхсобытий - 2854
254. Ошибка генерации случайного числа - 2855
255. Превышение допустимого количества таймеров в системе - 2900
256. Ошибка подписки на события таймера - 2901
257. Ошибка отписки от событиятаймера - 2902
258. Истек таймаут - 2950
259. Выход по событиям, возникшим до входа в функцию энергосбережения - 2951
260. Ошибка при вызове SysSleep - 2952
261. Узел не найден - 3000
262. Ошибка получения параметра - 3001
263. Получили неверный тип параметра - 3002
264. Ошибка разбора - 3003
265. Ошибка чтения TLV заголовка - 3004
266. Ошибка инициализации парсера - 3005
267. Язык ресурсов не найден. - 3050
268.
Количество доступных языков интерфейса пользователя больше переданного массива для возвратарезультата. - 3051
269. Ошибка чтения файла описания ресурсов . - 3052
270. Строковый ресурс для данного идентификатора не найден. - 3053
271.
Число записей в файле ресурсов не соответствует определенному при
компиляции - 3054
272. Неправильные аргументы переданы на входфункции - 3055
273. Мало памяти - 3056
274. Ошибка открытия файла ресурсов - 3057Страница 240
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
275. Ошибка открытия INI файла описания ресурсов - 3058
276. Ошибка при открытии устройствалогирования. - 3100
277. Не найдена запись в файле ресурсов. - 3101
278. Ошибка записи данных в поток логирования. - 3102
279. Указанный модуль не трассируется - 3103
280. Неверный формат сообщения длятрассировки - 3104
281. Ошибка при открытии устройства мониторинга - 3105
282. Ошибка записи данных в буфер мониторинга - 3106
283. Ошибка записи данных в файл мониторинга - 3107
284. Превышен лимит на максимальный размер файла - 3108
285. Ошибка при открытии базы данныхтранзакции. - 3150
286. БД закрыта. - 3151
287. Ошибка инициализации БД. - 3152
288. Ошибка записи данных транзакции в БД. - 3153
289. Запись в БД не найдена. - 3154
290. Ошибка обновления записи БД. - 3155
291. Системная ошибка БД. - 3156
292. Неверный аргумент функции БД. - 3157
293. Ошибка в структуре базы данных - 3158
294. Ошибка выделения памяти - 3159
295. Ошибка конвертации БД - 3160
296. В ресурсах не найдены параметрыдиалога. - 3200
297. Истекло время работы диалога. - 3201
298. Работа диалога прерванапользователем. - 3202
299.
Прерывание работы диалога по внешнему событию (например, извлечена микропроцессорная карта изсчитывателя). - 3203
300. Действие не подтверждено. Результат работы диалога подтверждения. - 3204
301. Действие с пиктограммой неподдерживается. - 3205
302. Неверный тип диалога прочитан из ресурсов. - 3206
303. Нет данных для отображения - 3207
304. Превышено число виджетов - 3208
305. Подпись в графическом элементе введена не была - 3209
306. Диалоговое окно уже открыто - 3210Страница 241
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
307. Инициализация диалогов провалена - 3211
308. Файл конфигурации фонофого изображения отсутсвует или невалиден - 3212
309. Ошибка установки фонового изображения - 3213
310. Ошибка отображения рамки на экране. - 3250
311. Ошибка отображения заголовка на экране. - 3251
312. Индекс выбранного элемента неопределен. - 3252
313. Ошибка задания списка элементов длявыбора. - 3253
314. Ошибка отображения элемента выбора из списка наэкране. - 3254
315. Ошибка установки текста элементаредактирования. - 3255
316. Ошибка получения текста элементаредактирования. - 3256
317. Длина текста в редакторе больше переданного буфера. - 3257
318. Ошибка отображения текстовогоредактора. - 3258
319. Ошибка отображения картинки. - 3259
320.
Ошибка при открытии физического устройства (COM-потра, модема и
т.п.). - 3300
321.
Попытка установить соединение, использующее уже открытое устройство но с несовместимыми с текущиминастройками. - 3301
322. Ошибка подписки на события модуляCommunication - 3302
323. Ошибка отписки от события модуляCommunication - 3303
324. Ошибка настроек соединения. - 3304
325. Истёк таймаут. - 3305
326. Ошибка передачи данных. - 3306
327. Ошибка приёма данных. - 3307
328. Несуществующий хэндлер. - 3308
329. Прервано пользователем. - 3309
330. Достигнут лимит одновременно открытыхсоединений. - 3310
331. Ошибка открытия сокета. - 3311
332. Ошибка соединения с сервером. - 3312
333. Ошибка разрыва соединения с сервером. - 3313
334. Ошибка выделения памяти. - 3314
335. Невозможно войти в сеть (TCP/IP). - 3315
336. Ошибка инициализации SSL. - 3316
337. SSL-сертификат не принят. - 3317Страница 242
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
338. Ошибка отработки скрипта x25. - 3318
339. Сервер разорвал соединение - 3319
340. Ошибка настроек модема. - 3320
341. Ошибка настроек WIFI. - 3321
342. Ошибка настроек X25. - 3322
343. Ошибка настроек PPP. - 3323
344. Ошибка настроек TCPIP. - 3324
345. Ошибка настроек SSL. - 3325
346. При использовании TCPIP и указанного оборудования требуется PPP - 3326
347. При использовании указанного оборудования требуется TCPIP - 3327
348. При использовании SSL требуетсяTCPIP - 3328
349. Операция в асинхронном потоке еще невыполнена - 3329
350. При попытке дозвона модем обнаружил отсутствие диалтона в линии - 3330
351. Ошибка разрыва соединения с сетью - 3331
352. Ошибка инициализации модема - 3332
353. Устройство занято - 3333
354. Нет ответа - 3334
355. Ошибка регистрации в сети GSM - 3335
356. Ошибка соединения с устройством - 3336
357. Ошибка входа в сеть - 3337
358. Ошибка соединения с сокетом - 3338
359. Непредвиденный разрыв соединения (например соединение
установлено по TCP/IP, но был отсоединен Ethernet кабель) - 3339
360. Неверно задан уровень соединения - 3340
361. Неверно задано устройство - 3341
362. Неверно задана сеть - 3342
363. Неверно задан транспорт - 3343
364. Истек таймаут соединения при передаче - 3344
365. Ошибка ввода/вывода с использованием X25 - 3345
366. Неизвестный локальный адрес - 3346
367. Сеть WiFi не найдена - 3347
368. Ошибка асинхронного соединения - 3348
369. Асинхронное соединение в неопределенном состоянии - 3349Страница 243
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
370. Недопустимые значенияпараметров - 3350
371. Ошибка установления FTP соединения - 3351
372. Нет логина/пароля - 3352
373. Неверный логин/пароль - 3353
374. Прервано пользователем - 3354
375. Ошибка получения серийного номераоборудования - 3355
376. Ошибка загрузки манифеста - 3356
377. Ошибка парсинга манифеста - 3357
378. Ошибка загрузки файла, указанного вманифесте - 3358
379. Ошибка установления SA соединения - 3359
380. Ошибка протокола SA - 3360
381. Истекло время ожидания пакета SA - 3361
382. Ошибка отправки данных - 3362
383. Ошибка формата командного файла - 3363
384. Неизвестная команда командного файла - 3364
385. Недопустимый аргумент команды командногофайла - 3365
386. Длина загруженного файла и указанная в манифесте не совпадают - 3366
387. Ошибка чтения командного файла - 3367
388. Ошибка выполнения команды - 3368
389. Нет соединения - 3369
390. Ошибка выгрузки файла - 3370
391. Ошибка выгрузки файла, файл уже существует насервере - 3371
392. Таймаут - 3372
393. Ошибка записи в файл - 3373
394. Файл манифеста нулевой длины - 3374
395. Недостаточно памяти - 3375
396. Ошибка чтения манифеста - 3376
397. Сервер разорвал соединение - 3377
398. Ошибка получения длины файла - 3378
399. Сервер отклонил запрос на соединение - 3379
400. Ошибка приема данных - 3380
401. Ошибка переименования файла - 3381
402. Ошибка открытия файла на сервере - 3382Страница 244
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
403. Сервер отклонил операцию - 3383
404. Ошибка открытия файла на терминале - 3384
405. Недостаточно памяти для загрузки файла - 3385
406. Need reboot to continue download - 3386
407. Need defrag to continue download - 3387
408. Repeat download - 3388
409. Ошибка загрузки параметров - 3389
410. Недопустимые значенияпараметров - 3400
411. Нет больше элементов (при перечислении FindFirs, FindNext) - 3401
412. Несуществующий диск - 3402
413. Несуществующая директория - 3403
414. Неверный формат даты/времени в шаблонеконвертации. - 3450
415.
Недостаточный размер буфера для сохранения отформатированной
строки. - 3451
416. Неверный аргумент - 3452
417.
Неподдерживаемый язык для перекодировки в текст, отображаемый
на пинпаде - 3453
418. Неверный аргумент - 3500
419. Ошибка открытия ini файла - 3501
420. Секция не найдена - 3502
421. Параметр не найден - 3503
422. Недостаточно памяти - 3504
423. Недостаточен размер буфера для возвращаемого параметра - 3505
424. Ошибка записи ini файла - 3506
425. Ошибка чтения ini файла - 3507
426. Неверный аргумент - 3550
427. Ошибка получения переменной - 3551
428. Ошибка проверки наличия файла - 3552
429. Невозможно сделать перезагрузку (например, для Pax S90) - 3553
430. Неверный аргумент - 3554
431. Ошибка запуска приложения - 3555
432. Ошибка установки соединения с фоновым приложением - 3556
433. Ошибка разрыва соединения с фоновым приложением - 3557Страница 245
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
434. Ошибка передачи данных фоновому приложению - 3558
435. Ошибка приема данных от фонового приложения - 3559
436. Ошибка выделения памяти - 3560
437. Ошибка запуска фоновых программ - 3561
438. Истекло время ожидания - 3562
439.
Признак завершения приложения без рестарта терминала.
Используется для запуска подчиненного приложения из подчиненного
на терминалах PAX Monitor
- 3563
440. Неверный аргумент функции (например, нулевой указатель) - 3600
441. Ошибка открытия бесконтактногосчитывателя - 3601
442. Недопустимые значенияпараметров - 3602
443. Устройство не является бесконтактным считывателем - 3603
444. Функционал запрещен (или не поддерживается) - 3604
445. Модуль Contactless неинициализирован - 3605
446. Исчерпано количество поддерживаемыхустройств - 3606
447. Некорректный хэндл устройства - 3607
448. Данный коммуникационный порт используется другимустройством - 3608
449. Данный тип устройства не поддерживается - 3609
450. Запрос превысил размер приемного буфера картридера - 3610
451. Ошибка отправки пакета по каналу связи с бесконтактнымридером - 3611
452. Ошибка проверки CRC - 3612
453.
Ошибка протокола обмена (бесконтактный ридер не понимает
команды) - 3613
454. Бесконтактный ридер не смог выполнитькоманду - 3614
455. Превышен таймаут - 3615
456.
Ошибка протокола обмена (бесконтактный ридер не понимает параметры команды) - 3616
457. Неизвестная ошибка бесконтактного устройства - 3617
458. Бесконтактный ридер отказал в выполнениикоманды - 3618
459. Ошибка получения пакета по каналу связи с бесконтактным ридером - 3619
460. Ответ устройства не содержит данных - 3620
461.
Не открыт коммуникационный порт(выполнение операции не возможно - 3621
462. Прикладной уровень прирвал выполнение транзакции - 3622Страница 246
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
463.
Несоответствие серийных номеров устройства, для которого
выполняется транзакция, и зарегистрированного при открытии
порта
- 3623
464. Ошибка, возникшая при вызове системных функций - 3624
465. Устройство занято (например при попытке запустить транзакцию
на устройстве, которое уже ее выполняет) - 3625
466. Команда или субкоманда ViVOtech не поддерживается - 3626
467. Код для остановки 'Polling For Token' - не код ошибки, а лишь для
определенности
- 3627
468. Ошибка выделения памяти - 3628
469. Ошибка поиска - элемент не найден - 3629
470. Ошибка проверки - 3630
471. Режим внешнего пинпада не определен - 3631
472. Не инициализирован модуль Entry Point - 3632
473. Не инициализирован модуль MasterCard PayPass - 3633
474. Не инициализирован модуль Visa payWave - 3634
475. Неизвестный тип AID-а (тип бесконтактного ядра, для
обслуживания данного AID) - 3635
476. DDA провалена - 3636
477. Требуемый CAPK не найден - 3637
478. Отсутствует PDOL(9F38) в ответе на SELECT - 3638
479. PDOL не содержит Terminal Transaction Qualifiers (9F66) - 3639
480. Ошибка в процессе GPO - 3640
481. Ошибка PPSE - 3641
482. Аутентификация данных не поддерживается картой - 3642
483. Ошибка GENERATE AC - 3643
484.
Требуется обратить внимание на мобильное устройство (Paypass 3.0)
- 3644
485. COMPUTE CRYPTOGRAPHIC CHECKSUM error - 3645
486. Ошибка выполнения CVM - 3646
487. Необходимо использовать контактный считыватель - 3647
488. Ошибка Select - 3649
489. Необходимо перезапустить транзакцию минуя препроцессинг - 3650
490.
Необходимо удалить текущее приложение из кандидат листа и
перейти к следующему, перезапустив транзакцию, начиная с
FinalSelect
- 3651
491. Аналогично ERR_CNTCTLS_START_C для VISA - 3652
492. Не инициализирован модуль PBOC - 3653
493. Несколько карт в зоне действия антены (коллизия) - 3654Страница 247
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
494. Ошибка в процессе выполнения транзакции (AMEX) - 3655
495. Ошибка считывания карты - 3656
496. Нет карты в области антены считывателя - 3657
497. Не инициализирован модуль AmEx - 3658
498. Недостаточный размер буфера - 3659
499. Операция отклонена - 3660
500. Ошибка обмена с картой - 3661
501. Ошибка функции Clss_TransInitiate2_MIR() - 3662
502. Ошибка функции Clss_TransProcess2_MIR() - 3663
503. Ошибка функции Clss_TransComplete2_MIR() - 3664
504. Необходимо перезапустить транзакцию - 3690
505.
Необходмо перезапустить транзакцию без смены экрана и
переключения индикатора
- 3691
506. Файл лицензии не загружен - 3701
507. Ошибка чтения файла лицензии - 3702
508. Ошибка разбора файла лицензии - 3703
509. Ошибка параметров - 3704
510. Ошибка сверки подписи - 3705
511. Функционал не доступен лицензией - 3706
512. Количество операций в демо режимеисчерпано - 3707
513.
Серийный номер устройства и серйиный номер лицензии не совпадают - 3708
514. Идентификатор продукта неверен - 3709
515. Ошибка записи данных лицензии в файл - 3710
516. Ошибка чтения данных лицензии из файла - 3711
517. Ошибка чтения данных лицензии c SAM - 3712
518. Ошибка записи данных лицензии на SAM - 3713
519. Попытка загрузить старую лицензию на SAM - 3714
520. Ошибка списка обязательных полей - 3801
521. Ошибка списка опциональных полей - 3802
522. Отсутствует обязательное поле - 3803
523. Ошибка сборки поля - 3804
524. Ошибка отправки SA сообщениия, сессия не открыта - 3805
525. Недостаточный размер буфера отправки данных по SA - 3806Страница 248
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
526. Ошибка отправки SA сообщениия, неверный формат подтверждения - 3807
527.
Ошибка отправки SA сообщениия, истекло время ожидания
подтверждения - 3808
528. Недостаточен размер приемного буфера SA - 3809
529.
Ошибка приема SA сообщения, истекло время ожидания приема начала
пакета - 3810
530. Недопустимая длина принятого пакета SA - 3811
531. Длина принятого пакета SA не соответствует заголовку - 3812
532. Неверная контрольная сумма принятого пакета SA - 3813
533. Истекло число попыток принять пакет SA - 3814
534. Коммуникационная ошибка %ld отправки NAK при приеме SA пакета - 3815
535. При приеме SA пакета отправлен NAK, но повторный пакет не получен - 3816
536. Неверный заголовок SA пакета - 3817
537. Неверная длина заголовка SA - 3818
538. Неверный номер пакета SA в заголовке - 3819
539. Ошибка приема SA, нет полей - 3820
540. Ошибка приема SA сообщения, сессия не открыта - 3821
541. Ошибка приема SA сообщения, недопустимая длина поля - 3822
542. Ошибка приема SA сообщения, недопустимый идентификатор поля - 3823
543. Ошибка парсинга SA сообщения - 3824
544. Недостаточно памяти для приема SA сообщения - 3825
545. Неверный аргумент SA функции - 3826
546. Ошибка списка эхо полей SA протокола - 3827
547. Не совпадает эхо поле SA протокола - 3828
548. Отсутствует эхо поле SA протокола - 3829
549. Ошибка сборки зашифрованного пакета из за отсутствия Terminal ID - 3830
550. Ошибка сборки зашифрованного пакета - 3831
551. Ошибка разборки зашифрованного пакета из за отсутствия Terminal ID - 3832
552. Ошибка разборки зашифрованного пакета из за отсутствия поля
шифрованных данных - 3833
553. Недостаточно памяти - 3834
554. Не верные параметры сессии - 3835
555. Превышено максимальное число открытых сессий - 3836
556. Недопустимое значение параметра SA протокола - 3837Страница 249
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
557. Ошибка установки параметров SA сессии. Сессия не открыта - 3838
558. Получен EOT - 3839
559. Исчерпано число попыток отправить сообщение - 3840
560. Истекло время ожидания ENQ - 3841
561. Истекло время ожидания транспортного символа - 3842
562. Длина отправленных данных не соответствует запрошенному - 3843
563. Значения md5 не совпадают - 3844
564. Некорректный файл со значением md5 - 3845
565. Ошибка приема SA сообщения, истекло время ожидания приема пакета - 3846
566. Ошибка установки SA соединения - 3847
567. Ошибка формата зашифрованных данных - 3848
568. Ошибочный аргумент функции - 3901
569. Мало памяти - 3902
570. Ошибка генерации RRN - 3903
571. Ошибка сохранения данных транзакции в файле автоотмены - 3904
572. Отсутствует Terminal ID во входных данных транзакции - 3905
573. Ошибка удалениия файла автоотмены - 3906
574. Ошибка анализа результата выполнения хостовой операции - 3907
575. Отсутствует или недопустимый идентификатор транзакции - 3908
576. Хост отклонил выгружаемую транзакцию - 3909
577. Пульсар не установил соединение с хостом - 3910
578. Пульсар прервал операцию - 3911
579. Нет рабочего ключа для рассчета MAC - 3912
580. Нет имени ключа для рассчета MAK - 3913
581. Ошибка создания поля - 3914
582. Отсутствует поле MAC - 3915
583. Неверный MAC - 3916
584. Ошибка выполнения оффлайн операции - 3917
585. Ошибка выполнения сервисной операции - 3918
586. Нет рабочего ключа для шифрации трафика - 3919
587. Нет имени ключа для шифрации трафика - 3920
588. Ошибка модуля TACL - 4100Страница 250
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
589. Ошибка поля эхо - 4101
590. Недостаточно памяти - 4102
591. Ошибка расчета MAC - 4103
592. Ошибка проверки MAC - 4104
593. Нет возможности расчитать MAC - 4105
594. Недостаточно данных - 4106
595. Неизвестный идентификатор поля (отсутствует дескриптор поля) - 4107
596. Недостаточен выделенный буфер - 4108
597. Ошибка входных параметров - 4109
598. Входные данные очень большие - 4110
599. Отсутствует обязательное поле - 4111
600. Ошибка сохранения данных поля - 4112
601. Неизвестен размер данных - 4113
602. Неизвестный MTI - 4114
603. PRN invalid param 4115 - 4199
604. PrintTemplate false - 4116
605. PrintReportOutOfMemory - 4117
606. PrintTrxTempl - 4118
607. PrintCardTempl - 4119
608. PrintCurrencyTempl - 4120
609. PrintOperationTempl - 4121
610. Ошибки хостового модуля TIETO 4200 - 4219
611. Ошибки хостового модуля MicroCredit 4220 - 4239
612. Ошибки модуля удаленных устройств 4300 - 4399
613. Ошибки библиотеки Welcome Real Time 4400 - 4499
614. XLS is not operative - 4403
615. XLS files are not yet created - 4404
616. PAN is out of BIN range - 4405
617. ! Unable to construct request: file error or out of memory - 4406
618. ! Response format is unknown or invalid - 4407
619.
! Communication aborted during processing. This error might need a
cancelTrx. - 4408
620. ! Unable to connect to server - 4409Страница 251
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
621.
Input parameter invalid. For example, missing data. It should not occur in
deployment stage - 4410
622. One or more parameter are not a buffer - 4411
623. One or more parameter don't have enough allocation - 4412
624. Response received from XLS host is temporary error, retry is possible - 4414
625. Processing is cancelled - 4415
626. XLS Parameter is outdated, processing cannot continue - 4416
627. No response received from XLS host - 4417
628. XLS host communication via param download is necessary - 4418
629. Pending Void/Refund is full - 4419
630. XLS files version mismatch - 4420
631. Processing is not possible, XLS is not empty - 4421
632. bad parameters : inOffset + inLength or other - 4422
633. Ошибки библиотеки ZLib 4500 - 4599
634. Неправильный формат архива - 4501
635. Ошибка распаковки - 4502
636. Файл не найден - 4503
637. Недостаточно памяти - 4504
638. Неверный аргумент - 4800
639. Недостаточно памяти - 4801
640. Недостаточен размер буфера - 4802
641. Неизвестный коммуникационный параметр - 4803
642. Неверный размер аргумента - 4804
643. Нет соединений для связи с сервером - 4805
644. Ошибка при обновлении приложения - 4806
645. Ошибка при обновлении ОС - 4807
646. Неверный путь файла на FlashDrive - 4808
647. FlashDrive не доступен - 4809
648. Ошибка инициализации - 4900
649. Ошибка сканирования отпечатка - 4901
650. Ошибки библиотеки IG - 5000
651. Utils invalid param - 5500
652. Pipe не поддерживается - 5600Страница 252
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
653. Неверные параметры функции - 5601
654. Ошибка открытия Pipe - 5602
655. Ошибка установки соединения по Pipe - 5603
656. Ошибка разрыва соединения по Pipe - 5604
657. Ошибка передачи данных по Pipe - 5605
658. Ошибка приема данных из Pipe - 5606
659. Превышение допустимого количества pipe в системе - 5607
660. Ошибка протокола обмена по Pipe - 5608
661. Недостаточен размер буфера - 5609
662. Истекло время приема данных по Pipe - 5610
663. Pipe занят - 5611
664. Ошибка закрытия Pipe - 5612
665. Устройство не найдено - 5700
666. Контекст не найден (модуль коммуникаций) - 5701
667. Нет сим-карты - 5702
668. Ошибка ключа SSL - 5703
669. Ошибка сертификата сервера авторизации - 5704
670. Ошибка соединения SSL - 5705
671. Ошибка, связанная с паролем WiFi - 5706
672. Ошибка авторизации по WiFi - 5707
673. Плохой сигнал WiFi - 5708
674. Ошибка создания слушателя порта - 5709
675. Неверный сокет соединения - 5710
676. Хост не отвечает - 5711
677. SIM2 недоступна - 5712
678. Ошибка команды (модуль коммуникаций) - 5713
679. Неподдерживаемый протокол SSL - 5714
680. Неправильная версия SSL - 5715
681. Ошибка сканирования Bluetooth - 5716
682. Ошибка создания пары при соединении Bluetooth - 5717
683. Ошибка аутентификации при соединении Bluetooth - 5718
684. Ошибка соединения SPP Bluetooth - 5719Страница 253
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
685. Ошибка установки сертификатов в контекст - 5720
686. Неверное имя хоста - 5721
687. Ошибка на стороне удаленного сокета - 5722
688. Неверный ПИН Сим-карты - 5723
689. SIM карта требует PIN - 5724
690. SIM карта требует PUK - 5725
691. Неопределенная ошибка SIM PIN - 5726
692. Ehernet кабель не вставлен - 5727
693. Ошибка поиска WiFi сети - 5728
694. Ошибка запроса MAC адреса - 5729
695. Недостаточный заряд батареи для установки соединения - 5730
696. Библиотека SMS не инициализирована - 5731
697. Ошибка при SSL IO операции - 5732
698. Библиотека USSD не инициализирована - 5733
699. Истек срок действия сертификата - 5734
700. Проверка сертификата неуспешна - 5735
701. Неверно задан лист SSL шифраторов - 5736
702. Daemon init failed - 5737
703. Init failed - 5738
704. BT open device - 5739
705. BT set broadcast failed - 5740
706. Ошибка запуска плеера или плеер отсутствует - 5900
707. Ошибка открытия видеофайла - 5901
708. Ошибка формата видеофайла - 5902
709. Недопустимые значения параметров - 5903
710. Недостаточно памяти - 5904
711. Видеоплеер занят - 5905
712. Видеоплеер остановлен - 5906
713. Ошибка инициализации плеера - 5907
714. Ошибка инициализации FR - 6000
715. FR не инициализирован - 6001
716. Неверный аргумент функции при работе с ФР - 6002Страница 254
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
717. Неверные параметры (ФР) - 6003
718. Ошибка инициализации принтера (ФР) - 6004
719. Ошибка ответа на команду ФР - 6005
720. Ошибка отправки команды на ФР - 6006
721. Ошибка ввода/вывода ФР - 6007
722. Ошибка отправки запроса на ФР - 6008
723. Ошибка получения ответа от FR - 6009
724. Нет доступа к серверной части обслуживающей фискальный модуль - 6010
725. Ошибка подготовки команды к ФР - 6011
726. Время изменилось больше чем на 24 часа - 6012
727. ФР не поддерживается - 6013
728. Неверный пароль доступа к ФП - 6014
729. Необходимо провести фискализацию - 6015
730. Нет бумаги в принтере - 6016
731. Неверное состояние ЭКЛЗ - 6017
732. Необходимо выполнить Z отчет (закрытие смены) - 6018
733. Нет столько наличных для выполнения операции - 6019
734. Обратная операция превысила итог по прямой операции - 6020
735. Неверная дата - 6021
736. Значение поля вне диапазона - 6022
737. Индекс отдела/составляющей не обнаружен - 6023
738. Обратная операция невозможна из-за отсутствия прямой - 6024
739. При данном состоянии документа эта команда не допустима - 6025
740. Переполнение денежного счетчика - 6026
741. Неверный формат поля - 6027
742. Неверный формат сообщения - 6028
743. Неверное дата /время. Невозможно установить переданные дату/время - 6030
744. Неверная контрольная сумма (BCC) - 6031
745. Неверный пароль передачи данных. Пароль по умолчанию "AERF" - 6032
746. Нет команды с таким номером - 6033
747. Необходима команда "Начало сеанса" - 6034
748. Превышена максимальная длина строкового поля - 6035Страница 255
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
749. Превышена максимальная длина сообщения - 6036
750. Неправильная операция - 6037
751. Значение поля вне диапазона - 6038
752. Слишком большой результат - 6039
753. Необходимо выполнить сертификацию (ввод заводского номера) - 6040
754. Таймаут при печати - 6041
755. Неисправимая ошибка принтера - 6042
756. Принтер не готов к печати - 6043
757. Исчерпано число фискализаций - 6044
758. Неверный буфер печати (для команды 70) - 6045
759. Неверное G- поле (для команды 73) - 6046
760. Неверный номер типа оплаты - 6047
761. Таймаут приема - 6048
762. Ошибка приема - 6049
763. Неверное состояние ККМ - 6050
764.
Слишком много операций в документе. Необходима команда
"Аннулировать" - 6051
765. Необходима команда "Открытие смены" - 6052
766. Необходима печать буфера контрольной ленты - 6053
767. Неверный номер вида платежа - 6054
768. Неверное состояние принтера - 6055
769. Смена уже открыта - 6056
770. Истек таймаут ФР - 6057
771.
Нет места для добавления отдела/составляющей (суммарное их число
>400) - 6058
772. Индекс отдела/составляющей уже существует - 6059
773. Невозможно удалить индекс отдела - есть составляющие - 6060
774. Фискальная память неисправна - 6061
775.
Дата последней существующей записи в фискальной памяти позже, чем
дата операции, которую пытались выполнить - 6062
776. Необходима инициализация фискальной памяти - 6063
777. Заполнена вся фискальная память - 6064
778. Некорректный стартовый символ на приеме - 6065
779. Неопознанный ответ от ЭКЛЗ - 6066Страница 256
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
780. Неизвестная команда ЭКЛЗ (01 из ЭКЛЗ) - 6067
781. Таймаут приема от ЭКЛЗ - 6068
782. Таймаут передачи в ЭКЛЗ - 6069
783. Неверная контрольная сумма ответа ЭКЛЗ - 6070
784. Аварийное состояние ЭКЛЗ (03 из ЭКЛЗ) - 6071
785. Нет свободного места в ЭКЛЗ (06 из ЭКЛЗ) - 6072
786. Неверная контрольная сумма в команде ЭКЛЗ - 6073
787. Контроллер ЭКЛЗ не обнаружен - 6074
788. Данные в ЭКЛЗ отсутствуют - 6075
789. Данные в ЭКЛЗ не синхронизированы - 6076
790. Аварийное состояние РИК (04 из ЭКЛЗ) - 6077
791. Неверные дата и время в команде ЭКЛЗ (07 из ЭКЛЗ) - 6078
792. Закончилось время эксплуатации ЭКЛЗ (05 из ЭКЛЗ) - 6079
793. Переполнение ЭКЛЗ (09 из ЭКЛЗ) - 6080
794. Число активизаций исчерпано - 6081
795. Неверное состояние электронного журнала - 6082
796. Требуется распечатка СКЛ - 6083
797. Ошибка PDF (ФР) 6084 - 6102
798. Неверный параметр (FR) - 6103
799. Регистратор занят - 6104
800. Принтер перегрелся - 6105
801. Ошибка печати - 6106
802. Недостаточно памяти - 6107
803. В очереди нет сообщений для ОФД - 6108
804. Неверная сигнатура в заголовке сообщения ОФД - 6109
805. Неверная версия S протокола в заголовке сообщения ОФД - 6110
806. Неверная версия A протокола в заголовке сообщения ОФД - 6111
807. Поток отправки данных в ОФД уже запущен - 6112
808. Поток отправки данных в ОФД не запущен - 6113
809. Операция прервана пользователем - 6114
810. Коды ошибок библиотеки TM900 7000 - 7049
811.
Коды ошибок билиотеки BCReaders чтение шрих-кодов для PaxProlin
IRAS 7050 - 7099Страница 257
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
812. Device has been occupied - 7050
813. Device is not open - 7051
814. Device does not exist - 7052
815. Таймаут считывателя штрих-кодов - 7053
816. Неверный параметр при работе со считывателем штрих-кодов - 7054
817. Ошибка выполнения системной функции - 8000
818. Слот пуст - 8001
819. Не поддерживаемый криптографический алгоритм - 8002
820. Ошибка проверки МАС'а GISKE блока - 8003
821. Некорректные параметры вызова скрипта - 8004
822. Выполнение команды в данном состоянии невозможно - 8006
823. Неверная версия VSS скрипта - 8007
824. Текущий ключ не для шифрации (KeyUsage != "D0") - 8008
825. Длина данных не кратна 8 - 8009
826. Пользователь прервал операцию - 8010
827. Время ожидания операции истекло - 8011
828. Ошибка открытия криптоустройства - 8012
829. Скрипт не загружен - 8013
830. Ошибка вызова iPS_GetScriptStatus - 8014
831. Нет доступа к скрипту из текущего GID - 8015
832. Ошибка инсталляции VSS скрипта - 8016
833. Ошибка расчёта библиотечной функции AES - 8050
834. Неверный параметры длины ключа AES - 8051
835. Пустые входные параметры - 8052
836. Неверный хэндл устройства - 8200
837. Таймаут - 8201
838. LRC не совпало - 8202
839. Невалидная длина данных в пакете - 8203
840. Буфер слишком мал - 8204
841. Невалидный аргумент функции - 8205
842. Ошибка получения пакета - 8206
843. Ошибка в ответ на посланную команду - 8207Страница 258
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
844. Некорректный пакет - 8208
845. Неверный тип параметра - 8209
846. Ошибка разбора GISKE ключа - 8210
847. Ошибка Загрузки ключа S200 ключа - 8211
848. Ошибка проверки ключа - 8212
849. Коды ошибок на команду к S200 пинпаду 8300 - 8331
850. Fail - 8300
851. Use contact - 8301
852. No app - 8302
853. Block - 8303
854. App block - 8304
855. Err - 8305
856. No enough amt - 8306
857. Out amt - 8307
858. Cancel - 8308
859. No support - 8309
860. Ca err - 8310
861. Emv no aid - 8311
862. No card - 8312
863. Err param - 8313
864. Overflow - 8314
865. Cmd err - 8315
866. Rsp err - 8316
867. File notfound - 8317
868. No app ppse err - 8318
869. Data err - 8319
870. No data - 8320
871. Capk err - 8321
872. Decline trans - 8322
873. Amount zero - 8323
874. Timeout - 8324
875. Amount too big - 8325Страница 259
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
876. User cancel - 8326
877. Use phone - 8327
878. No capk - 8328
879. No revlst - 8329
880. Terminate - 8330
881. Cmd not supported - 8331
882. Неверный хэндл устройства - 8350
883. Таймаут - 8351
884. LRC не совпало - 8352
885. Невалидная длина данных пакете - 8353
886. Буфер слишком мал - 8354
887. Невалидный аргумент функции - 8355
888. Ошибка получения пакета - 8356
889. Ошибка в ответ на посланную команду - 8357
890. Некорректный пакет - 8358
891. Неверный тип параметра - 8359
892. Ошибка разбора GISKE ключа - 8360
893. Ошибка загрузки ключа S200 ключа - 8361
894. Ошибка проверки ключа - 8362
895. Ошибка удаления ключей - 8363
896. Ошибка отображения сообщения - 8364
897. Ошибка расчета MAC - 8365
898. Ошибка расчета DES - 8366
899. Ошибка получения кода клавиши - 8367
900. Ошибка получения пинблока - 8368
901. Операция прервана пользователем - 8369
902. Недостаточно памяти - 9000
903. Ошибка шифрования данных - 9001
904. Модуль шифрования данных не инициализирован - 9002
905. Ошибка генерирования ключа шифрования - 9003
906. Неверные аргументы функции - 9004
907. Ошибка инициализации модуля - 9005Страница 260
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
908. Ошибка расшифровки данных - 9006
909. Ошибка записи шифрованных данных в файл - 9007
910. Ошибка чтения шифрованных данных из файла - 9008
911. Ошибки Service Application 9100 - 9101
912. Неверный аргумент - 9200
913. Модуль ESLIP не инициализирован - 9201
914. Ошибка открытия ESLIP - 9202
915. Модуль ESLIP не открыт - 9203
916. Ошибка выделения памяти - 9204
917. Неверный код ответа - 9205
918. Выгрузка чеков в фоновом режиме - 9206
919. Получение ответа от сервера в фоновом режиме - 9207
920. Ошибка подписки на события ESlip - 9208
921. Ошибка отписки от события ESlip - 9209
922. Ошибка хендлера соединения - 9210
923. Ошибка передачи данных - 9211
924. Ошибка приема данных - 9212
925. Ошибка соединения с сервером - 9213
926. Ошибка формирования пакета - 9214
927. Идентификатор организации не существует в системе - 9215
928. Ошибки модуля DLA 9300 - 9385
929. Ошибки модуля Barcode - 9500
930. Неверный аргумент функции - 9600
931. Прервано пользователем - 9601
932. Неверный параметр - 9602
933. Недостаточно памяти - 9603
934. Ошибка передачи данных - 9604
935. Ошибка приема данных - 9605
936. Истекло время приема - 9606
937. Ошибки модуля BMS 10001-10901
938. Неправильные аргументы переданы на вход функции - 10001
939. Транзакция не создана - 10100Страница 261
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
940. Не удалось получить RRN последней транзакции - 10101
941. Тип активации указан неверно - 10102
942. Тип счета указан неверно - 10103
943.
Процент комиссии организатора превышает процент бонусирования
(оффлайн) - 10104
944. Не удалось открыть файл со счетом - 10105
945. Ошибка в файле со счетом - 10106
946. Не удалось открыть файл конфигурации - 10107
947. Не удалось загрузить состояние - 10108
948. Не удалось создать файл состояния - 10109
949. Не удалось открыть файл состояния - 10110
950. Не удалось загрузить конфигурацию - 10111
951. Транзакция уже создана либо не была закрыта - 10112
952. Ошибка в файле со списком позиций к возврату - 10113
953. Не удалось сохранить оффлайн транзакцию - 10201
954. Не удалось удалить записи лога - 10202
955. Не удалось инициализировать DOM-helper JSON-парсера - 10301
956. Не удалось инициализировать JSON-парсер - 10302
957. Ошибка в файле JSON - 10303
958. Внутренняя ошибка при разборе JSON - 10304
959. Не удалось инициализировать JSON-принтер (создание JSON-файла) - 10305
960. Ошибка выделения памяти в JSON-парсере - 10306
961. Не удалось открыть JSON-файл - 10307
962. Ошибка в XML-файле - 10350
963. Ответ не получен от сервера - 10401
964. Ошибка в структуре ответа или записи лога - 10402
965. Тип ответа не поддерживается (несоответствие формата сервера и
клиента) - 10403
966. Ошибка в составе ответа - 10404
967. Ошибка с сервера - 10405
968. Сервер не смог обработать запрос - 10406
969. Сбой на сервере - 10407
970. Ошибка при отправке запроса - 10410
971. Ошибка при создании запроса - 10411Страница 262
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
972. Ошибка соединения с сервером - 10501
973. Ошибка отправки запроса - 10502
974. Ошибка получения запроса - 10503
975. Неверный адрес сервера - 10504
976. Ошибка SSL соединения - 10505
977. Ошибка инициализации SSL контекста - 10506
978. Ошибка при разборе HTTP ответа - 10507
979. Смена уже открыта - 10601
980. Смена не открыта - 10602
981. Закрытие смены не возможно, закройте транзакцию - 10603
982. Неверные границы отчета (начало периода позже конца периода) - 10701
983. Ошибка при разборе ответа от сервера обновлений - 10801
984. Ошибка при обновлении файла - 10802
985. Ошибка при загрузке файла - 10803
986. Терминал не авторизован - 10901
987. Ошибка открытия устройствтерминала - 20000
988. Ошибка закрытия устройств терминала - 20001
989. Ошибка выбора юридического лица - 20002
990. Неверный аргумент функции - 20003
991. Недостаточно памяти - 20004
992.
При выборе финансовой операции не найден обязательный параметр в
контексте операции - 20005
993.
При выборе финансовой операции не найдено ни одной валюты для
текущего юридического лица и профиля - 20006
994. Нет номера карты для проверки последних 4 цифр номера. - 20007
995. Не совпали 4 последних цифры номера карты - 20008
996. Ошибка верификации держателя карты - 20009
997. Недопустимый сервис код карты - 20010
998. Попытка использовать магнит при наличиичипа - 20011
999. В контексте не найден тип операции - 20012
1000. В контексте не найден профиль терминала - 20013
1001. В параметрах не найден профиль по заданному идентификатору - 20014
1002. Карта обслуживается только на ATM - 20015Страница 263
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1003. По карте возможно только снятие наличных - 20016
1004. По карте возможна только оплата товаров и услуг - 20017
1005. Пинпад не открыт - 20018
1006. При запросе онлайн ПИН-а в контексте не найден номеркарты - 20019
1007.
Отказ от ввода пин. Сервис код карты требует обязательного ввода
пин. - 20020
1008.
При запросе онлайн ПИН-а не найден идентификатор терминала для
текущей валюты, платежной системы, юр. лица ипрофиля - 20021
1009. При запросе онлайн ПИН-а не найден идентификаторвалюты - 20022
1010. При запросе онлайн ПИН-а в контексте не найденавалюта - 20023
1011. При запросе онлайн ПИН-а в контексте не найденпрофиль - 20024
1012. При запросе онлайн ПИН-а в контексте не найдено юр.лицо - 20025
1013.
При запросе онлайн ПИН-а в контексте не найдена платежная система - 20026
1014.
При выборе операции не подобран логический терминал для текущей
валюты, платежной системы, юр. лица ипрофиля - 20027
1015.
При выборе источника операции мото, профиль терминала по указанному ID не найден - 20028
1016.
При выборе источника операции мото, в контексте не найден профиль
терминала - 20029
1017.
При выборе операции в режиме мото, профиль терминала по указанному ID не найден - 20030
1018. Нет доступных операций для карточного продукта в режимемото - 20031
1019. Нет доступных операций для карточного продукта - 20032
1020.
Ошибка работы алгоритма (может использоваться разными функциями) - 20033
1021.
Не найдены параметры TAK (Terminal Authentication Key) ключа по
идентификатору терминала - 20034
1022.
Не найдены параметры TPK (Terminal PIN KEY) ключа по идентификатору терминала - 20035
1023.
Не найдены параметры TOPK (Terminal Offline PIN KEY) ключа по
идентификатору терминала - 20036
1024.
Не найдены параметры TMK (Terminal Master Key) ключа поидентификатору терминала - 20037
1025.
Не найдены параметры TPMK (Terminal PIN Master Key) ключа по
идентификатору терминала - 20038
1026.
Не найдены параметры TOPMK (Terminal Offline PIN Master Key)
ключа по идентификатору терминала - 20039Страница 264
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1027.
Не найдены параметры TAMK (Terminal Authentication Master Key)
ключа по идентификатору терминала - 20040
1028.
Не найдены параметры KLK (Key Loading Key) ключа поидентификатору терминала - 20041
1029.
Не найдены параметры TDK (Terminal Derivation Key) ключапо
идентификатору терминала - 20042
1030.
Не найдены параметры TEK (Terminal ... Key) ключа по идентификатору терминала - 20043
1031. Нет номера карты в контексте при выбореоперации. - 20044
1032. Неверная карта кассира - 20045
1033.
Не определена валюта, необходимая для получения идентификатора
логического терминала - 20046
1034.
Не определена платежная система, необходимая для получения идентификатора логическоготерминала - 20047
1035. Не верный пин кассира - 20048
1036. В контексте не найден тип операции для выбора типа счета - 20049
1037. Просрочен срок действия карты клиента - 20050
1038.
При анализе рисков в контексте не найден срок действия карты клиента - 20051
1039. При анализе рисков не найден профиль терминала по его ID - 20052
1040.
При анализе рисков в контексте не найден идентификатор профиля
терминала - 20053
1041.
При анализе рисков в контексте не найден идентификатор карточного продукта - 20054
1042. При анализе рисков в контексте не найдена суммаоперации - 20055
1043. Нет доступных счетов - 20056
1044.
При проведении сверки итогов не найден ParamRegisteredTerminals
для текущего юридического лица и профиля - 20057
1045.
При проведении сверки итогов не найден профиль в контексте транзакции - 20058
1046.
При проведении сверки итогов не найдено юридическое лицо в контексте транзакции - 20059
1047. Не найдена валюта по умолчанию - 20060
1048. Ошибка выполнения сервисной операции банковским адаптером - 20061
1049. Ошибка инициализации банковского адаптера - 20062
1050.
При проведении загрузки ключей не найден
ParamRegisteredTerminals для текущего юридического лица и профиля
- 20063Страница 265
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1051.
При проведении загрузки ключей не найден профиль в контексте
транзакции - 20064
1052.
При проведении загрузки ключей не найдено юридическое лицо в
контексте транзакции - 20065
1053.
При проведении проверки связи не найден ParamRegisteredTerminals
для текущего юридического лица и профиля - 20066
1054.
При проведении проверки связи не найден профиль в контексте транзакции - 20067
1055.
При проведении проверки связи не найдено юридическое лицо в контексте транзакции - 20068
1056. Необходимо провести сверку итогов - 20069
1057. Карта в стоп-листе - 20070
1058. При проверке по стоп листу в контексте не найден номер карты - 20071
1059.
При выборе валюты не найдено юридическое лицо в контексте транзакции - 20072
1060. В контексте не найдено юридическое лицо - 20073
1061.
В параметрах не найден логический терминал для указанного юридического лица и профиля - 20074
1062. Ошибка сохранения данных в контекстетранзакции - 20075
1063. Нет поддерживаемых клиентскихязыков - 20076
1064. В параметрах не найден эквайрер по заданному идентификатору - 20077
1065. Не найден ресурс - 20078
1066. Операция прервана оператором - 20079
1067. Карта не обслуживается - 20080
1068. Ошибка сохранения данных транзакции - 20081
1069. Ошибка чтения данных транзакции - 20082
1070. Ошибка корректного завершения прерванной транзакции - 20083
1071. Ошибка выбора профилятерминала - 20084
1072. Размера доступной памяти не достаточно для проведения операции - 20085
1073. Ошибка записи в файл - 20086
1074. Ошибка выбора элемента меню в режиме автотестирования - 20087
1075. Ошибка режима загрузки ключей - 20088
1076. Некорректный тип протокольной части - 20089
1077. Данные для проведения отмены не получены - 20090
1078.
!!! Неверный параметр функции (не путать с APP_ERR_ARG) - может
использоваться разными функциями - 20091Страница 266
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1079.
!!! Отсутствуют данные при выполнении той или иной функции - может
использоваться разными функциями - 20092
1080.
!!! Некорректное обращение к функции - может использоваться разными
функциями - 20093
1081. !!! Функционал запрещен или не поддерживается, или RFU - 20094
1082. Несовпадение контрольных сумм для публичного ключа - 20095
1083. Превышен лимит транзакции - 20096
1084. Не введен CVV - 20097
1085. Нет данных для проведения завершения расчета - 20098
1086.
Расхождени суммы транкции между операциями Pre-Authorization и
Pre-Authorization Completion более – 40% + 30% - 20099
1087.
Ошибка системы параметризации приложения (например,
некорректные значения полей общей системы параметров) - 20100
1088. ПИН клиента не совпадают - 20101
1089.
Не найдена отменяемая транзакция. Операция Cancel должна быть
заменена на Refund - 20102
1090. Пустой список меню - 20103
1091. Прервано пользователем - 20104
1092. Chip card removed - 20105
1093. Срок действия публичного ключа (CAPK) истек - 20106
1094. Нет списка мастер ключей в настройках - 20107
1095. В параметрах нет списка профилей для текущего владельца - 20108
1096. База данных пуста - 20109
1097. В принтере нет бумаги - 20110
1098. Ручной ввод номера карты запрещен - 20114
1099. Операция не может быть проведена в оффлайне - 20115
1100. Отсутствует идентификатор терминала - 20117
1101. Отсутствует идентификатор продавца - 20118
1102. Нулевая сумма - 20119
1103. От кассы получена нулевая сумма - 20121
1104. Нет номера карты - 20122
1105. Неверные или отсутствуют настройки параметров платежа - 20123
1106. Операция запрещана пользователю - 20124
1107. Операция запрещена для ручного ввода - 20125
1108. Низкий уровень заряда аккумулятора - 20126Страница 267
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1109. Операция не поддерживается - 20127
1110. Mastercard запрещает бесконтактную отмену - 20128
1111. Неверный пароль - 20129
1112. Операция прервана кассой - 20131
1113. Слишком большая сумма операции - 20132
1114. От кассы получена недопустимая операция - 20133
1115. Ошибка чтения магнитной карты - 20135
1116. Нет валюты - 20136
1117. Достигнуто максимальное число запланированных операций - 20137
1118. Отложенная операция не выполнена - 20138
1119.
Terminal ID не принадлежит владельцу, который разблокировал
терминал - 20140
1120. У текущего владельца нет регистрации в платежной системе карты - 20141
1121. Вместо операции Отмена необходимо выполнить Возврат - 20142
1122. Операция запрещена - 20143
1123. Нет RRN - 20144
1124. Нет способа ввода карты в контексте - 20145
1125. Нет данных по платежной системе - 20146
1126. Юридическое лицо не поддерживает платежную систему - 20148
1127. Нет связи с KKM - 20149
1128. Нет операции для отмены - 20150
1129. Нет рабочего ключа для шифрации данных карты - 20151
1130. Сумма коррекции превышает оригинальную сумму - 20152
1131. Операция не разрешена для режима МОТО - 20153
1132. Слайдшоу не будет - 20157
1133. Операция уже отменена - 20158
1134. Операция не доступна профилю терминала - 20159
1135. Недопустимый IP порт - 20160
1136. Операция не рарзрешена в режиме MOTO - 20161
1137. Ошибка формирования Secure ISO - 20162
1138. Попытка отменить операцию отмены - 20163
1139.
Некорректные данные шифрования карточных данных при работе со
smartsale - 20164Страница 268
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1140. Fallback запрещен настройками - 20165
1141.
Универсальный код ошибки от плагинов. Что это конкретно за ошибка,
известно только самому плагину - 20166
1142. Ошибка расчета пин блока - 20167
1143. Нет загруженных ключей для выбранного владельца - 20168
1144. Ошибка разбора параметров мониторинга - 20169
1145. Нет планов платежей в рассрочку - 20170
1146. Ошибка настройки параметров платежа в рассрочку - 20171
1147. Сумма всех платежей больше суммы операции - 20172
1148. Неверный пароль - 20173
1149. Нельзя отменить операцию по этому ID терминала - 20174
1150. Нет доступных отчетов - 20175
1151. Необходимо провести идентификацию - 20176
1152. Недостаточно данных для идентификации - 20177
1153. Ошибка данных - 20178
1154. Операция не найдена - 20179
1155. Ошибка формирования/разбора данных - 20180
1156. Ошибка отображения картинки вместо текста - 20181
1157. Ошибка создания xml файла с цифровой подписью - 20182
1158. Ошибка сохранения PosIds в контекст - 20183
1159. Ошибка восстановления PosIds из контекста - 20184
1160. Need input CVN - 20185
1161. Need input CVP - 20186
1162. От кассы получен неверный RRN или AUTCHODE - 20187
1163. Fee calculation declined - 20188
1164. Small amount - 20189
1165. Истекло время выполнения операции - 20190
1166. Transfer card not set - 20191
1167. Платежная система AliPay не поддерживается - 20193
1168. Неверный формат URL - 20194
1169. Первый пароль не совпал с повторнымпаролем. - 21007
1170. Ошибка формата строки даты или времени - 21008Страница 269
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1171.
Продолжать с отображением диалога (сообщения). Любое другое
значение не отображать - 21009
1172. Элемент списка не найден. - 23000
1173. Ошибка записи в бинарный файлпараметров - 23001
1174. Ошибка чтения из бинарного файлапараметров - 23002
1175. Ошибка получения даты из строки - 23003
1176. Ошибка чтения из файла рабочих ключей - 23004
1177. Ошибка открытия файла рабочихключей - 23005
1178. Ошибка записи в файл рабочих ключей - 23006
1179. Ошибка создания модифицируемыхпараметров - 23007
1180. Экваринг не поддерживает валюту - 23008
1181. Экваринг не поддерживает платежную систему - 23009
1182. Отсутствует обязательный файл параметров - 23010
1183. Ошибка конвертации рабочихключей - 23011
1184. Ошибка получения времени из строки - 23012
1185. Отсутствие в пинпаде необходимых мастер ключей - 23013
1186. Отсутствие номера ячейки необходимого мастер ключа в параметрах - 23014
1187. Ошибка загрузки ключей с хоста - 23015
1188. Нельзя подтвердить авторизацию - 23016
1189. Ошибка конвертации ключа для шифрования - 23017
1190. Ошибка конвертации из АТМ в GISKE формат - 23018
1191. Отсутствуют бонусные программы - 23019
1192. Библиотека не инициализирована. - 24000
1193. Неизвестная ошибка. - 24001
1194. Ошибка выполнения системных функций. - 24002
1195. Неверный параметр функции - 24003
1196. Отсутствуют данные - 24004
1197. Некорректное обращение кфункции - 24005
1198.
Отсутствуют строковые ресурсы для вывода экранных форм (или аналогичная ошибка) - 24006
1199. Операция не поддерживается - 24007
1200.
Операция прервана клиентом (для тех операций, где это не допустимо, например, если не вводится OnlinePin при запросе баланса) - 24008
1201. Карта была удалена - только длядиалогов - 24009Страница 270
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1202. Отсутствуют общие настройки Emvмодуля - 24010
1203.
Нулевая сумма для подтверждения операции или недопустимость
вывода диалога подтверждения - 24011
1204. Некорректные установки правил проведения транзакции, не
допускающие дальнейшее выполнение EMV транзакции - 24012
1205. Ошибка сохранения данных в БД Emv-ядра - 24013
1206.
Ошибка (алгоритмическая или обмена), возникшая в ходе выполнения
транзакции в EMV-ядре, позволяющая в ряде ситуаций перейти на
fallback - явлется аналогом EmvCoreResultProcessingError
- 24014
1207.
Ошибка-аналог EmvCoreResultNotAccepted, возникшая в EMV-ядре: нет
поддерживаемых приложений на карте (транзакция прервана) или не
поддерживается команда SELECT (для PSE), а также если на команду
Generate Application Criptogramm карта вернула код 0x6985
(криптограмма не м.б. сгенерирована)
- 24015
1208.
Ошибка-аналог EmvCoreResultApplicationBlocked, возникшая в EMVядре: Нет возможности выбрать приложение (транзакция прервана) - 24016
1209.
Ошибка-аналог EmvCoreResultCardError, возникшая в EMV-ядре:
Процессуальная ошибка - ошибка обмена с картой (транзакция
прервана)
- 24017
1210.
Ошибка-аналог EmvCoreResultSystemError, возникшая в EMV-ядре:
Системная ошибка - ошибка при захвате памяти или нехватки
размерности фиксированных массивов. А также если отсутствуют данные
в фиксированных массивах, инициализируемых ядром - и при
возникновении других алгоритмических ошибок НЕ допускающих
переход на fallback
- 24018
1211. Ошибка-аналог EmvCoreResultCanceled, возникшая в EMV-ядре - 24019
1212.
Получен код sw 6985 на GPO Операция с данным приложением не может
быть выполнена (Условия использования не удовлетворены). Повторный
выбор приложения не производится.
- 24020
1213. Карта блокирована - 24021
1214.
Ошибка-аналог EmvCoreResultNotAccepted, возникшая в EMV-ядре: Нет
поддерживаемых приложений на карте (транзакция прервана) или не
поддерживается команда SELECT (для PSE), а также если на команду
Generate Application Criptogramm карта вернула код 0x6985
(криптограмма не м.б. сгенерирована)
- 24022
1215. Неверный пароль оператора - 24100
1216. Имя оператора не найдено - 24101
1217. Карта оператора не найдена - 24102
1218. Нет зарегистрированных операторов терминала - 24103
1219. Не верный пароль оператора - 24104
1220. Оператор с указанным номером карты не существует - 24105
1221. Оператор с указанным именем не существует - 24106
1222. Ошибка записи в файл списка операторовтерминала - 24107Страница 271
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1223. Ошибка открытия файла списка операторов терминала - 24108
1224. Ошибка чтения файла списка операторовтерминала - 24109
1225. Оператор с указанным именем уже существует - 24110
1226. Оператор с указанной картой уже существует - 24111
1227. Нет текущего оператора - 24112
1228. Пользователь не найден - 24113
1229. Невозможно получить текущую организацию из контекста - 24114
1230. Пользователь не найден - 24115
1231. У пользователя нет необходимых прав доступа - 24116
1232. Оператор с указанным Id не существует - 24117
1233. Неизвестный идентификатор параметра в шаблоне чека. - 24200
1234. Неизвестный тип параметра в шаблоне чека. - 24201
1235. Шаблон чека не найден. - 24202
1236. Ошибка печати чека. - 24203
1237. Нет данных для печати копии чека. - 24204
1238. Ошибка формата шаблона данных - 24205
1239. Неизвестная ошибка. - 25001
1240. Недостаточно данных для выполненияоперации - 25002
1241. Прервано пользователем - 25003
1242. Операция не поддерживается - 25004
1243. Нет операции для отмены - 25005
1244. В контексте отсутствует сумма оригинальной операции - 25006
1245. В контексте отсутствует режим проведенияоперации - 25007
1246. Ошибка подготовки данных для прямойотмены - 25008
1247. Карта не принадлежит текущему оператору - 25009
1248. Нет связи с хостом - 25010
1249. Ошибка отправки сообщения - 25011
1250. Ошибка приема сообщения - 25012
1251. Хост отклонил запрос - 25013
1252. Повтор EMV операции с 0 - 25014
1253. Нет ответа от хоста - 25015
1254. Отсутствуют возможные соединения с хостом - 25016Страница 272
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1255. Файл лицензии не загружен - 26001
1256. Ошибка чтения файла лицензии - 26002
1257. Ошибка разбора файла лицензии - 26003
1258. Ошибка параметров - 26004
1259. Ошибка сверки подписи - 26005
1260. Функционал не доступен лицензией - 26006
1261. Количество операций в демо режимеисчерпано - 26007
1262.
Серийный номер устройства и серйиный номер лицензии не совпадают - 26008
1263. Идентификатор продукта неверен - 26009
1264. Ошибка записи данных лицензии в файл - 26010
1265. Ошибка чтения данных лицензии из файла - 26011
1266. Превышена допустимая сумма - 26012
1267. Неизвестная ошибка модуля Card Manager - 27001
1268. Модуль Card Manager неинициализирован - 27002
1269. Некорректное обращение кфункции - 27003
1270. Неудалось создать субобекты - 27004
1271. Функционал запрещен (или не поддерживается) - 27005
1272.
Исчерпано количество поддерживаемых программмных модулей
обслуживания карт - 27006
1273. Неверный параметр функции (не путать с APP_ERR_ARG) - 27007
1274. Тип (технология) обслуживания карт не поддерживается - 27008
1275. Устройство не подключено или неисправно - 27009
1276. С устройством не установлено обмена (устройство не открыто) - 27010
1277.
Нет поддерживаемых конфигураций параметров бесконтакного
считывателя - 27011
1278.
Слишком много конфигураций, дальнейшее распределение памяти не
возможно - 27012
1279. Для данного профиля не найдено ни одной конфигурации - 27013
1280. Не установлены параметры профиля - 27014
1281. Объект не инстанцирован - 27015
1282. Некорректный формат обрабатываемых данных - 27016
1283. Не найдены данные - 27017
1284. Вызываемый модуль функционал занят выполнением других задач и в
текущий момент запрашиваемый функционал не доступен - 27018Страница 273
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1285. Истекло время ожидания ввода ПИН - 27019
1286. Истекло время ожидания выполнения той или иной функции - 27020
1287. Данный тип карты не может быть обслужен в бесконтактном режиме - 27201
1288. Не возможно провести операцию в бесконтактном режиме - 27202
1289. Не найден тэг - 27203
1290. !!! Отсутствуют данные при выполнении бесконтактной операции - 27205
1291. !!! Отклонена бесконтактная карта - 27206
1292. !!! Ошибка парсинга ответа от сервера R-Keeper - 27207
1293. На сервере R-Keeper не найден номер заказа - 27208
1294. Нет связи с сервером R-Keeper - 27209
1295. Некорректная сумма в ответе сервера R-Keeper - 27210
1296. Нет номера заказа в ответе сервера R-Keeper - 27211
1297. Нет блюд в ответе сервера R-Keeper - 27212
1298. Не найдены настройки сервера R-Keeper - 27213
1299. Ошибка формирования запроса на сервер R-Keeper - 27214
1300. Ошибка обмена данными с сервером R-Keeper - 27215
1301. Ошибка фискализации - 27216
1302. !!! Закрытие заказа отклонено сервером R-Keeper - 27217
1303. Ошибка при сериализации - нет данных - 27218
1304. Ошибка при сериализации - недостаточная длина буфера - 27219
1305. Ошибка при сериализации - ошибка чтения из контекста - 27220
1306. Ошибка при сериализации - ошибка записи в контекст - 27221
1307. Заказ блокирован - 27222
1308. Слишком большой размер заказа - 27223
1309. Нет номера бонусной карты - 27224
1310. Нулевая сумма после использования бонусов - 27225
1311. Нет бонусных программ для карты - 27226
1312. Запрещена частичная отмена для операций с бонусами - 27227
1313. Найдена банковская операция с данным бонусным RRN - 27228
1314. Сумма бонусов превысила допустимую - 27229
1315. Ошибка открытия файла - 28001
1316. Нет записи в файле в текущей позиции - 28002
1317. Ошибка при чтении файла - 28003Страница 274
UNIPOS Terminal
Руководство инженера
Таблица №41
№ п/п Описание ошибок Код
1318. Ошибка при записи файла - 28004
1319. Запись не найдена - 28005
1320. Ошибка при установке позиции в файле - 28006Страница 275
UNIPOS Terminal
Руководство инженера
Приложение C Правила форматирования
шаблона чека
C.1 Форматирование данных.
• Командыформатированияданныхзаключаютсявфигурныескобки{}
• Имяпараметра(IDпараметра)изконтекстатранзакциизаключаютсяв
квадратные скобки[]
• А - выравнивание данных из контекста транзакций со значением способа
выравнивания: l – выравнивание по левому краю, r – выравнивание по
правомукраю,m– выравнивание по середине.Например, Al или Am.
• M–режимвставкиданныхвпечатнуюстроку.Допустимыезначения:i–
вставка данных, o - перезапись данных.
• F - параметры форматирования данных из контекста транзакции.
Атрибуты форматирования:
• Направлениеформатирования–l–слеванаправо,r–справа
налево
• Ограничение размера форматируемых данных - t - по размеру
шаблона, d - по размеру данных
• Символ замещения в шаблоне
• Символы-разделители
ПРИМЕЧАНИЕ: Символ замещения и символы-разделители – используются при задании маски
печати.Например,вслучае,когдасимволзамещения#,топрипечатиPANпомаске*********
####вместо#возьмутсясимволыизномеракарты,аостальные–спрятаныза*.
• Шаблон форматирорвания,заключенныйвкруглые скобки()
• P - разделитель минимальных единиц валюты. Например, P. – точка
является разделителем.
ПРИМЕРЫ:
Форматирование номера карты: Frt# (**** **** **** ####).
Форматированиедаты/времени:Fld#($D[D\M\Y]$T[H:M:S]).
Форматирование суммы: Frd#’(###’###’###’###’)P..Страница 276
UNIPOS Terminal
Руководство инженера
C.2 Задание правил печати строк.
• Команды правилпечати строк заключаютсяв ^^
• М – максимальный размер печатаемой строки, используется для разбивки
длинных данных, полученных из контекста транзакции на строки и
вывод их на печать. Аттрибуты команды:
• 2 символа – размер печатной строки
• Выравнивание данных в строке:l – выравнивание по левому краю,
r – выравнивание по правому краю, m – выравнивание по
середине.
• G – команда печати графического логотипа. Наименование логотипа
заключается в квадратные скобки []. Например, G[inpaslogo].
• F– команда прогона бумаги. Количество строк заключается в квадратные
скобки []. Например, F[5].
• S – задание режима печати принтера – 24, 32 или 42 символа на строку.
Количество символов на строку заключается в квадратные скобки [ ].
Например, S[32].
• NH–установкарежиманормальной(поумолчанию)высотыстрок.
• NP – режим инверсной печати.
• DH – режим двойной высоты символов печати.
• DW –режим двойной ширины символов печати.
• HH –режим полуторной высоты символов печати.
• P – настройка размера шрифта. Размер шрифта заключается в
квадратные скобки, например, P[1]. Поддерживаемые значения
размера шрифта:
1 - шрифт «по-умолчанию» (первый в списке поддерживаемых
шрифтов)
2 - шрифт 8x14
3 - шрифт 16x16
ПРИМЕЧАНИЕ: Список поддерживаемых шрифтов для используемого языка
настраивается в системной переменной prn_font_xx, где xx – буквенное обозначение
языка. Например, prn_font_en= eng8x14.pft, eng16x16.pft. Имена шрифтов разделяются
символом ‘,’. Первый в списке поддерживаемых шрифтов является шрифтом «поумолчанию».
Пример настройки размера шрифта строки:Страница 277
UNIPOS Terminal
Руководство инженераСтраница 278
UNIPOS Terminal
Руководство инженера
C.3 Примеры использования правил печати строк:
^M32m^ - размер печатаемой строки 32 символа, выравнивание печатаемых строк
поцентрустроки.Еслиправилопечатистрокииспользуетсясполем[25]–«Место
установки», имеющее значение «г. Комсомольск-на-Амуре ул.Ленинградская,
72»(44символа),тоначекебудетнапечатано:
Рисунок1
^M32r^-выравниваниеданныхвправо:
Рисунок2
^M32l^-выравниваниеданныхвлево:
Рисунок3
NP–режиминверснойпечати.
Рисунок4
DH – режим двойной высоты символов печати.Страница 279
UNIPOS Terminal
Руководство инженераСтраница 280
UNIPOS Terminal
Руководство инженера
Рисунок5
DW - режим двойной ширины символов печати.
Рисунок6
HH - режим полуторной высоты символов печати.
Рисунок7
NP+DW–режимдвойнойширинысимволовпечатииинверснойпечати.
Рисунок8
C.4 Задание блоков печати
/**-начало блока
**/–конецблокаСтраница 281
UNIPOS Terminal
Руководство инженера
C.5 Условия печати строк/блоков
Команды«условияпечати»данныхзаключаютсявфигурныескобки{}
Типыусловий:
• C - условие печати строки по наличию или отсутствию данных в контексте
транзакции. Наименование поля условия в контексте транзакции,
заключено в квадратные скобки []. Пример использования:
• С+[enterPinFlag] - если поле «enterPinFlag» присутствует в
контексте транзакции – строка печатается.
• С-[enterPinFlag] - если поле «enterPinFlag» отсутствует в
контексте транзакции – строка печатается.
• L–условияциклическойпечатиданных.Впараметрахусловиязадается
[init, switch,count], например, {L[200,201,202]}
• init – идентификатор поля контекста транзакции для инициализации
печати цикла.
• switch-идентификаторполяконтекстатранзакциидляперемещенияпо
циклу.
• count - идентификатор поля контекста транзакции с количеством
итераций цикла.
• E–арифметическиеусловияпечатиданных.Доступныеоперанды:
• > - логическое «больше»,
• < - логическое «меньше»,
• ==-логическое«равно»,
• != - логическое «не равно»,
• && - логическое «И»,
• ||. - логическое «Или»,
• Если в выражениях используются “” – выполняются действия
надстроками, иначе – над числами.
Примеры использования:
• {E([1] > 100)} – условие выполняется, если сумма операции больше 100
минимальных единиц
• {E([13] == “USD”)} - условие выполняется, если символьный код валюты –
USD.
• {E([1]>100)&&([13]==“USD”)}-условиевыполняется,есливыполняются
обаусловия.Страница 282
UNIPOS Terminal
Руководство инженера
C.6 Настройка текста «по умолчанию» в шаблоне чека при отсутствии
данных.
Пример использования:
В шаблоне чека есть вот такая строка:
Где,
19 – Код ответа от хоста 39 поле;
17 – Код авторизации 38 поле.
При получении ответа от хоста, в пакете отсутствует 38 поле (Код
авторизации. оно опциональное). В таком случае в шаблоне чека не
печатается вся строчка. Хотя код ответа в пакете есть.
Меняем данную строку в шаблоне чека на:
В данном случае на чеке напечатается:
RC: 00 КОД АВТОРИЗАЦИИ:
Вместо пробелов можно написать любой текст, главное, чтобы
результирующая строка не превышала текущий размер строки чека,
например, 32 символа.
В данном случае на чеке напечатается:
RC: 00 КОД АВТОРИЗАЦИИ: ------
RC:
{[19]Al} КОД АВТОРИЗАЦИИ: {[17]ArD[ ]}
RC:
{[19]Al} КОД АВТОРИЗАЦИИ: {[17]ArD[ ]}
RC:
{[19]Al} КОД АВТОРИЗАЦИИ: {[17]ArD[------]}Страница 283
UNIPOS Terminal
Руководство инженера
C.7 Настройка выравнивания текста в шаблоне чека при нескольких
условиях в строке.
Пример использования:
В чеке необходимо вывести в одной строке TVR и TSI.
В шаблон чека необходимо добавить строку:
В данном случае необходимо использовать выравнивание Al в обоих условиях,
это обусловлено особенностями выравнивая Al и Ar:
Al - приводит к вставке текста в строку шаблона, при этом все данные,
расположенные правее управляющей последовательности, например, {[69]Al},
сдвигаются вправо (размер результирующей строки увеличивается на размер
вставляемых данных).
Ar – приводит к вставке текста в строку шаблона, при этом вставляемые
данные перетирают данные шаблона, расположенные левее управляющей
последовательности, например, {[70]Ar} (размер результирующей строки не
изменяется).
TVR:{[69]Al} TSI:{[70]AlD[----]}
